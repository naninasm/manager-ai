<!--  -->

<!-- “十二五”普通高等教育本科国家级规划教材 -->

# 计算机网络

## （第7版）

**谢希仁 编著**

**電子工業出版社**

**Publishing House of Electronics Industry**

北京·BEIJING

## 内容简介

本书自1989年首次出版以来，曾于1994年、1999年、2003年、2008年和2013年分别出了修订版。在2006年本书通过了教育部的评审，被纳入普通高等教育“十一五”国家级规划教材；2008年出版的第5版获得了教育部2009年精品教材称号。2013年出版的第6版是“十二五”普通高等教育本科国家级规划教材。现在的第7版又在第6版的基础上进行了一些修订。

全书分为9章，比较全面系统地介绍了计算机网络的发展和原理体系结构、物理层、数据链路层（包括局域网）、网络层、运输层、应用层、网络安全、互联网上的音频／视频服务，以及无线网络和移动网络等内容。各章均附有习题（附录A给出了部分习题的答案和提示）。全书课件（PowerPoint文件）放在电子工业出版社悦学多媒体课程资源平台上（http://yx.51zhy.cn/mtrcsRes/phei_cnetwork.jsp)，供读者下载参考。

本书的特点是概念准确、论述严谨、内容新颖、图文并茂，突出基本原理和基本概念的阐述，同时力图反映计算机网络的一些最新发展。本书可供电气信息类和计算机类专业的大学本科生和研究生使用，对从事计算机网络工作的工程技术人员也有参考价值。

**未经许可，不得以任何方式复制或抄袭本书之部分或全部内容。**

**版权所有，侵权必究。**

**图书在版编目（CIP）数据**

计算机网络／谢希仁编著．-7版．-北京：电子工业出版社，2017.1

“十二五”普通高等教育本科国家级规划教材

ISBN 978-7-121-30295-4

I．①计···II．①谢···III．①计算机网络-高等学校-教材 IV．①TP393

中国版本图书馆CIP数据核字（2016）第269601号

策划编辑：郝志恒

责任编辑：牛晓丽

印 刷：三河市华成印务有限公司

装 订：三河市华成印务有限公司

出版发行：电子工业出版社

北京市海淀区万寿路173信箱 邮编：100036

开 本：787x1092 1/16 印张：29 字数：742.4千字

版 次：1999年4月第2版

2017年1月第7版

印 次：2017年1月第1次印刷

定 价：45.00元

凡所购买电子工业出版社图书有缺损问题，请向购买书店调换。若书店售缺，请与本社发行部联系，联系及邮购电话：(010)88254888,88258888。

质量投诉请发邮件至zlts@phei.com.cn，盗版侵权举报请发邮件至dbqq@phei.com.cn。

本书咨询联系方式：QQ9616328。

## 前 言

本教材第6版被纳入“十二五”普通高等教育本科国家级教材规划。由于本教材所讲授的是计算机网络最基本的原理，而这些基本原理是比较成熟和稳定的，因此，介绍基本原理的部分相对稳定，不会有很大的变动。

第7版的教材有以下一些改动。

互联网的发展非常快，编者水平很有限，只能把最重要的一些新内容增加到新版教材中。所有各章应参考的RFC 文档和参考文献也都尽可能进行了更新。对于重点内容适当地增加了一些习题。

删除了第10章。由于原第10章中的IPv6和MPLS已属于比较成熟的技术，现在改放在第4章中介绍。原第10章中的P2P应用，现在放在第6章中介绍，并增加了一些新的内容。

另一个改动是Internet的译名不再使用推荐译名“因特网”，而改为目前大家已普遍使用的“互联网”。虽然推荐译名“因特网”有其权威性，但实践证明，各界人士大都不愿意用。考虑到我国的实际情况，编者决定从第7版起改用事实上的标准译名“互联网”。

此外，比特这个单位以前用英文字母b来表示，从第7版起改为bit。这样可能更加清楚明确些。

本教材的参考学时数为70学时左右。在课程学时数较少的情况下可以只学习前6章，这样仍可获得有关互联网的最基本的知识。

书后共有三个附录，附录A是部分习题解答（而不是详细解题步骤）、附录B是英文缩写词，附录C是参考文献与网址。

考虑到现在从网上下载已非常方便，因此原附在书中的CD-ROM已非必要。读者可以访问电子工业出版社悦学多媒体课程资源平台（http://yx.51zhy.cn/mtrcsRes/phei_cnetwork.jsp）下载有关的参考内容。

为满足不同院校、不同学时、不同专业的教学需要，第7版同时推出了精简版，也就是由电子工业出版社出版的《计算机网络简明教程》第3版。

林波博士对第7章网络安全提出了许多修改意见。吴自珠副教授一直对本教材的出版给予全力支持。对此，编者均表示诚挚的谢意。由于编者水平所限，书中难免还存在一些缺点和错误，殷切希望广大读者批评指正。

谢希仁

2016年8月

于解放军理工大学，南京

编者的电子邮件地址：xiexiren@tsinghua.org.cn

欢迎指出书中内容的不足和错误，但作者无法满足一些深入探讨和科研项目咨询的需求，请予谅解。若需索取解题的详细步骤，请参考作者编著的《计算机网络释疑与习题解答》。

<!-- ·III· -->

## 目 录

**第1章 概述**

1.1 计算机网络在信息时代中的作用...............................................1

1.2 互联网概述.................................................................4

1.2.1 网络的网络...........................................................4

1.2.2 互联网基础结构发展的三个阶段.........................................5

1.2.3 互联网的标准化工作...................................................8

1.3 互联网的组成..............................................................10

1.3.1 互联网的边缘部分....................................................10

1.3.2 互联网的核心部分....................................................12

1.4 计算机网络在我国的发展．....................................................17

1.5 计算机网络的类别..........................................................19

1.5.1 计算机网络的定义....................................................19

1.5.2 几种不同类别的计算机网络...........................................20

1.6 计算机网络的性能...........................................................21

1.6.1.计算机网络的性能指标...............................................21

1.6.2 计算机网络的非性能特征..............................................26

1.7 计算机网络体系结构.........................................................27

1.7.1 计算机网络体系结构的形成...........................................27

1.7.2 协议与划分层次......................................................28

1.7.3 具有五层协议的体系结构..............................................30

1.7.4 实体、协议、服务和服务访问点........................................34

1.7.5 TCP/IP的体系结构...................................................35

**本章的重要概念.**.................................................................37

**习题**..........................................................................38

**第2章 物理层**......................................................................41

2.1 物理层的基本概念............................................................41

2.2 数据通信的基础知识.........................................................42

2.2.1 数据通信系统的模型...................................................42

2.2.2 有关信道的几个基本概念..............................................43

2.2.3 信道的极限容量......................................................45

2.3 物理层下面的传输媒体．......................................................46

2.3.1 导引型传输媒体......................................................47

2.3.2 非导引型传输媒体....................................................51

2.4 信道复用技术..............................................................53

<!-- ·IV· -->

2.4.1 频分复用、时分复用和统计时分复用...................................53

2.4.2 波分复用............................................................56

2.4.3 码分复用............................................................57

2.5 数字传输系统..............................................................59

2.6 宽带接入技术..............................................................60

2.6.1 ADSL技术．..........................................................60

2.6.2 光纤同轴混合网（HFC网）............................................63

2.6.3 FTTx技术..........................................................65

**本章的重要概念**................................................................66

**习题**..........................................................................67

**第3章 数据链路层**................................................................69

3.1 使用点对点信道的数据链路层．................................................70

3.1.1 数据链路和帧........................................................70

3.1.2 三个基本问题........................................................71

3.2 点对点协议PPP............................................................76

3.2.1 PPP协议的特点......................................................76

3.2.2 PPP协议的帧格式．...................................................78

3.2.3 PPP协议的工作状态.................................................80

3.3 使用广播信道的数据链路层.................................................82

3.3.1 局域网的数据链路层.................................................82

3.3.2 CSMA/CD协议......................................................85

3.3.3 使用集线器的星形拓扑...............................................90

3.3.4 以太网的信道利用率.................................................92

3.3.5 以太网的MAC层.....................................................93

3.4 扩展的以太网..............................................................97

3.4.1 在物理层扩展以太网.................................................97

3.4.2 在数据链路层扩展以太网..............................................99

3.4.3 虚拟局域网.........................................................101

3.5 高速以太网................................................................103

3.5.1 100BASE-T以太网..................................................103

3.5.2 吉比特以太网.......................................................104

3.5.3 10吉比特以太网（10GE）和更快的以太网................................106

3.5.4 使用以太网进行宽带接入.............................................107

**本章的重要概念**...............................................................108

**习题**.........................................................................109

**第4章 网络层**...................................................................113

4.1 网络层提供的两种服务.....................................................113

4.2 网际协议IP...............................................................115

4.2.1 虚拟互连网络.......................................................116

<!-- ·V· -->

4.2.2 分类的IP地址......................................................118

4.2.3 IP地址与硬件地址...................................................122

4.2.4 地址解析协议ARP．..................................................124

4.2.5 IP数据报的格式．....................................................128

4.2.6 IP层转发分组的流程．................................................132

4.3 划分子网和构造超网.......................................................135

4.3.1 划分子网...........................................................135

4.3.2 使用子网时分组的转发...............................................140

4.3.3 无分类编址CIDR（构造超网）........................................141

4.4 网际控制报文协议ICMP....................................................147

4.4.1 ICMP报文的种类．....................................................148

4.4.2 ICMP的应用举例．....................................................149

4.5 互联网的路由选择协议．.....................................................151

4.5.1 有关路由选择协议的几个基本概念．....................................151

4.5.2 内部网关协议RIP...................................................153

4.5.3 内部网关协议OSPF.................................................159

4.5.4 外部网关协议BGP．..................................................163

4.5.5 路由器的构成.......................................................167

4.6 IPV6.....................................................................171

4.6.1 IPv6的基本首部.....................................................171

4.6.2.IPv6的地址．.........................................................173

4.6.3 从IPv4向IPv6过渡.................................................176

4.6.4 ICMPv6............................................................177

4.7 IP多播...................................................................178

4.7.1 IP多播的基本概念..................................................178

4.7.2 在局域网上进行硬件多播.............................................179

4.7.3 网际组管理协议IGMP和多播路由选择协议．............................180

4.8 虚拟专用网VPN和网络地址转换NAT.......................................185

4.8.1 虚拟专用网VPN....................................................185

4.8.2 网络地址转换NAT..................................................187

4.9 多协议标记交换MPLS．.....................................................189

**4.9.1** MPLS的工作原理...................................................190

4.9.2 MPLS首部的位置与格式.............................................192

**本章的重要概念.**...............................................................193

**习题**..........................................................................195

**第5章 运输层**...................................................................203

5.1 运输层协议概述...........................................................203

5.1.1 进程之间的通信.....................................................203

5.1.2 运输层的两个主要协议...............................................205

5.1.3 运输层的端口.......................................................206

<!-- ·VI· -->

5.2 用户数据报协议UDP......................................................208

5.2.1 UDP概述．.........................................................208

5.2.2 UDP的首部格式....................................................209

5.3 传输控制协议TCP概述....................................................210

5.3.1 TCP最主要的特点..................................................210

5.3.2 TCP的连接．........................................................212

5.4 可靠传输的工作原理......................................................212

5.4.1 停止等待协议......................................................213

5.4.2 连续ARQ协议.....................................................216

5.5 TCP报文段的首部格式....................................................217

5.6 TCP可靠传输的实现......................................................221

5.6.1 以字节为单位的滑动窗口............................................221

5.6.2 超时重传时间的选择................................................225

5.6.3 选择确认SACK．....................................................226

5.7 TCP的流量控制..........................................................227

5.7.1 利用滑动窗口实现流量控制..........................................227

5.7.2 TCP的传输效率....................................................228

5.8 TCP的拥塞控制..........................................................229

5.8.1 拥塞控制的一般原理................................................229

5.8.2 TCP的拥塞控制方法................................................232

5.8.3 主动队列管理AQM.................................................236

5.9 TCP的运输连接管理......................................................238

5.9.1 TCP的连接建立....................................................238

5.9.2 TCP的连接释放....................................................240

5.9.3 TCP的有限状态机..................................................241

**本章的重要概念**...............................................................242

**习题**.........................................................................244

**第6章 应用层**...................................................................251

6.1 域名系统DNS............................................................252

6.1.1 域名系统概述......................................................252

6.1.2 互联网的域名结构..................................................253

6.1.3 域名服务器........................................................255

6.2 文件传送协议............................................................260

6.2.1 **FTP概述**..........................................................260

6.2.2 FTP的基本工作原理................................................261

6.2.3 简单文件传送协议TFTP.............................................262

6.3 远程终端协议 TELNET....................................................263

6.4 万维网WWW............................................................264

6.4.1 万维网概述........................................................264

6.4.2 统一资源定位符URL................................................266

<!-- ·VII· -->

6.4.3 超文本传送协议HTTP..............................................267

6.4.4 万维网的文档......................................................274

6.4.5 万维网的信息检索系统..............................................279

6.4.6 博客和微博........................................................281

6.4.7 社交网站..........................................................283

6.5 电子邮件................................................................284

6.5.1.电子邮件概述......................................................284

6.5.2 简单邮件传送协议SMTP............................................287

6.5.3 电子邮件的信息格式................................................289

6.5.4 邮件读取协议POP3和IMAP.........................................289

6.5.5 基于万维网的电子邮件..............................................291

6.5.6 通用互联网邮件扩充MIME．..........................................291

6.6 动态主机配置协议DHCP..................................................295

6.7 简单网络管理协议SNMP．..................................................297

6.7.1 网络管理的基本概念................................................297

6.7.2 管理信息结构SMI..................................................299

6.7.3 管理信息库MIB．....................................................302

6.7.4 SNMP的协议数据单元和报文．........................................304

6.8 应用进程跨越网络的通信．..................................................307

6.8.1 系统调用和应用编程接口............................................307

6.8.2 几种常用的系统调用................................................309

6.9 P2P应用.................................................................311

6.9.1 具有集中目录服务器的P2P工作方式..................................311

6.9.2 具有全分布式结构的P2P文件共享程序................................313

6.9.3 P2P文件分发的分析................................................315

6.9.4 在P2P对等方中搜索对象............................................316

**本章的重要概念**...............................................................319

习题........................................................................321

**第7章 网络安全．**................................................................324

7.1 网络安全问题概述........................................................324

7.1.1 计算机网络面临的安全性威胁........................................324

7.1.2 安全的计算机网络..................................................326

7.1.3 数据加密模型......................................................327

7.2 两类密码体制............................................................328

7.2.1 对称密钥密码体制..................................................328

7.2.2 公钥密码体制......................................................329

7.3 数字签名................................................................330

7.4 鉴别....................................................................332

7.4.1 报文鉴别..........................................................332

7.4.2 实体鉴别..........................................................335

<!-- ·VIII· -->

7.5 密钥分配.................................................................337

7.5.1 对称密钥的分配.....................................................337

7.5.2 公钥的分配.........................................................339

7.6 互联网使用的安全协议.....................................................340

7.6.1 网络层安全协议.....................................................340

7.6.2 运输层安全协议.....................................................344

7.6.3 应用层安全协议.....................................................347

7.7 系统安全：防火墙与入侵检测．...............................................349

7.7.1 防火墙.............................................................349

7.7.2 入侵检测系统.......................................................351

7.8 一些未来的发展方向.......................................................351

**本章的重要概念.**...............................................................352

习题.........................................................................353

**第8章 互联网上的音频／视频服务**...................................................355

8.1 概述.....................................................................355

8.2 流式存储音频／视频........................................................359

8.2.1 具有元文件的万维网服务器...........................................360

8.2.2 媒体服务器.........................................................360

8.2.3 实时流式协议RTSP.................................................362

8.3 交互式音频／视频..........................................................364

8.3.1 IP电话概述........................................................364

8.3.2 IP电话所需要的几种应用协议.........................................368

8.3.3 实时运输协议RTP..................................................369

8.3.4 实时运输控制协议RTCP．..............................................371

8.3.5 H.323..............................................................372

8.3.6 会话发起协议SIP...................................................373

8.4 改进“尽最大努力交付”的服务.............................................375

8.4.1 使互联网提供服务质量..............................................375

8.4.2 调度和管制机制....................................................377

8.4.3 综合服务IntServ与资源预留协议RSVP................................380

8.4.4 区分服务 DiffServ...................................................383

**本章的重要概念**...............................................................385

**习题**.........................................................................386

**第9章 无线网络和移动网络**.......................................................390

9.1 无线局域网WLAN........................................................390

9.1.1 无线局域网的组成..................................................391

9.1.2 802.11局域网的物理层．...............................................395

9.1.3 802.11局域网的MAC层协议．.........................................397

9.1.4 802.11局域网的MAC帧.............................................403

<!-- ·IX· -->

9.2 无线个人区域网WPAN.....................................................406

9.3 无线城域网WMAN........................................................409

9.4 蜂窝移动通信网...........................................................411

9.4.1 蜂窝无线通信技术简介...............................................411

9.4.2 移动IP．.............................................................414

9.4.3 蜂窝移动通信网中对移动用户的路由选择..............................418

9.4.4 GSM中的切换．......................................................419

9.4.5 无线网络对高层协议的影响..........................................420

9.5 两种不同的无线上网.......................................................421

本章的重要概念...............................................................422

习题.........................................................................423

附录A 部分习题的解答...........................................................426

附录B 英文缩写词...............................................................442

附录C 参考文献与网址...........................................................452

<!-- ·X· -->

# 第1章 概述

本章是全书的概要。在本章的开始，先介绍计算机网络在信息时代的作用。接着对互联网进行了概述，包括互联网基础结构发展的三个阶段，以及今后的发展趋势。然后，讨论了互联网组成的边缘部分和核心部分。在简单介绍了计算机网络在我国的发展以及计算机网络的类别后，讨论了计算机网络的性能指标。最后，论述了整个课程都要用到的重要概念-计算机网络的体系结构。

本章最重要的内容是：

（1）互联网边缘部分和核心部分的作用，其中包含分组交换的概念。

（2）计算机网络的性能指标。

（3）计算机网络分层次的体系结构，包含协议和服务的概念。这部分内容比较抽象。在没有了解具体的计算机网络之前，很难完全掌握这些很抽象的概念。但这些抽象的概念又能够指导后续的学习，因此也必须先从这些概念学起。建议读者在学习到后续章节时，经常再复习一下本章中的基本概念。这对掌握好整个计算机网络的概念是有益的。

## 1.1 计算机网络在信息时代中的作用

我们知道，21世纪的一些重要特征就是数字化、网络化和信息化，它是一个以网络为核心的信息时代。要实现信息化就必须依靠完善的网络，因为网络可以非常迅速地传递信息。因此网络现在已经成为信息社会的命脉和发展知识经济的重要基础。网络对社会生活的很多方面以及对社会经济的发展已经产生了不可估量的影响。

有三大类大家很熟悉的网络，即电信网络、有线电视网络和计算机网络。按照最初的服务分工，电信网络向用户提供电话、电报及传真等服务。有线电视网络向用户传送各种电视节目。计算机网络则使用户能够在计算机之间传送数据文件。这三种网络在信息化过程中都起到十分重要的作用，但其中发展最快的并起到核心作用的则是计算机网络，而这正是本书所要讨论的内容。

随着技术的发展，电信网络和有线电视网络都逐渐融入了现代计算机网络的技术，扩大了原有的服务范围，而计算机网络也能够向用户提供电话通信、视频通信以及传送视频节目的服务。从理论上讲，把上述三种网络融合成一种网络就能够提供所有的上述服务，这就是很早以前就提出来的“三网融合”。然而事实并不如此简单，因为这涉及到各方面的经济利益和行政管辖权的问题。

自从20世纪90年代以后，以Internet为代表的计算机网络得到了飞速的发展，已从最初的仅供美国人使用的免费教育科研网络，逐步发展成为供全球使用的商业网络（有偿使用），成为全球最大的和最重要的计算机网络。可以毫不夸大地说，Internet是人类自印刷术发明以来在存储和交换信息的领域中的最大变革。

Internet的中文译名并不统一。现有的Internet译名有两种：

（1）因特网，这个译名是全国科学技术名词审定委员会推荐的。虽然因特网这个译名较为准确，但却长期未得到推广。本书的前几版都采用因特网这个译名。

<!-- ·1· -->

（2）互联网，这是目前流行最广的、事实上的标准译名。现在我国的各种报刊杂志、政府文件以及电视节目中都毫无例外地使用这个译名。Internet **是由数量极大的各种计算机网**络互连起来的，采用互联网这个译名能够体现出Internet 最主要的特征。本书从第7版开始，改用“互联网”作为Internet的译名。

也有些人愿意直接使用英文名词 Internet，而不使用中文译名。这避免了译名的误解。但编者认为，在中文教科书中，常用的重要名词应当使用中文的。当然，对国际通用的英文缩写词，我们还是要尽量多使用。例如，直接使用更简洁的“TCP”，比使用冗长的中文译名“传输控制协议”要方便得多。这样做也更加便于阅读外文技术资料。

曾人把Internet 译为国际互联网。其实互联网本来就是覆盖全球的，因此“国际”二字显然是多余的。

对于仅在局部范围互连起来的计算机网络，只能称之为互连网，而不是互联网。

有时，我们往往使用更加简洁的方式表示互联网，这就是只用一个“网”字。例如，“上网”就是表示使用某个电子设备连接到互联网，而不是连接到其他的网络上。还有如网民、网吧、网银（网上银行）、网购（网上购物）等。这里的“网”，一般都不是指电信网或有线电视网，而是指当今世界上最大的计算机网络Internet-互联网。

那么，什么是互联网呢？很难用几句话说清楚。但我们可以从两个不同的方面来认识互联网。这就是互联网的应用和互联网的工作原理。

绝大多数人认识互联网都是从接触互联网的应用开始的。现在小孩就会上网玩游戏，看网上视频，或和朋友在微信上聊天。而更多的成年人则经常在互联网上搜索和查阅各种信息。现在人们经常利用互联网的电子邮件相互通信（包括传送各种照片和视频文件），这就使得传统的邮政信函的业务量大大减少。在互联网上购买各种物品，既方便又经济实惠，改变了必须到商店购物的方式。在互联网上购买机票或火车票，可以节省大量排队的时间，极大地方便了旅客。在金融方面，利用互联网进行转账或买卖股票等交易，都可以节省大量时间。需要注意的是，互联网的应用并不是固定不变的，而是不断会有新的应用出现。本书不可能详细地介绍互联网的各种应用，这需要有另一本专门的书。

从应用这个方面认识互联网的门槛较低，因为这不需要懂得很多的互联网工作原理。现在很多小学生都能够非常熟练地使用手机上的各种应用程序（比编者要熟练得多）。但本书是大学的计算机网络教材，要着重讲解计算机网络的工作原理。通过掌握计算机网络的基本工作原理，可以使我们更好地理解互联网是怎样工作的。这就是从另一个角度来认识互联网。

互联网之所以能够向用户提供许多服务，就是因为互联网具有两个重要基本特点，即**连通性和共享。**

所谓连通性（connectivity)，就是互联网使上网用户之间，不管相距多远（例如，相距数千公里），都可以非常便捷、非常经济（在很多情况下甚至是免费的）地交换各种信息（数据，以及各种音频视频），好像这些用户终端都彼此直接连通一样。这与使用传统的电信网络有着很大的区别。我们知道，传统的电信网向用户提供的最重要的服务就是人与人之间的电话通信，因此电信网也具有连通性这个特点。但使用电信网的电话用户，往往要为此向电信网的运营商缴纳相当昂贵的费用，特别是长距离的越洋通信。但应注意，互联网具有虚拟的特点。例如，当你从互联网上收到一封电子邮件时，你可能无法准确知道对方是谁（朋友还是骗子），也无法知道发信人的地点（在附近，还是在地球对面）。

<!-- ·2· -->

所谓共享就是指资源共享。资源共享的含义是多方面的。可以是信息共享、软件共享，也可以是硬件共享。例如，互联网上有许多服务器（就是一种专用的计算机）存储了大量有价值的电子文档（包括音频和视频文件），可供上网的用户很方便地读取或下载（无偿或有偿）。由于网络的存在，这些资源好像就在用户身边一样地方便使用。

现在人们的生活、工作、学习和交往都已离不开互联网。设想一下，某一天我们所在城市的互联网突然瘫痪不能工作了，这会出现什么结果呢？这时，我们将无法购买机票或火车票，因为在售票处无法通过互联网得知目前还有多少余票可供出售；我们也无法到银行存钱或取钱，无法交纳水电费和煤气费等；股市交易都将停顿；在图书馆我们也无法检索所需要的图书和资料。互联网瘫痪后，我们既不能上网查询有关的资料，也无法使用电子邮件和朋友及时交流信息，网上购物也将完全停顿。总之，这样的城市将会是一片混乱。由此还可看出，人们的生活越是依赖于互联网，互联网的可靠性也就越重要。现在互联网已经成为社会最为重要的基础设施。

互联网现在可以向广大用户提供休闲娱乐的服务，如各种音频和视频节目。上网的用户可以利用鼠标随时点击各种在线节目。互联网还可进行一对一或多对多的网上聊天（文字的、声音的或包括视频的交流），使人们的社交方式发生了重大的变化。

现在常常可以看到一种新的提法，即“互联网＋”。它的意思就是“互联网＋各个传统行业”，因此可以利用信息通信技术和互联网平台来创造新的发展生态。实际上“互联网＋”代表一种新的经济形态，其特点就是把互联网的创新成果深度融合于经济社会各领域之中，这就大大地提升了实体经济的创新力和生产力。我们也必须看到互联网的各种应用对各行各业的巨大冲击。例如，电子邮件迫使传统的电报业务退出市场。网络电话的普及使得传统的长途电话（尤其是国际长途电话）的通信量急剧下降。对日用商品快捷方便的网购造成了不少实体商店的停业。原来必须排长队购买火车票的网点已被非常方便的网购所替代。网约车的问世对出租车行业产生了的巨大冲击。这些例子说明了互联网应用已对整个社会的各领域产生了很大的影响。

互联网也给人们带来了一些负面影响。有人肆意利用互联网传播计算机病毒，破坏互联网上数据的正常传送和交换；有的犯罪分子甚至利用互联网窃取国家机密和盗窃银行或储户的钱财；网上欺诈或在网上肆意散布谣言、不良信息和播放不健康的视频节目也时有发生；有的青少年弃学而沉溺于网吧的网络游戏中；等等。

虽然如此，互联网的负面影响毕竟还是次要的。随着对互联网的管理的加强，互联网给社会带来的正面积极的作用已成为互联网的主流。

由于互联网已经成为世界上最大的计算机网络，因此下面我们先进行互联网概述，包括互联网的主要构件，这样就可以对计算机网络有一个最初步的了解。

<!-- ·3· -->

## 1.2 互联网概述

### 1.2.1 网络的网络

起源于美国的互联网①现已发展成为世界上最大的覆盖全球的计算机网络。

我们先给出关于网络、互连网、互联网（因特网）的一些最基本的概念。

请读者注意：在本书中，为了方便，下面凡是“网络”就是“计算机网络”的简称，而不是表示电信网或有线电视网。

计算机网络（简称为网络）由若干结点（node)®和连接这些结点的链路（link）组成。网络中的结点可以是计算机、集线器、交换机或路由器等（在后续的两章我们将会介绍集线器、交换机和路由器等设备的作用）。图1-1(a）给出了一个具有四个结点和三条链路的网络。我们看到，有三台计算机通过三条链路连接到一个集线器上，构成了一个简单的计算机网络（简称为网络）。在很多情况下，我们可以用一朵云表示一个网络。这样做的好处是可以不去关心网络中的相当复杂的细节问题，因而可以集中精力研究涉及到与网络互连有关的一些问题。

<!-- 互连网（网络的网络） 网络 网络 网络 网络 网络 -->
![](https://web-api.textin.com/ocr_image/external/fd54cc1f8edc71e5.jpg)

<!-- 图例 计算机网络（网络） 计算机 结点 集线器 链路 路由器 网络 -->
![](https://web-api.textin.com/ocr_image/external/cd366720c5d86778.jpg)

(a) (b)

图1-1 简单的网络（a）和由网络构成的互连网（b）

网络之间还可以通过路由器互连起来，这就构成了一个覆盖范围更大的计算机网络。这样的网络称为互连网（internetwork或internet)，如图1-1(b）所示。因此互连网是“网络的网络”（network of networks）。

请读者注意，当我们使用一朵云来表示网络时，可能会有两种不同的情况。一种情况如图1-1所示，用云表示的网络已经包含了和网络相连的计算机。但有时为了讨论问题的方便（例如，要讨论几个计算机之间如何进行通信），也可以把有关的计算机画在云的外面，

①注：1994年全国自然科学名词审定委员会公布的名词中，interconnection是“互连”，interconnection network是“互连网络”，internetworking 是“网际互连”［MINGCI94］。但1997年8月全国科学技术名词审定委员会在其推荐名（一）中，将internet, internetwork, interconnection network 的译名均推荐为“互联网”，而在注释中说“又称互连网”，即“互联网”与“互连网”这两个名词均可使用，但请注意，“联”和“连”并不是同义字。术语“互连”一定不能用“互联”代替。“连接”也一定不能用“联接”代替。

②注：根据［MINGCI94］第112页，名词node的标准译名是：节点08.078，结点12.023。再查一下12.023这一节是计算机网络，因此，在计算机网络领域，node 显然应当译为结点，而不是节点。但不知由于何种原因，在网络领域中，很多人宁愿使用不太准确的“节点”，也不愿使用标准译名“结点”。

<!-- ·4· -->

<!-- 主机 互连网 -->
![](https://web-api.textin.com/ocr_image/external/e685774c92bcbabd.jpg)

图1-2 互连网与所连接的主机

如图1-2所示。习惯上，与网络相连的计算机常称为主机（host）。这样，用云表示的互连网里面就只剩下许多路由器和连接这些路由器的链路了。

这样，我们初步建立了下面的基本概念：

**网络把许多计算机连接在一起，而互连网则把许多网络通过路由器连接在一起。与网络相连的计算机常称为主机。**

还有一点也必须注意，就是网络互连并不是把

计算机仅仅简单地在物理上连接起来，因为这样做并不能达到计算机之间能够相互交换信息的目的。我们还必须在计算机上安装许多使计算机能够交换信息的软件才行。因此当我们谈到网络互连时，就隐含地表示在这些计算机上已经安装了适当的软件，因而在计算机之间可以通过网络交换信息。

现在使用智能手机上网已非常普遍。由于智能手机中有中央处理机CPU，因此也可以把连接在计算机网络上的智能手机称为主机。实际上，智能手机已经不是个单一功能的设备，它既是电话机，但也是计算机、照相机、摄像机、电视机、导航仪等综合多种功能于一体的智能机器。

### 1.2.2 互联网基础结构发展的三个阶段

互联网的基础结构大体上经历了三个阶段的演进。但这三个阶段在时间划分上并非截然分开而是有部分重叠的，这是因为网络的演进是逐渐的，而并非在某个日期发生了突变。

第一阶段是从单个网络 ARPANET 向互连网发展的过程。1969年美国国防部创建的第一个分组交换网 ARPANET 最初只是一个单个的分组交换网（并不是一个互连的网络）。所有要连接在ARPANET上的主机都直接与就近的结点交换机相连。但到了20世纪70年代中期，人们已认识到不可能仅使用一个单独的网络来满足所有的通信问题。于是ARPA开始研究多种网络（如分组无线电网络）互连的技术，这就导致了互连网络的出现。这就成为现今互联网（Internet）的雏形。1983年TCP/IP协议成为ARPANET上的标准协议，使得所有使用TCP/IP协议的计算机都能利用互连网相互通信，因而人们就把1983年作为互联网的诞生时间。1990年ARPANET正式宣布关闭，因为它的实验任务已经完成。

请读者注意以下两个意思相差很大的名词internet 和 Internet [RFC 1208]：

**以小写字母i开始的internet（互连网）是一个通用名词，它泛指由多个计算机网络互**连而成的计算机网络。在这些网络之间的通信协议（即通信规则）可以任意选择，不一定非要使用TCP/IP协议。

**以大写字母I开始的Internet（互联网，或因特网）则是一个专用名词，它指当前全球最大的、开放的、由众多网络相互连接而成的特定互连网，它采用TCP/IP协议族作为通信的规则，且其前身是美国的ARPANET。**

可见，任意把几个计算机网络互连起来（不管采用什么协议），并能够相互通信，这样构成的是一个互连网（internet)，而不是互联网（Internet）。

第二阶段的特点是建成了三级结构的互联网。从1985年起，美国国家科学基金会NSF （National Science Foundation）就围绕六个大型计算机中心建设计算机网络，即国家科学基金网NSFNET。它是一个三级计算机网络，分为主干网、地区网和校园网（或企业网）。这种三级计算机网络覆盖了全美国主要的大学和研究所，并且成为互联网中的主要组成部分。1991年，NSF和美国的其他政府机构开始认识到，互联网必将扩大其使用范围，不应仅限于大学和研究机构。世界上的许多公司纷纷接入到互联网，网络上的通信量急剧增大，使互联网的容量已满足不了需要。于是美国政府决定将互联网的主干网转交给私人公司来经营，并开始对接入互联网的单位收费。1992年互联网上的主机超过100万台。1993年互联网主干网的速率提高到45Mbit/s(T3速率）。

<!-- ·5· -->

第三阶段的特点是逐渐形成了多层次ISP结构的互联网。从1993年开始，由美国政府资助的NSFNET 逐渐被若干个商用的互联网主干网替代，而政府机构不再负责互联网的运营。这样就出现了一个新的名词：互联网服务提供者ISP(Internet Service Provider）。在许多情况下，ISP就是一个进行商业活动的公司，因此ISP又常译为互联网服务提供商。例如，中国电信、中国联通和中国移动等公司都是我国最有名的ISP。

ISP可以从互联网管理机构申请到很多IP地址（互联网上的主机都必须有IP地址才能上网，这一概念我们将在第4章的4.2.2节详细讨论），同时拥有通信线路（大ISP自己建造通信线路，小ISP则向电信公司租用通信线路）以及路由器等连网设备，因此任何机构和个人只要向某个ISP交纳规定的费用，就可从该ISP获取所需IP地址的使用权，并可通过该ISP接入到互联网。所谓“上网”就是指“（通过某ISP获得的IP地址）接入到互联网”。IP 地址的管理机构不会把一个单个的IP地址分配给单个用户（不“零售”IP地址），而是把一批IP地址有偿租赁给经审查合格的ISP（只“批发”IP地址）。由此可见，现在的互联网已不是某个单个组织所拥有而是全世界无数大大小小的ISP所共同拥有的，这就是互联网也称为“网络的网络”的原因。

根据提供服务的覆盖面积大小以及所拥有的IP地址数目的不同，ISP也分为不同层次的ISP：主干ISP、地区ISP和本地ISP。

主干ISP由几个专门的公司创建和维持，服务面积最大（一般都能够覆盖国家范围），并且还拥有高速主干网（例如10 Gbit/s或更高）。有一些地区ISP网络也可直接与主干ISP 相连。

地区ISP是一些较小的ISP。这些地区ISP通过一个或多个主干ISP连接起来。它们位于等级中的第二层，数据率也低一些。

本地ISP 给用户提供直接的服务（这些用户有时也称为端用户，强调是末端的用户）。本地ISP 可以连接到地区ISP，也可直接连接到主干ISP。绝大多数的用户都是连接到本地ISP的。本地ISP可以是一个仅仅提供互联网服务的公司，也可以是一个拥有网络并向自己的雇员提供服务的企业，或者是一个运行自己的网络的非营利机构（如学院或大学）。本地ISP可以与地区ISP或主干ISP连接。

图1-3是具有三层ISP结构的互联网的概念示意图，但这种示意图并不表示各ISP的地理位置关系。图中给出了主机A经过许多不同层次的ISP与主机B通信的示意图。

从原理上讲，只要每一个本地ISP都安装了路由器连接到某个地区ISP，而每一个地区ISP也有路由器连接到主干ISP，那么在这些相互连接的ISP的共同合作下，就可以完成互联网中的所有的分组转发任务。但随着互联网上数据流量的急剧增长，人们开始研究如何更快地转发分组，以及如何更加有效地利用网络资源。于是，互联网交换点 IXP(Internet eXchange Point）就应运而生了。

<!-- ·6· -->

<!-- 主干ISP 主干 ISP 主干ISP 地区ISP 地区ISP 地区ISP IXP 地区ISP 本地ISP 本地ISP 本地ISP 本地ISP 本地ISP 本地ISP 本地ISP 大公司 校园网 校园网 公司 A B 主机A→本地ISP→地区ISP→主干ISP→地区ISP→本地ISP→主机B -->

图1-3 基于ISP的多层结构的互联网的概念示意图

互联网交换点 IXP的主要作用就是允许两个网络直接相连并交换分组，而不需要再通过第三个网络来转发分组。例如，在图1-3中右方的两个地区ISP通过一个IXP连接起来了。这样，主机A和主机B交换分组时，就不必再经过最上层的主干ISP，而是直接在两个地区ISP之间用高速链路对等地交换分组。这样就使互联网上的数据流量分布更加合理，同时也减少了分组转发的迟延时间，降低了分组转发的费用。现在许多 IXP在进行对等交换分组时，都互相不收费。但本地ISP或地区ISP通过IXP向高层的IXP转发分组时，则需要交纳一定的费用。IXP的结构非常复杂。典型的IXP由一个或多个网络交换机组成，许多ISP 再连接到这些网络交换机的相关端口上。IXP常采用工作在数据链路层的网络交换机，这些网络交换机都用局域网互连起来。

据统计，到2016年3月，全球已经有226个IXP，分布在172个国家和地区。图1-4是目前IXP在全球的分布图。可以看出，互联网的发展在全世界还是很不平衡的［W-IXP］。现在，世界上最大的IXP于1995年建造在德国的法兰克福，名字是DE-CIX[W-DECIX]，其峰值吞吐量在2015年9月就已达到4.859Tbit/s。这个IXP已成为互联网在欧洲的枢纽。

<!-- A -->
![](https://web-api.textin.com/ocr_image/external/94ab2453399b8d3d.jpg)

图1-4 互联网交换点IXP在全球的分布图（2016年）

互联网已经成为世界上规模最大和增长速率最快的计算机网络，没有人能够准确说出互联网究竟有多大。互联网的迅猛发展始于20世纪90年代。由欧洲原子核研究组织CERN 开发的万维网WWW(World Wide Web）被广泛使用在互联网上，大大方便了广大非网络专业人员对网络的使用，成为互联网的这种指数级增长的主要驱动力。万维网的站点数目也急剧增长。互联网上准确的通信量是很难估计的，但有文献介绍，互联网上的数据通信量每月约增加10％。图1-5是从1993年至2016年互联网用户数的增长情况。这里的用户是指在家中上网的人，而数据的统计时间是在每年的7月1日（正好是每年的中间），其中2015年和2016年的数据是估算的［W-INTER］。可以看出，在2005年互联网的用户数超过了10亿，在2010年超过了20亿，而在2014年已接近30亿。

<!-- ·7· -->

<!-- 互联网的用户数 4,000,000,000 3,000,000,000 2,000,000,000 1,000,000,000 0 -->
![](https://web-api.textin.com/ocr_image/external/aa1e107ce746d583.jpg)

图1-5 1993年至2016年互联网用户的增长情况

表1-1是统计到2005年互联网上的网络数、主机数、用户数和管理机构数的简单概括[COME06]。

**表1-1 互联网的发展概况**

<table border="1" ><tr>
<td colspan="1" rowspan="1">年份</td>
<td colspan="1" rowspan="1">网络数</td>
<td colspan="1" rowspan="1">主机数</td>
<td colspan="1" rowspan="1">用户数</td>
<td colspan="1" rowspan="1">管理机构数</td>
</tr><tr>
<td colspan="1" rowspan="1">1980 </td>
<td colspan="1" rowspan="1">10 </td>
<td colspan="1" rowspan="1">102 </td>
<td colspan="1" rowspan="1">102 </td>
<td colspan="1" rowspan="1">10°</td>
</tr><tr>
<td colspan="1" rowspan="1">1990 </td>
<td colspan="1" rowspan="1">103 </td>
<td colspan="1" rowspan="1">105 </td>
<td colspan="1" rowspan="1">106 </td>
<td colspan="1" rowspan="1">10 </td>
</tr><tr>
<td colspan="1" rowspan="1">2000 </td>
<td colspan="1" rowspan="1">105 </td>
<td colspan="1" rowspan="1">107 </td>
<td colspan="1" rowspan="1">108 </td>
<td colspan="1" rowspan="1">102 </td>
</tr><tr>
<td colspan="1" rowspan="1">2005 </td>
<td colspan="1" rowspan="1">106 </td>
<td colspan="1" rowspan="1">108 </td>
<td colspan="1" rowspan="1">10°</td>
<td colspan="1" rowspan="1">103 </td>
</tr></table>

### 1.2.3 互联网的标准化工作

互联网的标准化工作对互联网的发展起到了非常重要的作用。我们知道，标准化工作的好坏对一种技术的发展有着很大的影响。缺乏国际标准将会使技术的发展处于比较混乱的状态，而盲目自由竞争的结果很可能形成多种技术体制并存且互不兼容的状态（如过去形成的彩电三大制式），给用户带来较大的不方便。但国际标准的制定又是一个非常复杂的问题，这里既有很多技术问题，也有很多属于非技术问题，如不同厂商之间经济利益的争夺问题等。标准制定的时机也很重要。标准制定得过早，由于技术还没有发展到成熟水平，会使技术比较陈旧的标准限制了产品的技术水平。其结果是以后不得不再次修订标准，造成浪费。反之，若标准制定得太迟，也会使技术的发展无章可循，造成产品的互不兼容，也不利于产品的推广。互联网在制定其标准上很有特色。其中的一个很大的特点是面向公众。互联网所有的RFC 文档都可从互联网上免费下载，而且任何人都可以用电子邮件随时发表对某个文档的意见或建议。这种开放方式对互联网的迅速发展影响很大。

<!-- ·8· -->

1992年由于互联网不再归美国政府管辖，因此成立了一个国际性组织叫做互联网协会（Internet Society，简称为ISOC)[W-ISOC]，以便对互联网进行全面管理以及在世界范围内促进其发展和使用。ISOC 下面有一个技术组织叫做互联网体系结构委员会 **IAB** (Internet Architecture Board）①，负责管理互联网有关协议的开发。IAB下面又设有两个工程部：

### （1）互联网工程部IETF(Internet Engineering Task Force）

IETF是由许多工作组WG(Working Group）组成的论坛（forum)，具体工作由互联网工程指导小组 IESG (Internet Engineering Steering Group）管理。这些工作组划分为若干个领域（area)，每个领域集中研究某一特定的短期和中期的工程问题，主要是针对协议的开发和标准化。

### （2）互联网研究部IRTF(Internet Research Task Force）

IRTF是由一些研究组RG(Research Group）组成的论坛，具体工作由互联网研究指导小组IRSG(Internet Research Steering Group）管理。IRTF的任务是研究一些需要长期考虑的问题，包括互联网的一些协议、应用、体系结构等。

所有的互联网标准都是以RFC的形式在互联网上发表的。RFC(Request For Comments）的意思就是“请求评论”。所有的RFC文档都可从互联网上免费下载［W-RFC］。但应注意，并非所有的RFC 文档都是互联网标准。互联网标准的制定往往要花费漫长的时间，并且是一件非常慎重的工作。只有很少部分的RFC文档最后能变成互联网标准。RFC文档按发表时间的先后编上序号（即RFC xxxx，这里的xxxx是阿拉伯数字）。一个RFC文档更新后就使用一个新的编号，并在文档中指出原来老编号的RFC文档已成为陈旧的或被更新，但陈旧的RFC文档并不会被删除，而是永远保留着，供用户参考。现在RFC文档的数量增长得很快，到2016年7月RFC的编号就已经高达7694了。

制定互联网的正式标准要经过以下三个阶段：

（1）互联网草案（Internet Draft)-互联网草案的有效期只有六个月。在这个阶段还不能算是RFC文档。

（2）建议标准（Proposed Standard)-从这个阶段开始就成为RFC文档。

（3）互联网标准（Internet Standard)-达到正式标准后，每个标准就分配到一个编号STD xx。一个标准可以和多个RFC文档关联。截止到2016年7月，互联网标准的最大编号是STD 83。可见要成为互联网标准还是很不容易的。

要成为互联网标准，原先必须经过三个阶段，即建议标准→草案标准→互联网标准。由于“草案标准”容易和“互联网草案”混淆，从2011年10月起取消了“草案标准”这个阶段［RFC 6410］。这样，现在制定互联网标准的过程变为两个阶段，即建议标准→互联网标准。在新的规定以前就已发布的草案标准，将按照以下原则进行处理：若已达到互联网标准，就升级为互联网标准；对目前尚不够互联网标准条件的，则仍称为发布时的名称“草案标准”。我们可以很方便地在网上查到有哪些RFC文档是互联网标准或建议标准［W-RFCS]。

除了建议标准和互联网标准这两种RFC文档外，还有三种RFC文档，即历史的、实验的和提供信息的RFC文档。历史的RFC文档或者是被后来的规约所取代，或者是从未到达

①注：最初的IAB中的A曾经代表Activities（活动）。在一些旧的RFC中使用的是这个旧名词。

<!-- ·9· -->

必要的成熟等级因而未变成为互联网标准。实验的RFC文档表示其工作属于正在实验的情况，而不能够在任何实用的互联网服务中进行实现。提供信息的RFC文档包括与互联网有关的一般的、历史的或指导的信息。

RFC文档的数量很大，为便于查找，应利用其索引文档“RFC INDEX”［W-RFCX］。这个文档给出了已经发布的所有的RFC文档的标题、发表时间、类别，以及这个RFC文档更新了哪个老的RFC文档，或者被在它以后发表的哪个RFC文档更新了。

## 1.3 互联网的组成

互联网的拓扑结构虽然非常复杂，并且在地理上覆盖了全球，但从其工作方式上看，可以划分为以下两大块：

**（1）边缘部分** 由所有连接在互联网上的主机组成。这部分是用户直接使用的，用来进行通信（传送数据、音频或视频）和资源共享。

**（2）核心部分** 由大量网络和连接这些网络的路由器组成。这部分是为边缘部分提供服务的（提供连通性和交换）。

图1-6给出了这两部分的示意图。下面分别讨论这两部分的作用和工作方式。

<!-- 互联网的边缘部分 主机 路由器 网络 互联网的核心部分 -->
![](https://web-api.textin.com/ocr_image/external/e7ce49baa732ec4f.jpg)

图1-6 互联网的边缘部分与核心部分

### 1.3.1 互联网的边缘部分

处在互联网边缘的部分就是连接在互联网上的所有的主机。这些主机又称为端系统（end system)，“端”就是“末端”的意思（即互联网的末端）。端系统在功能上可能有很大的差别，小的端系统可以是一台普通个人电脑（包括笔记本电脑或平板电脑）和具有上网功能的智能手机，甚至是一个很小的网络摄像头（可监视当地的天气或交通情况，并在互联网上实时发布），而大的端系统则可以是一台非常昂贵的大型计算机。端系统的拥有者可以是个人，也可以是单位（如学校、企业、政府机关等），当然也可以是某个ISP（即ISP 不仅仅是向端系统提供服务，它也可以拥有一些端系统）。边缘部分利用核心部分所提供的服务，使众多主机之间能够互相通信并交换或共享信息。

我们先要明确下面的概念。我们说：“主机A和主机B进行通信”，实际上是指：“运行在主机A上的某个程序和运行在主机B上的另一个程序进行通信”。由于“进程”就是“运行着的程序”，因此这也就是指：**“主机A的某个进程和主机B上的另一个进程进行通信”。**这种比较严密的说法通常可以简称为“计算机之间通信”。

<!-- ·10· -->

在网络边缘的端系统之间的通信方式通常可划分为两大类：客户-服务器方式（C/S方式）和对等方式（P2P方式）①。下面分别对这两种方式进行介绍。

### 1．客户-服务器方式

这种方式在互联网上是最常用的，也是传统的方式。我们在上网发送电子邮件或在网站上查找资料时，都是使用客户-服务器方式（有时写为客户／服务器方式）。

当我们打电话时，电话机的振铃声使被叫用户知道现在有一个电话呼叫。计算机通信的对象是应用层中的应用进程，显然不能用响铃的办法来通知所要找的对方的应用进程。然而采用客户-服务器方式可以使两个应用进程能够进行通信。

客户（client）和服务器（server）都是指通信中所涉及的两个应用进程。客户-服务器方式所描述的是进程之间服务和被服务的关系。在图1-7中，主机A运行客户程序而主机B运行服务器程序。在这种情况下，A是客户而B是服务器。客户A向服务器B发出服务请求，而服务器B向客户A提供服务。这里最主要的特征就是：

**客户是服务请求方，服务器是服务提供方。**

服务请求方和服务提供方都要使用网络核心部分所提供的服务。

<!-- 运行客户程序 网络边缘 A ①请求服务 B 运行服务器程序 客户 得到服务 网络核心 服务器 -->
![](https://web-api.textin.com/ocr_image/external/e6b9062ada8f551c.jpg)

图1-7 客户-服务器工作方式

在实际应用中，客户程序和服务器程序通常还具有以下一些主要特点。

### 客户程序：

（1）被用户调用后运行，在通信时主动向远地服务器发起通信（请求服务）。因此，客户程序必须知道服务器程序的地址。

（2）不需要特殊的硬件和很复杂的操作系统。

### 服务器程序：

（1）是一种专门用来提供某种服务的程序，可同时处理多个远地或本地客户的请求。

（2）系统启动后即自动调用并一直不断地运行着，被动地等待并接受来自各地的客户的

①注：C/S 方式表示 Client/Server 方式，P2P方式表示 Peer-to-Peer方式。有时还可看到另外一种叫做浏览器-服务器方式，即B/S方式（Browser/Server方式），但这仍然是C/S方式的一种特例。

<!-- ·11· -->

通信请求。因此，服务器程序不需要知道客户程序的地址。

（3）一般需要有强大的硬件和高级的操作系统支持。

客户与服务器的通信关系建立后，通信可以是双向的，客户和服务器都可发送和接收数据。

**顺便要说一下，上面所说的客户和服务器本来都指的是计算机进程（软件）。使用计算**机的人是计算机的“用户”（user）而不是“客户”（client）。但在许多国外文献中，经常也把运行客户程序的机器称为client（在这种情况下也可把client 译为“客户机”），把运行服务器程序的机器称为server。因此我们应当根据上下文来判断 client 或 server 是指软件还是硬件。在本书中，在表示机器时，我们也使用“客户端”（或“客户机”）或“服务器端”（或服务器）来表示“运行客户程序的机器”或“运行服务器程序的机器”。

## 2．对等连接方式

对等连接（peer-to-peer，简写为P2P。这里使用数字2是因为英文的2是two，其读音与to同，因此英文的to常缩写为数字2）是指两台主机在通信时并不区分哪一个是服务请求方哪一个是服务提供方。只要两台主机都运行了对等连接软件（P2P软件），它们就可以进行平等的、对等连接通信。这时，双方都可以下载对方已经存储在硬盘中的共享文档。因此这种工作方式也称为P2P方式。在图1-8中，主机C,D,E和F都运行了P2P软件，因此这几台主机都可进行对等通信（如C和D,E和F，以及C和F）。实际上，对等连接方式从本质上看仍然是使用客户-服务器方式，只是对等连接中的每一台主机既是客户又同时是服务器。例如主机C，当C请求D的服务时，C是客户，D是服务器。但如果C又同时向F提供服务，那么C又同时起着服务器的作用。

<!-- 运行P2P程序． E 网络边缘 C 运行P2P程序 网络核心 F 运行P2P程序 D 运行P2P程序 -->
![](https://web-api.textin.com/ocr_image/external/9c2df3c35a708809.jpg)

图1-8 对等连接工作方式（P2P方式）

对等连接工作方式可支持大量对等用户（如上百万个）同时工作。关于这种工作方式我们将在后面第6章的6.9节进一步讨论。

### 1.3.2 互联网的核心部分

网络核心部分是互联网中最复杂的部分，因为网络中的核心部分要向网络边缘中的大量主机提供连通性，使边缘部分中的任何一台主机都能够向其他主机通信。

在网络核心部分起特殊作用的是路由器（router)，它是一种专用计算机（但不叫做主机）。路由器是实现分组交换（packet switching）的关键构件，其任务是转发收到的分组，这是网络核心部分最重要的功能。为了弄清分组交换，下面先介绍电路交换的基本概念。

<!-- ·12· -->

## 1．电路交换的主要特点

在电话问世后不久，人们就发现，要让所有的电话机都两两相连接是不现实的。图1-9(a）表示两部电话只需要用一对电线就能够互相连接起来。但若有5部电话要两两相连，则需要10对电线，见图1-9(b）所示。显然，若N部电话要两两相连，就需要N(N-1)/2对电线。当电话机的数量很大时，这种连接方法需要的电线数量就太大了（与电话机的数量的平方成正比）。于是人们认识到，要使得每一部电话能够很方便地和另一部电话进行通信，就应当使用电话交换机将这些电话连接起来，如图1-9(c）所示。每一部电话都连接到交换机上，而交换机使用交换的方法，让电话用户彼此之间可以很方便地通信。电话发明后的一百多年来，电话交换机虽然经过多次更新换代，但交换的方式一直都是电路交换（circuit switching）。


![](https://web-api.textin.com/ocr_image/external/e0e7f3c63970b76d.jpg)

（a）两部电话直接相连

<!-- m -->
![](https://web-api.textin.com/ocr_image/external/2856f6e6dbc81981.jpg)

（b)5部电话两两直接相连

<!-- 交换机 -->
![](https://web-api.textin.com/ocr_image/external/5d545360d70e29b1.jpg)

（c）用交换机连接许多部电话

图1-9 电话机的不同连接方法

当电话机的数量增多时，就要使用很多彼此连接起来的交换机来完成全网的交换任务。用这样的方法，就构成了覆盖全世界的电信网。

从通信资源的分配角度来看，交换（switching）就是按照某种方式动态地分配传输线路的资源。在使用电路交换通话之前，必须先拨号请求建立连接。当被叫用户听到交换机送来的振铃音并摘机后，从主叫端到被叫端就建立了一条连接，也就是一条专用的物理通路。这条连接保证了双方通话时所需的通信资源，而这些资源在双方通信时不会被其他用户占用。此后主叫和被叫双方就能互相通电话。通话完毕挂机后，交换机释放刚才使用的这条专用的物理通路（即把刚才占用的所有通信资源归还给电信网）。这种必须经过“建立连接（占用通信资源）→通话（一直占用通信资源）→释放连接（归还通信资源）”三个步骤的交换方式称为电路交换①。如果用户在拨号呼叫时电信网的资源已不足以支持这次的呼叫，则主叫用户会听到忙音，表示电信网不接受用户的呼叫，用户必须挂机，等待一段时间后再重新拨号。

图1-10为电路交换的示意图。为简单起见，图中没有区分市话交换机和长途电话交换机。应当注意的是，用户线是电话用户到所连接的市话交换机的连接线路，是用户独占的传送模拟信号的专用线路，而交换机之间拥有大量话路的中继线（这些传输线路早已都数字化了）则是许多用户共享的，正在通话的用户只占用了中继线里面的一个话路。电路交换的一**个重要特点就是在通话的全部时间内，通话的两个用户始终占用端到端的通信资源。**

①注：电路交换最初指的是连接电话机的双绞线对在交换机上进行的交换（交换机有人工的、步进的和程控的，等等）。后来随着技术的进步，采用了多路复用技术，出现了频分多路、时分多路、码分多路等，这时电路交换的概念就扩展到在双绞线、铜缆、光纤、无线媒体中多路信号中的某一路（某个频率、某个时隙、某个码序等）和另一路的交换。

<!-- ·13· -->

<!-- 电信网 A 交换机 交换机 交换机 交换机 B www n n ww C D E F 用户线 用户线 中继线 -->
![](https://web-api.textin.com/ocr_image/external/db9ea4d8f72893c0.jpg)

图1-10 电路交换的用户始终占用端到端的通信资源

当使用电路交换来传送计算机数据时，其线路的传输效率往往很低。这是因为计算机数据是突发式地出现在传输线路上的，因此线路上真正用来传送数据的时间往往不到10％甚至1％。已被用户占用的通信线路资源在绝大部分时间里都是空闲的。例如，当用户阅读终端屏幕上的信息或用键盘输入和编辑一份文件时，或计算机正在进行处理而结果尚未返回时，宝贵的通信线路资源并未被利用而是白白被浪费了。

## 2．分组交换的主要特点

分组交换则采用存储转发技术①。图1-11表示把一个报文划分为几个分组后再进行传送。通常我们把要发送的整块数据称为一个报文（message）。在发送报文之前，先把较长的报文划分成为一个个更小的等长数据段，例如，每个数据段为1024 bit②。在每一个数据段前面，加上一些由必要的控制信息组成的首部（header）后，就构成了一个分组（packet）。分组又称为“包”，而分组的首部也可称为“包头”。分组是在互联网中传送的数据单元。分组中的“首部”是非常重要的，正是由于分组的首部包含了诸如目的地址和源地址等重要控制信息，每一个分组才能在互联网中独立地选择传输路径，并被正确地交付到分组传输的终点。

<!-- 报文 101001110101100 001010011101000 发送在前 首部 数据 首部 数据 首部 数据 分组 分组 分组 -->
![](https://web-api.textin.com/ocr_image/external/6358f0651c7dc7c2.jpg)

图1-11 以分组为基本单位在网络中传送

图1-12(a）强调互联网的核心部分是由许多网络和把它们互连起来的路由器组成的，而

①注：存储转发的概念最初是在1964年8月由巴兰（Baran）在美国兰德（Rand）公司的“论分布式通信”的研究报告中提出的。在1962\~1965年，美国国防部远景研究规划局DARPA 和英国的国家物理实验室 NPL都在对新型的计算机通信网进行研究。1966年6月，NPL的戴维斯（Davies）首次提出“分组”（packet）这一名词［DAVI86］。1969年12月，美国的分组交换网ARPANET（当时仅4个结点）投入运行。从此，计算机网络的发展就进入了一个崭新的纪元。1973年英国国家物理实验室NPL也开通了分组交换试验网。现在大家都公认ARPANET为分组交换网之父。除英美两国外，法国也在1973年开通其分组交换网CYCLADES。

②注：在本书中，bit表示“比特”。在计算机领域中，bit常译为“位”。在许多情况下，“比特”和“位”可以通用。在使用“位”作为单位时，请根据上下文特别注意是二进制的“位”还是十进制的“位”。请注意，bit在表示信息量（比特）或信息传输速率（比特／秒）时不能译为“位”。

<!-- ·14· -->

主机处在互联网的边缘部分。在互联网核心部分的路由器之间一般都用高速链路相连接，而在网络边缘的主机接入到核心部分则通常以相对较低速率的链路相连接。

位于网络边缘的主机和位于网络核心部分的路由器都是计算机，但它们的作用却很**不一样。主机是为用户进行信息处理的，并且可以和其他主机通过网络交换信息。路由器则**是用来转发分组的，即进行分组交换的。路由器收到一个分组，先暂时存储一下，检查其首部，查找转发表，按照首部中的目的地址，找到合适的接口转发出去，把分组交给下一个路由器。这样一步一步地（有时会经过几十个不同的路由器）以存储转发的方式，把分组交付最终的目的主机。各路由器之间必须经常交换彼此掌握的路由信息，以便创建和动态维护路由器中的转发表，使得转发表能够在整个网络拓扑发生变化时及时更新。

<!-- 网络核心部分 H2 H4 路由器 H6 网络 主机 H1 H5 H3 -->
![](https://web-api.textin.com/ocr_image/external/b5951a0615c089ee.jpg)

(a)

（a）核心部分的路由器把网络互连起来

<!-- 网络核心部分 H2 H4 路由器 D B H6 E 主机 A H1 C H5 发送的 分组 H3 (b) -->
![](https://web-api.textin.com/ocr_image/external/e2eca265d67d0f09.jpg)

（b）核心部分中的网络可用一条链路表示

图1-12 分组交换的示意图

当我们讨论互联网的核心部分中的路由器转发分组的过程时，往往把单个的网络简化成一条链路，而路由器成为核心部分的结点，如图1-12(b）所示。这种简化图看起来可以更加突出重点，因为在转发分组时最重要的就是要知道路由器之间是怎样连接起来的。

现在假定图1-12(b）中的主机H1向主机H5发送数据。主机H1先将分组逐个地发往与它直接相连的路由器A。此时，除链路H1-A外，其他通信链路并不被目前通信的双方所占用。需要注意的是，即使是链路H1-A，也只是当分组正在此链路上传送时才被占用。在各分组传送之间的空闲时间，链路H1-A仍可为其他主机发送的分组使用。

路由器A把主机H1发来的分组放入缓存。假定从路由器A的转发表中查出应把该分组转发到链路A-C。于是分组就传送到路由器C。当分组正在链路A-C传送时，该分组并不占用网络其他部分的资源。

路由器C继续按上述方式查找转发表，假定查出应转发到路由器E。当分组到达路由器E后，路由器E就最后把分组直接交给主机H5。

假定在某一个分组的传送过程中，链路A-C的通信量太大，那么路由器A可以把分组沿另一个路由传送，即先转发到路由器B，再转发到路由器E，最后把分组送到主机 H5。在网络中可同时有多台主机进行通信，如主机H2也可以经过路由器B和E与主机H6通信。

这里要注意，路由器暂时存储的是一个个短分组，而不是整个的长报文。短分组是暂存在路由器的存储器（即内存）中而不是存储在磁盘中的。这就保证了较高的交换速率。

在图中只画了一对主机H1和H5在进行通信。实际上，互联网可以容许非常多的主机同

<!-- ·15· -->

时进行通信，而一台主机中的多个进程（即正在运行中的多个程序）也可以各自和不同主机中的不同进程进行通信。

应当注意，分组交换在传送数据之前不必先占用一条端到端的链路的通信资源。分组在哪段链路上传送才占用这段链路的通信资源。分组到达一个路由器后，先暂时存储下来，查找转发表，然后从一条合适的链路转发出去。分组在传输时就这样一段一段地断续占用通信资源，而且还省去了建立连接和释放连接的开销，因而数据的传输效率更高。

互联网采取了专门的措施，保证了数据的传送具有非常高的可靠性（在第5章5.4节介绍运输层协议时要着重讨论这个问题）。当网络中的某些结点或链路突然出现故障时，在各路由器中运行的路由选择协议（protocol）能够自动找到转发分组最合适的路径。这些将在第4章4.5节中详细讨论。

从以上所述可知，采用存储转发的分组交换，实质上是采用了在数据通信的过程中断续（或动态）分配传输带宽的策略（关于带宽的进一步讨论见后面的1.6.1节）。这对传送突发式的计算机数据非常合适，使得通信线路的利用率大大提高了。

为了提高分组交换网的可靠性，互联网的核心部分常采用网状拓扑结构，使得当发生网络拥塞或少数结点、链路出现故障时，路由器可灵活地改变转发路由而不致引起通信的中断或全网的瘫痪。此外，通信网络的主干线路往往由一些高速链路构成，这样就可以较高的数据率迅速地传送计算机数据。

综上所述，分组交换的主要优点可归纳如表1-2所示。

**表1-2 分组交换的优点**

<table border="1" ><tr>
<td colspan="1" rowspan="1">优点</td>
<td colspan="1" rowspan="1">所采用的手段</td>
</tr><tr>
<td colspan="1" rowspan="1">高效</td>
<td colspan="1" rowspan="1">在分组传输的过程中动态分配传输带宽，对通信链路是逐段占用</td>
</tr><tr>
<td colspan="1" rowspan="1">灵活</td>
<td colspan="1" rowspan="1">为每一个分组独立地选择最合适的转发路由</td>
</tr><tr>
<td colspan="1" rowspan="1">迅速</td>
<td colspan="1" rowspan="1">以分组作为传送单位，可以不先建立连接就能向其他主机发送分组</td>
</tr><tr>
<td colspan="1" rowspan="1">可靠</td>
<td colspan="1" rowspan="1">保证可靠性的网络协议；分布式多路由的分组交换网，使网络有很好的生存性</td>
</tr></table>

分组交换也带来一些新的问题。例如，分组在各路由器存储转发时需要排队，这就会造成一定的时延。因此，必须尽量设法减少这种时延。此外，由于分组交换不像电路交换那样通过建立连接来保证通信时所需的各种资源，因而无法确保通信时端到端所需的带宽。

分组交换带来的另一个问题是各分组必须携带的控制信息也造成了一定的开销（overhead）。整个分组交换网还需要专门的管理和控制机制。

应当指出，从本质上讲，这种断续分配传输带宽的存储转发原理并非是完全新的概念。自古代就有的邮政通信，就其本质来说也属于存储转发方式。而在20世纪40年代，电报通信也采用了基于存储转发原理的报文交换（message switching）。在报文交换中心，一份份电报被接收下来，并穿成纸带。操作员以每份报文为单位，撕下纸带，根据报文的目的站地址，拿到相应的发报机转发出去。这种报文交换的时延较长，从几分钟到几小时不等。现在报文交换已不使用了。分组交换虽然也采用存储转发原理，但由于使用了计算机进行处理，就使分组的转发非常迅速。例如ARPANET 建网初期的经验表明，在正常的网络负荷下，当时横跨美国东西海岸的端到端平均时延小于0.1秒。这样，分组交换虽然采用了某些古老的交换原理，但实际上已变成了一种崭新的交换技术。

图1-13表示电路交换、报文交换和分组交换的主要区别。图中的A和D分别是源点和终点，而B和C是在A和D之间的中间结点。图中的最下方归纳了三种交换方式在数据传送阶段的主要特点：

<!-- ·16· -->

电路交换-整个报文的比特流连续地从源点直达终点，好像在一个管道中传送。

报文交换-整个报文先传送到相邻结点，全部存储下来后查找转发表，转发到下一个结点。

分组交换-单个分组（这只是整个报文的一部分）传送到相邻结点，存储下来后查找转发表，转发到下一个结点。

<!-- 电路交换 报文交换 分组交换 P5 投 P2 连接建立 P P3 P1 P 数据传送 报文 报文 P3 P4 连接释放 报文 t A B C D A B C D A B C D 数据传送 比特流直达终点 报文 报文 报文 分组 分组 分组 的特点 存储 存储 存储 存储 转发 转发 转发 转发 -->
![](https://web-api.textin.com/ocr_image/external/e88d439500ca50e9.jpg)

图1-13 三种交换的比较。电路交换；报文交换；分组交换，P1∼P4表示4个分组

从图1-13 可看出，若要连续传送大量的数据，且其传送时间远大于连接建立时间，则电路交换的传输速率较快。报文交换和分组交换不需要预先分配传输带宽，在传送突发数据时可提高整个网络的信道①利用率。由于一个分组的长度往往远小于整个报文的长度，因此分组交换比报文交换的时延小，同时也具有更好的灵活性。

### 1.4 计算机网络在我国的发展

下面简单介绍一下计算机网络在我国的发展情况。

最早着手建设专用计算机广域网的是铁道部。铁道部在1980年即开始进行计算机联网实验。1989年11月我国第一个公用分组交换网CNPAC建成运行。在20世纪80年代后期，公安、银行、军队以及其他一些部门也相继建立了各自的专用计算机广域网。这对迅速传递重要的数据信息起着重要的作用。另一方面，从20世纪80年代起，国内的许多单位相继安装了大量的局域网。局域网的价格便宜，其所有权和使用权都属于本单位，因此便于开

$\textcircled {1}$ 注：信道（channel）是指以传输媒体为基础的信号通路（包括有线或无线电线路），其作用是传输信号。

<!-- ·17· -->

发、管理和维护。局域网的发展很快，对各行各业的管理现代化和办公自动化已起了积极的作用。

这里应当特别提到的是，1994年4月20日我国用64 kbit/s专线正式连入互联网。从此，我国被国际上正式承认为接入互联网的国家。同年5月中国科学院高能物理研究所设立了我国的第一个万维网服务器。同年9月中国公用计算机互联网CHINANET正式启动。到目前为止，我国陆续建造了基于互联网技术并能够和互联网互连的多个全国范围的公用计算机网络，其中规模最大的就是下面这五个：

（1）中国电信互联网CHINANET（也就是原来的中国公用计算机互联网）

（2）中国联通互联网UNINET

（3）中国移动互联网CMNET

（4）中国教育和科研计算机网CERNET

（5）中国科学技术网CSTNET

2004年2月，我国的第一个下一代互联网 CNGI的主干网 CERNET2 试验网正式开通，并提供服务。试验网以 2.5∼10 Gbit/s的速率连接北京、上海和广州三个CERNET 核心结点，并与国际下一代互联网相连接。这标志着中国在互联网的发展过程中，已逐渐达到与国际先进水平同步。

中国互联网络信息中心CNNIC(China Network Information Center）每年两次公布我国互联网的发展情况。读者可在其网站 www.cnnic.cn 上查到最新的和过去的历史文档。CNNIC 把过去半年内使用过互联网的6周岁及以上的中国居民称为网民。根据2016年1月CNNIC 发表的《中国互联网络发展状况统计报告》，截至2015年12月底，我国网民已达到6.88亿，互联网普及率已达到 50.3%。家庭电脑上网使用宽带上网的比例为 98.9%，说明家庭电脑上网基本上都是在使用宽带上网。在网民中，手机网民的规模已达到6.20亿，占总体网民的比例为90.1%。但农村网民只有1.95亿，占整体网民的28.4%。

现在微博和网络视频的用户明显增多。移动互联网营销发展迅速，当前网民最主要的网络应用就是搜索引擎（即在互联网上使用搜索引擎来查找所需的信息）、即时通信、网络音乐、网络新闻和博客等。此外，更多的经济活动已步入了互联网时代。网上购物、网上支付和网上银行的使用率也迅速提升。到2016年底，我国的国际出口带宽已接近5.4 Tbit/s (7Tbit/s=103Gbit/s),，这里中国电信的CHINANET占有出口总带宽的近60%。

对我国互联网事业发展影响较大的人物和事件不少，限于篇幅，下面仅列举几个例子。

1996年，张朝阳创立了中国第一家以风险投资资金建立的互联网公司-爱特信公司。两年后，爱特信公司推出“搜狐”产品，并更名为搜狐公司（Sohu）。搜狐公司最主要的产品就是搜狐网站（Sohu.com)，是中国首家大型分类查询搜索引擎。1999年，搜狐网站增加了新闻及内容频道，成为一个综合门户网站。

1997年，丁磊创立了网易公司（NetEase)，推出了中国第一家中文全文搜索引擎。网易公司开发的超大容量免费邮箱（如163和126等），由于具有高效的杀毒和拦截垃圾邮件的功能，邮箱的安全性很好，已成为国内最受欢迎的中文邮箱。网易网站现在也是全国出名的综合门户网站。

1998年，王志东创立新浪网站（Sina.com)，该网站现已成为全球最大的中文综合门户网站。新浪的微博是全球使用最多的微博之一。

<!-- ·18· -->

同年，马化腾、张志东创立了腾讯公司（Tencent）。1999年腾讯就推出了用在个人电脑上的即时通信软件 QICQ，简称为QQ。QQ的功能不断更新，现在已成为一款集话音、短信、文章、音乐、图片和视频于一体的网络沟通交流工具，成为几乎所有网民都在电脑中安装的软件，腾讯也因此成为中国最大的互联网综合服务提供商之一。

2011年，腾讯推出了专门供智能手机使用的即时通信软件“微信”（WebChat）。这个软件是在张小龙（著名的电子邮件客户端软件Foxmail的作者）领导下成功研发的。微信能够通过互联网快速发送话音短信、视频、图片和文字，并且支持多人群聊。由于微信能在各种不同操作系统的智能手机中运行，因此目前几乎所有的智能手机用户都在使用微信。微信的功能也在不断翻新。装有微信软件的智能手机，已从简单的社交工具演变成一个具有支付能力的全能钱包。

2000年，李彦宏和徐勇创建了百度网站（Baidu.com)，现在已成为全球最大的中文搜索引擎。自谷歌于2010年退出中国后，在中国最大的搜索引擎无疑就是百度了。现在，百度网站也可以用主题分类的方法进行查找，非常便于网民对各种信息的浏览。

1999年，马云创建了阿里巴巴网站（Alibaba.com)，是一个企业对企业的网上贸易市场平台。2003年，马云创立了个人网上贸易市场平台-淘宝网（Taobao.com）。2004年，阿里巴巴集团创立了第三方支付平台-支付宝（Alipay.com)，为中国电子商务提供了简单、安全、快速的在线支付手段。现在淘宝网已成为中国最大的、深受欢迎的网购零售平台。

上述的一些事件对互联网应用在我国的推广普及，起着非常积极的作用。

### 1.5 计算机网络的类别

#### 1.5.1 计算机网络的定义

计算机网络的精确定义并未统一。

关于计算机网络的较好的定义是这样的［PETE11]：计算机网络主要是由一些通用的、可编程的硬件互连而成的，而这些硬件并非专门用来实现某一特定目的（例如，传送数据或视频信号）。这些可编程的硬件能够用来传送多种不同类型的数据，并能支持广泛的和日益增长的应用。

根据这个定义：(1）计算机网络所连接的硬件，并不限于一般的计算机，而是包括了智能手机。（2）计算机网络并非专门用来传送数据，而是能够支持很多种的应用（包括今后可能出现的各种应用）。

请注意，上述的“可编程的硬件”表明这种硬件一定包含有中央处理机CPU。

我们知道，起初，计算机网络的确是用来传送数据的。但随着网络技术的发展，计算机网络的应用范围不断增大，不仅能够传送音频和视频文件，而且应用的范围已经远远超过一般通信的范畴。

有时我们也能见到“计算机通信网”这一名词。但这个名词容易使人误认为这是一种专门为了通信而设计的计算机网络。计算机网络显然应具有通信的功能，但这种通信功能并非计算机网络最主要的功能。因此本书不使用“计算机通信网”这一名词。

<!-- ·19· -->

#### 1.5.2 几种不同类别的计算机网络

计算机网络有多种类别，下面进行简单的介绍。

#### 1．按照网络的作用范围进行分类

（1）广域网WAN(Wide Area Network） 广域网的作用范围通常为几十到几千公里，因而有时也称为远程网（long haul network）。广域网是互联网的核心部分，其任务是通过长距离（例如，跨越不同的国家）运送主机所发送的数据。连接广域网各结点交换机的链路一般都是高速链路，具有较大的通信容量。本书不专门讨论广域网。

**（2）城域网MAN** (Metropolitan Area Network） 城域网的作用范围一般是一个城市，可跨越几个街区甚至整个城市，其作用距离约为5\~50km。城域网可以为一个或几个单位所拥有，但也可以是一种公用设施，用来将多个局域网进行互连。目前很多城域网采用的是以太网技术，因此有时也常并入局域网的范围进行讨论。

**（3）局域网LAN(Local** Area Network） 局域网一般用微型计算机或工作站通过高速通信线路相连（速率通常在10 Mbit/s 以上），但地理上则局限在较小的范围（如1km左右）。在局域网发展的初期，一个学校或工厂往往只拥有一个局域网，但现在局域网已非常广泛地使用，学校或企业大都拥有许多个互连的局域网（这样的网络常称为校园网或企业网）。我们将在第3章3.3至3.5节详细讨论局域网。

**（4）个人区域网PAN** (PersonalArea Network） 个人区域网就是在个人工作的地方把属于个人使用的电子设备（如便携式电脑等）用无线技术连接起来的网络，因此也常称为无**线个人区域网WPAN(Wireless** PAN)，其范围很小，大约在10m左右。我们将在第9章9.2节对这种网络进行简单的介绍。

顺便指出，若中央处理机之间的距离非常近（如仅1米的数量级或甚至更小些），则一般就称之为多处理机系统而不称它为计算机网络。

## 2．按照网络的使用者进行分类

（1）公用网（public network） 这是指电信公司（国有或私有）出资建造的大型网络。“公用”的意思就是所有愿意按电信公司的规定交纳费用的人都可以使用这种网络。因此公用网也可称为公众网。

**（2）专用网（private** network） 这是某个部门为满足本单位的特殊业务工作的需要而建造的网络。这种网络不向本单位以外的人提供服务。例如，军队、铁路、银行、电力等系统均有本系统的专用网。

公用网和专用网都可以提供多种服务。如传送的是计算机数据，则分别是公用计算机网络和专用计算机网络。

## 3．用来把用户接入到互联网的网络

这种网络就是接入网AN(Access Network)，它又称为本地接入网或居民接入网。这是一类比较特殊的计算机网络。我们在前面的1.2.2节已经介绍了用户必须通过ISP才能接入到互联网。由于从用户家中接入到互联网可以使用的技术有许多种，因此就出现了可以使用多种接入网技术连接到互联网的情况。接入网本身既不属于互联网的核心部分，也不属于互联网的边缘部分。接入网是从某个用户端系统到互联网中的第一个路由器（也称为边缘路由器）之间的一种网络。从覆盖的范围看，很多接入网还属于局域网。从作用上看，接入网只是起到让用户能够与互联网连接的“桥梁”作用。在互联网发展初期，用户多用电话线拨号接入互联网，速率很低（每秒几千比特到几十千比特），因此那时并没有使用接入网这个名词。直到最近，由于出现了多种宽带接入技术，宽带接入网才成为互联网领域中的一个热门课题。我们将在第2章2.6节讨论宽带接入技术。

<!-- ·20· -->

### 1.6 计算机网络的性能

计算机网络的性能一般是指它的几个重要的性能指标。但除了这些重要的性能指标外，还有一些非性能特征（nonperformance characteristics）也对计算机网络的性能有很大的影响。本节将讨论这两个方面的问题。

#### 1.6.1 计算机网络的性能指标

性能指标从不同的方面来度量计算机网络的性能。下面介绍常用的七个性能指标。

#### 1．速率

我们知道，计算机发送出的信号都是数字形式的。比特（bit）来源于binary digit，意思是一个“二进制数字”，因此一个比特就是二进制数字中的一个1或0。比特也是信息论中使**用的信息量的单位。网络技术中的速率指的是数据的传送速率，它也称为数据率（data** rate）或比特率（bit rate）。速率是计算机网络中最重要的一个性能指标。速率的单位是bit/s（比特每秒）（或b/s，有时也写为bps，即bit per second）。当数据率较高时，就常常在bit/s的前面加上一个字母。例如，k(kilo)=103=千 M(Mega)=106=兆,G(Giga)=109=吉,,T (Tera)=1012=太， P(Peta)=1015=拍，E(Exa)=1018=艾， Z(Zetta)=1021=泽，Y(Yotta） $=10^{24}=尧^{\textcircled {1}}$ 。这样， 4x1010bit/s的数据率就记为40Gbit/s。现在人们在谈到网络速率时，常省略了速率单位中应有的bit/s，而使用不太正确的说法，如“40G的速率”。另外要注意的是，当提到网络的速率时，往往指的是额定速率或标称速率，而并非网络实际上运行的速率。

#### 2．带宽

“带宽”（bandwidth）有以下两种不同的意义：

（1）带宽本来是指某个信号具有的频带宽度。信号的带宽是指该信号所包含的各种不同频率成分所占据的频率范围。例如，在传统的通信线路上传送的电话信号的标准带宽是3.1kHz（从 300Hz到 3.4kHz，即话音的主要成分的频率范围）。这种意义的带宽的单位是赫

$\textcircled {1}$ 注：在计算机领域中，数的计算使用二进制。因此，千=K=210=1024 兆=M=220，吉=G=230，太=T=240拍=P=250 4=E=260，泽=Z=270，尧=Y=280。此外，计算机中的数据量往往用字节B作为度量的单位（B代表byte）。通常一个字节代表8个比特。例如，15GB的数据块以10G的速率传送，表明有15x230x8比特的数据块以10x109bit/s的速率传送。在计算机领域中，所有的这些单位都使用大写字母，但在通信领域中，只有“1000”使用小写"k"，其余的也都用大写。请注意，也有的书不这样严格区分，大写K既可表示1000，又可表示1024，因此这时要特别小心，不要弄错。

<!-- ·21· -->

（或千赫、兆赫、吉赫等）。在过去很长的一段时间，通信的主干线路传送的是模拟信号（即连续变化的信号）。因此，表示某信道允许通过的信号频带范围就称为该信道的带宽**（或通频带）。**

（2）在计算机网络中，带宽用来表示网络中某通道传送数据的能力，因此网络带宽表示在单位时间内网络中的某信道所能通过的“最高数据率”。在本书中提到“带宽”时，主要是指这个意思。这种意义的带宽的单位就是数据率的单位bit/s，是“比特每秒”。

在“带宽”的上述两种表述中，前者为频域称谓，而后者为时域称谓，其本质是相同的。也就是说，一条通信链路的“带宽”越宽，其所能传输的“最高数据率”也越高。

## 3．吞吐量

吞吐量（throughput）表示在单位时间内通过某个网络（或信道、接口）的实际的数据量。吞吐量更经常地用于对现实世界中的网络的一种测量，以便知道实际上到底有多少数据量能够通过网络。显然，吞吐量受网络的带宽或网络的额定速率的限制。例如，对于一个1Gbit/s的以太网，就是说其额定速率是1 Gbit/s，那么这个数值也是该以太网的吞吐量的绝对上限值。因此，对1 Gbit/s的以太网，其实际的吞吐量可能也只有100 Mbit/s，或甚至更低，并没有达到其额定速率。请注意，有时吞吐量还可用每秒传送的字节数或帧数来表示。

## 4．时延

时延（delay或latency）是指数据（一个报文或分组，甚至比特）从网络（或链路）的一端传送到另一端所需的时间。时延是个很重要的性能指标，它有时也称为延迟或迟延。

需要注意的是，网络中的时延是由以下几个不同的部分组成的：

**（1）发送时延** **发送时延（transmission delay）是主机或路由器发送数据帧所需要的时**间，也就是从发送数据帧的第一个比特算起，到该帧的最后一个比特发送完毕所需的时间。因此发送时延也叫做传输时延（我们尽量不采用传输时延这个名词，因为它很容易和下面要讲到的传播时延弄混）。发送时延的计算公式是：

$$发送时延=\frac {数据中负长度(bit)}{发送速率(bit/s)}\tag{1-1}$$

由此可见，对于一定的网络，发送时延并非固定不变，而是与发送的帧长（单位是比特）成正比，与发送速率成反比。

**（2）传播时延** 传播时延（propagation **delay）是电磁波在信道中传播一定的距离需要花**费的时间。传播时延的计算公式是：

$$传播时延=\frac {信道长度(m)}{电磁波在信道上的传播速率(m/s)}\tag{1-2}$$

电磁波在自由空间的传播速率是光速，即3.0x105km/s。电磁波在网络传输媒体中的传播速率比在自由空间要略低一些：在铜线电缆中的传播速率约为2.3x105km/s，在光纤中的传播速率约为2.0×105km/s。 例如， 1000km长的光纤线路产生的传播时延大约为5ms。

以上两种时延有本质上的不同。但只要理解这两种时延发生的地方就不会把它们弄混。发送时延发生在机器内部的发送器中（一般就是发生在网络适配器中，见第3章3.3.1**节），与传输信道的长度（或信号传送的距离）没有任何关系。但传播时延则发生在机器外部的传输信道媒体上，而与信号的发送速率无关。信号传送的距离越远，传播时延就越大。**可以用一个简单的比喻来说明。假定有10辆车按顺序从公路收费站入口出发到相距50公里的目的地。再假定每一辆车过收费站要花费6秒钟，而车速是每小时100公里。现在可以算出这10辆车从收费站到目的地总共要花费的时间：发车时间共需60秒（相当于网络中的发送时延），在公路上的行车时间需要30分钟（相当于网络中的传播时延）。因此从第一辆车到收费站开始计算，到最后一辆车到达目的地为止，总共花费的时间是二者之和，即31分钟。

<!-- ·22· -->

下面还有两种时延也需要考虑，但比较容易理解。

**（3）处理时延** 主机或路由器在收到分组时要花费一定的时间进行处理，例如分析分组的首部、从分组中提取数据部分、进行差错检验或查找适当的路由等，这就产生了处理时延。

**（4）排队时延** 分组在经过网络传输时，要经过许多路由器。但分组在进入路由器后要先在输入队列中排队等待处理。在路由器确定了转发接口后，还要在输出队列中排队等待转发。这就产生了排队时延。排队时延的长短往往取决于网络当时的通信量。当网络的通信量很大时会发生队列溢出，使分组丢失，这相当于排队时延为无穷大。

这样，数据在网络中经历的总时延就是以上四种时延之和：

总时延=发送时延 +传播时延 +处理时延 + 排队时延 (1-3)

一般说来，小时延的网络要优于大时延的网络。在某些情况下，一个低速率、小时延的网络很可能要优于一个高速率但大时延的网络。

图1-14画出了这几种时延所产生的地方，希望读者能够更好地分清这几种时延。

<!-- 在这里产生发送时延（即传输时延） 在这里产生处理时延 和排队时延 在这里产生传播时延 队列 链路 结点A 发送器 结点B -->
![](https://web-api.textin.com/ocr_image/external/16022a5e07575b9d.jpg)

图1-14 几种时延产生的地方不一样

必须指出，在总时延中，究竟是哪一种时延占主导地位，必须具体分析。下面举个例子。

现在我们暂时忽略处理时延和排队时延①。假定有一个长度为 100MB 的数据块（这里的M显然不是指106而是指220。B是字节，1字节5=8比特）。在带宽为1 Mbit/s的信道上（这里的M显然是.106)连续发送（即发送速率为1Mbit/s)，其发送时延是

100×220×8÷106=838.9s

现在把这个数据块用光纤传送到 1000km远的计算机。由于在 1000km的光纤上的传

$\textcircled {1}$  注：当计算机网络中的通信量过大时，网络中的许多路由器的处理时延和排队时延将会大大增加，因而处理时延和排队时延有可能在总时延中占据主要成分。这时整个网络的性能就变差了。

<!-- ·23· -->

播时延约为5ms，因此在这种情况下，发送100MB的数据块的总时延=838.9+0.005≈838.9s。可见对于这种情况，发送时延决定了总时延的数值。

如果我们把发送速率提高到100倍，即提高到100 Mbit/s，那么总时延就变为 8.389+0.005=8.394∼s，缩小到原有数值的1/100。

但是，并非在任何情况下，提高发送速率就能减小总时延。例如，要传送的数据仅有1个字节（如键盘上键入的一个字符，共8bit）。当发送速率为1Mbit/s时，发送时延是

8÷106=8×10-6s=8μs

若传播时延仍为 5ms，则总时延为 5.008ms。在这种情况下，传播时延决定了总时延。如果我们把数据率提高到1000倍（即将数据的发送速率提高到1 Gbit/s)，不难算出，总时延基本上仍是5ms，并没有明显减小。这个例子告诉我们，不能笼统地认为：“数据的发送速率越高，其传送的总时延就越小”。这是因为数据传送的总时延是由公式（1-3）右端的四项时延组成的，不能仅考虑发送时延一项。

如果上述概念没有弄清楚，就很容易产生这样错误的概念：“在高速链路（或高带宽链路）上，比特会传送得更快些”。但这是不对的。我们知道，汽车在路面质量很好的高速公**路上可明显地提高行驶速率。然而对于高速网络链路，我们提高的仅仅是数据的发送速率而**不是比特在链路上的传播速率。荷载信息的电磁波在通信线路上的传播速率（这是光速的数量级）取决于通信线路的介质材料，而与数据的发送速率并无关系。提高数据的发送速率只是减小了数据的发送时延。还有一点也应当注意，就是数据的发送速率的单位是每秒发送多少个比特，这是指在某个点或某个接口上的发送速率。而传播速率的单位是每秒传播多少公里，是指在某一段传输线路上比特的传播速率。因此，通常所说的“光纤信道的传输速率高”是指可以用很高的速率向光纤信道发送数据，而光纤信道的传播速率实际上还要比铜线的传播速率略低一点。这是因为经过测量得知，光在光纤中的传播速率约为每秒20.5万公里，它比电磁波在铜线（如5类线）中的传播速率（每秒23.1万公里）略低一些。

上述的重要概念请读者务必弄清。

## 5．时延带宽积

把以上讨论的网络性能的两个度量-传播时延和带宽-相乘，就得到另一个很有用的度量：传播时延带宽积，即

时延带宽积=传播时延 ×带宽 (1-4)

我们可以用图1-15的示意图来表示时延带宽积。这是一个代表链路的圆柱形管道，管道的长度是链路的传播时延（请注意，现在以时间作为单位来表示链路长度），而管道的截面积是链路的带宽。因此时延带宽积就表示这个管道的体积，表示这样的链路可容纳多少个比特。例如，设某段链路的传播时延为20ms，带宽为10Mbit/s。算出

时延带宽积=20×10-3×10×106=2×105bit

这就表明，若发送端连续发送数据，则在发送的第一个比特即将达到终点时，发送端就已经发送了20万个比特，而这20万个比特都正在链路上向前移动。因此，链路的时延带宽积又称为以比特为单位的链路长度。

<!-- ·24· -->

<!-- （传播）时延 带宽 链路 -->
![](https://web-api.textin.com/ocr_image/external/c5eed42042f0c8b9.jpg)

图1-15 链路像一条空心管道

不难看出，管道中的比特数表示从发送端发出的但尚未到达接收端的比特。对于一条正在传送数据的链路，只有在代表链路的管道都充满比特时，链路才得到充分的利用。

## 6．往返时间RTT

在计算机网络中，往返时间RTT(Round-Trip Time）也是一个重要的性能指标。这是因为在许多情况下，互联网上的信息不仅仅单方向传输而是双向交互的。因此，我们有时很需要知道双向交互一次所需的时间。例如，A向B发送数据。如果数据长度是100MB，发送速率是100Mbit/s，那么

$$发送时间=\frac {数据长度}{发送速率}=\frac {100\times 2^{20}\times 8}{100\times 10^{6}}\approx 8.39s$$

如果B正确收完100MB的数据后，就立即向A发送确认。再假定A只有在收到B的确认信息后，才能继续向B发送数据。显然，这需要等待一个往返时间RTT（这里假定确认信息很短，可忽略B发送确认的时间）。如果RTT=2s，那么可以算出A向B发送数据的有效数据率。

$$有效数据率=\frac {数据长度}{发送时间+RTT}=\frac {100\times 2^{20}\times 8}{8.39+2}\approx 80.7\times 10^{6}bit/s\approx 80.7Mbit/s$$

比原来的数据率100Mbit/s小不少。

在互联网中，往返时间还包括各中间结点的处理时延、排队时延以及转发数据时的发送时延。当使用卫星通信时，往返时间RTT相对较长，是很重要的一个性能指标。

## 7．利用率

利用率有信道利用率和网络利用率两种。信道利用率指出某信道有百分之几的时间是被利用的（有数据通过）。完全空闲的信道的利用率是零。网络利用率则是全网络的信道利用率的加权平均值。信道利用率并非越高越好。这是因为，根据排队论的理论，当某信道的利用率增大时，该信道引起的时延也就迅速增加。这和高速公路的情况有些相似。当高速公路上的车流量很大时，由于在公路上的某些地方会出现堵塞，因此行车所需的时间就会变长。网络也有类似的情况。当网络的通信量很少时，网络产生的时延并不大。但在网络通信量不断增大的情况下，由于分组在网络结点（路由器或结点交换机）进行处理时需要排队等候，因此网络引起的时延就会增大。如果令D0表示网络空闲时的时延， D 表示网络当前的时延，那么在适当的假定条件下，可以用下面的简单公式（1-5）来表示 D，D0和利用率 U之间的关系：

$$D=\frac {D_{0}}{1-U}\tag{1-5}$$

<!-- ·25· -->

这里 U是网络的利用率，数值在0到1之间。当网络的利用率达到其容量的1/2时，时延就要加倍。特别值得注意的就是：当网络的利用率接近最大值1时，网络的时延就趋于无穷大。因此我们必须有这样的概念：**信道或网络的利用率过高会产生非常大的时延。图1-**16给出了上述概念的示意图。因此一些拥有较大主干网的ISP通常控制信道利用率不超过50%。如果超过了就要准备扩容，增大线路的带宽。

<!-- 时延D 时延 急剧 增大 D0 利用率U 0 1 -->
![](https://web-api.textin.com/ocr_image/external/20dbf7128d27ec9c.jpg)

图1-16 时延与利用率的关系

### 1.6.2 计算机网络的非性能特征

计算机网络还有一些非性能特征也很重要。这些非性能特征与前面介绍的性能指标有很大的关系。下面简单地加以介绍。

## 1．费用

网络的价格（包括设计和实现的费用）总是必须考虑的，因为网络的性能与其价格密切相关。一般说来，网络的速率越高，其价格也越高。

## 2．质量

网络的质量取决于网络中所有构件的质量，以及这些构件是怎样组成网络的。网络的质量影响到很多方面，如网络的可靠性、网络管理的简易性，以及网络的一些性能。但网络的性能与网络的质量并不是一回事。例如，有些性能一般的网络，运行一段时间后就出现了故障，变得无法再继续工作，说明其质量不好。高质量的网络往往价格也较高。

## 3．标准化

网络的硬件和软件的设计既可以按照通用的国际标准，也可以遵循特定的专用网络标准。最好采用国际标准的设计，这样可以得到更好的互操作性，更易于升级换代和维修，也更容易得到技术上的支持。

## 4．可靠性

可靠性与网络的质量和性能都有密切关系。高速网络的可靠性不一定很差。但高速网络要可靠地运行，则往往更加困难，同时所需的费用也会较高。

## 5．可扩展性和可升级性

在构造网络时就应当考虑到今后可能会需要扩展（即规模扩大）和升级（即性能和版本的提高）。网络的性能越高，其扩展费用往往也越高，难度也会相应增加。

<!-- ·26· -->

## 6．易于管理和维护

网络如果没有良好的管理和维护，就很难达到和保持所设计的性能。

### 1.7 计算机网络体系结构

在计算机网络的基本概念中，分层次的体系结构是最基本的。计算机网络体系结构的抽象概念较多，在学习时要多思考。这些概念对后面的学习很有帮助。

#### 1.7.1 计算机网络体系结构的形成

计算机网络是个非常复杂的系统。为了说明这一点，可以设想一种最简单的情况：连接在网络上的两台计算机要互相传送文件。

显然，在这两台计算机之间必须有一条传送数据的通路。但这还远远不够。至少还有以下几项工作需要去完成：

（1）发起通信的计算机必须将数据通信的通路进行激活（activate）。所谓“激活”就是要发出一些信令，保证要传送的计算机数据能在这条通路上正确发送和接收。

（2）要告诉网络如何识别接收数据的计算机。

（3）发起通信的计算机必须查明对方计算机是否已开机，并且与网络连接正常。

（4）发起通信的计算机中的应用程序必须弄清楚，在对方计算机中的文件管理程序是否已做好接收文件和存储文件的准备工作。

（5）若计算机的文件格式不兼容，则至少其中一台计算机应完成格式转换功能。

（6）对出现的各种差错和意外事故，如数据传送错误、重复或丢失，网络中某个结点交换机出现故障等，应当有可靠的措施保证对方计算机最终能够收到正确的文件。

还可以列举出一些要做的其他工作。由此可见，相互通信的两个计算机系统必须高度协调工作才行，而这种“协调”是相当复杂的。为了设计这样复杂的计算机网络，早在最初的 ARPANET 设计时即提出了分层的方法。“分层”可将庞大而复杂的问题，转化为若干较小的局部问题，而这些较小的局部问题就比较易于研究和处理。

1974年，美国的IBM公司宣布了系统网络体系结构SNA(System Network Architecture）。这个著名的网络标准就是按照分层的方法制定的。现在用IBMM 大型机构建的专用网络仍在使用SNA。不久后，其他一些公司也相继推出自己公司的具有不同名称的体系结构。

不同的网络体系结构出现后，使用同一个公司生产的各种设备都能够很容易地互连成网。这种情况显然有利于一个公司垄断市场。但由于网络体系结构的不同，不同公司的设备很难互相连通。

然而，全球经济的发展使得不同网络体系结构的用户迫切要求能够互相交换信息。为了使不同体系结构的计算机网络都能互连，国际标准化组织ISO于1977年成立了专门机构研究该问题。他们提出了一个试图使各种计算机在世界范围内互连成网的标准框架，即著名**的开放系统互连基本参考模型OSI/RM** (Open Systems Interconnection Reference Model)，简称为OSI。“开放”是指非独家垄断的。因此只要遵循OSI标准，一个系统就可以和位于世界上任何地方的、也遵循这同一标准的其他任何系统进行通信。这一点很像世界范围的有线电话和邮政系统，这两个系统都是开放系统。“系统”是指在现实的系统中与互连有关的各部分（我们知道，并不是一个系统中的所有部分都与互连有关。OSI/RM 把与互连无关的部分除外，而仅仅考虑与互连有关的那些部分）。所以OSI/RM是个抽象的概念。在1983年形成了开放系统互连基本参考模型的正式文件，即著名的ISO 7498国际标准，也就是所谓的七层协议的体系结构。

<!-- ·27· -->

OSI试图达到一种理想境界，即全球计算机网络都遵循这个统一标准，因而全球的计算机将能够很方便地进行互连和交换数据。在20世纪80年代，许多大公司甚至一些国家的政府机构纷纷表示支持OSI。当时看来似乎在不久的将来全世界一定会按照OSI制定的标准来构造自己的计算机网络。然而到了20世纪90年代初期，虽然整套的OSI国际标准都已经制定出来了，但由于基于TCP/IP的互联网已抢先在全球相当大的范围成功地运行了，而与此同时却几乎找不到有什么厂家生产出符合OSI标准的商用产品。因此人们得出这样的结论：OSI只获得了一些理论研究的成果，但在市场化方面则事与愿违地失败了。现今规模最大的、覆盖全球的、基于TCP/IP的互联网并未使用OSI标准。OSI失败的原因可归纳为：

（1)OSI的专家们缺乏实际经验，他们在完成OSI标准时缺乏商业驱动力；

（2)OSI的协议实现起来过分复杂，而且运行效率很低；

（3)OSI标准的制定周期太长，因而使得按OSI标准生产的设备无法及时进入市场；

（4)OSI的层次划分不太合理，有些功能在多个层次中重复出现。

按照一般的概念，网络技术和设备只有符合有关的国际标准才能大范围地获得工程上的应用。但现在情况却反过来了。得到最广泛应用的不是法律上的国际标准OSI，而是非国际标准 TCP/IP。这样，TCP/IP 就常被称为是事实上的国际标准。从这种意义上说，能够占领市场的就是标准。在过去制定标准的组织中往往以专家、学者为主。但现在许多公司都纷纷加入各种标准化组织，使得技术标准具有浓厚的商业气息。一个新标准的出现，有时不一定反映其技术水平是最先进的，而是往往有着一定的市场背景。

顺便说一下，虽然OSI标准在一开始由ISO来制定，但后来的许多标准都是ISO与原来的国际电报电话咨询委员会CCITT①联合制定的。从历史上来看，CCITT原来是从通信的角度考虑一些标准的制定的，而ISO则关心信息的处理。但随着科学技术的发展，通信与信息处理的界限变得比较模糊了。于是，通信与信息处理就都成为CCITT与ISO所共同关心的领域。CCITT的建议书X.200就是关于开放系统互连参考模型的，它和上面提到的ISO 7498基本上是相同的。

#### 1.7.2 协议与划分层次

在计算机网络中要做到有条不紊地交换数据，就必须遵守一些事先约定好的规则。这**些规则明确规定了所交换的数据的格式以及有关的同步问题。这里所说的同步不是狭义的**（即同频或同频同相）而是广义的，即在一定的条件下应当发生什么事件（例如，应当发送**一个应答信息），因而同步含有时序的意思。这些为进行网络中的数据交换而建立的规则、**

①注：鉴于“有线电”和“无线电”的关系日益密切，国际电信联盟ITU(International Telecommunication Union）已将国际电报电话咨询委员会 CCITT 和国际无线电咨询委员会CCIR 合并为电信标准化部门 TSS (Telecommunication Standardization Sector）。从1993年3月1日起，CCITT和CCIR就不复存在。今后有关电信的标准就由国际电联（ITU）的电信标准化部门颁布，并在每个建议书的前面加上ITU-T这几个字，例如，原来的CCITT X.25现在就称为ITU-T X.25。为了节约经费，以后不再是每隔四年就出版全套的建议书，而是只出版新通过的建议书或旧建议书中有变化的部分。CCITT虽然不存在了，但过去CCITT所制定的标准并未作废，凡未过时的标准我们在需要时都可继续引用。

<!-- ·28· -->

**标准或约定称为网络协议（network** protocol）。网络协议也可简称为协议。更进一步讲，网络协议主要由以下三个要素组成：

（1）语法，即数据与控制信息的结构或格式；

（2）语义，即需要发出何种控制信息，完成何种动作以及做出何种响应；

（3）同步，即事件实现顺序的详细说明。

由此可见，网络协议是计算机网络不可缺少的组成部分。实际上，只要我们想让连接在网络上的另一台计算机做点什么事情（例如，从网络上的某台主机下载文件），我们都需要有协议。但是当我们经常在自己的个人电脑上进行文件存盘操作时，就不需要任何网络协议，除非这个用来存储文件的磁盘是网络上的某个文件服务器的磁盘。

协议通常有两种不同的形式。一种是使用便于人来阅读和理解的文字描述。另一种是使用让计算机能够理解的程序代码。这两种不同形式的协议都必须能够对网络上的信息交换过程做出精确的解释。

ARPANET的研制经验表明，对于非常复杂的计算机网络协议，其结构应该是层次式的。我们可以举一个简单的例子来说明划分层次的概念。

现在假定我们在主机1和主机2之间通过一个通信网络传送文件。这是一项比较复杂的工作，因为需要做不少的工作。

我们可以将要做的工作划分为三类。第一类工作与传送文件直接有关。例如，发送端的文件传送应用程序应当确信接收端的文件管理程序已做好接收和存储文件的准备。若两台主机所用的文件格式不一样，则至少其中的一台主机应完成文件格式的转换。这两项工作可用一个文件传送模块来完成。这样，两台主机可将文件传送模块作为最高的一层（图1-17）。在这两个模块之间的虚线表示两台主机系统交换文件和一些有关文件交换的命令。

<!-- 主机1 主机2 文件及文件传送命令 文件传送模块 文件传送模块 通信服务模块 与通信有关的报文 通信服务模块 网络 网络 网络接入模块 接口 通信网络 接口 网络接入模块 -->
![](https://web-api.textin.com/ocr_image/external/4a14d87141df11c5.jpg)

图1-17 划分层次的举例

但是，我们并不想让文件传送模块完成全部工作的细节，这样会使文件传送模块过于复杂。可以再设立一个通信服务模块，用来保证文件和文件传送命令可靠地在两个系统之间交换。也就是说，让位于上面的文件传送模块利用下面的通信服务模块所提供的服务。我们还可以看出，如果将位于上面的文件传送模块换成电子邮件模块，那么电子邮件模块同样可以利用在它下面的通信服务模块所提供的可靠通信的服务。

同样道理，我们再构造一个网络接入模块，让这个模块负责做与网络接口细节有关的工作，并向上层提供服务，使上面的通信服务模块能够完成可靠通信的任务。

从上述简单例子可以更好地理解分层可以带来很多好处。如：

（1）各层之间是独立的。某一层并不需要知道它的下一层是如何实现的，而仅仅需要知道该层通过层间的接口（即界面）所提供的服务。由于每一层只实现一种相对独立的功能，

<!-- ·29· -->

因而可将一个难以处理的复杂问题分解为若干个较容易处理的更小一些的问题。这样，整个问题的复杂程度就下降了。

（2）灵活性好。当任何一层发生变化时（例如由于技术的变化），只要层间接口关系保持不变，则在这层以上或以下各层均不受影响。此外，对某一层提供的服务还可进行修改。当某层提供的服务不再需要时，甚至可以将这层取消。

（3）结构上可分割开。各层都可以采用最合适的技术来实现。

（4）易于实现和维护。这种结构使得实现和调试一个庞大而又复杂的系统变得易于处理，因为整个的系统已被分解为若干个相对独立的子系统。

（5）能促进标准化工作。因为每一层的功能及其所提供的服务都已有了精确的说明。

分层时应注意使每一层的功能非常明确。若层数太少，就会使每一层的协议太复杂。但层数太多又会在描述和综合各层功能的系统工程任务时遇到较多的困难。通常各层所要完成的功能主要有以下一些（可以只包括一种，也可以包括多种）：

**①差错控制** 使相应层次对等方的通信更加可靠。

**②流量控制** 发送端的发送速率必须使接收端来得及接收，不要太快。

**③分段和重装** 发送端将要发送的数据块划分为更小的单位，在接收端将其还原。

**④复用和分用** 发送端几个高层会话复用一条低层的连接，在接收端再进行分用。

**⑤连接建立和释放** 交换数据前先建立一条逻辑连接，数据传送结束后释放连接。

分层当然也有一些缺点，例如，有些功能会在不同的层次中重复出现，因而产生了额外开销。

计算机网络的各层及其协议的集合就是网络的体系结构（architecture）。换种说法，计算**机网络的体系结构就是这个计算机网络及其构件所应完成的功能的精确定义［GREE82］。需**要强调的是：这些功能究竟是用何种硬件或软件完成的，则是一个遵循这种体系结构的实现（implementation）的问题。体系结构的英文名词 architecture 的原意是建筑学或建筑的设计和风格。它和一个具体的建筑物的概念很不相同。例如，我们可以走进一个明代的建筑物中，但却不能走进一个明代的建筑风格之中。同理，我们也不能把一个具体的计算机网络说成是**一个抽象的网络体系结构。总之，体系结构是抽象的，而实现则是具体的，是真正在运行的计算机硬件和软件。**

#### 1.7.3 具有五层协议的体系结构

OSI的七层协议体系结构（图1-18(a)）的概念清楚，理论也较完整，但它既复杂又不实用。TCP/IP 体系结构则不同，但它现在却得到了非常广泛的应用。TCP/IP是一个四层的体系结构（图1-18(b))，它包含应用层、运输层、网际层和网络接口层（用网际层这个名字是强调这一层是为了解决不同网络的互连问题）。不过从实质上讲，TCP/IP 只有最上面的三层，因为最下面的网络接口层并没有什么具体内容。因此在学习计算机网络的原理时往往采取折中的办法，即综合OSI和TCP/IP的优点，采用一种只有五层协议的体系结构（图1-18(c))，这样既简洁又能将概念阐述清楚①。有时为了方便，也可把最底下两层称为网络接口层。

①注：五层协议的体系结构只是为介绍网络原理而设计的，实际应用还是TCP/IP四层体系结构。

<!-- ·30· -->

<!-- OSI的体系结构 TCP/IP的体系结构 五层协议的体系结构 7 应用层 应用层 6 表示层 （各种应用层协议如 5 应用层 TELNET,FTP,SMTP等） 5 会话层 4 运输层 运输层（TCP或UDP） 4 运输层 3 网络层 网际层IP 3 网络层 2 数据链路层 2 数据链路层 网络接口层 1 物理层 1 物理层 （a)OSI的七层协议 （b)TCP/IP的四层协议 （c）五层协议 -->
![](https://web-api.textin.com/ocr_image/external/b4c6e3227dafbc44.jpg)

图1-18 计算机网络体系结构

现在结合互联网的情况，自上而下地、非常简要地介绍一下各层的主要功能。实际上，只有认真学习完本书各章的协议后才能真正弄清各层的作用。

#### （1）应用层（application layer）

应用层是体系结构中的最高层。应用层的任务是通过应用进程间的交互来完成特定网络应用。应用层协议定义的是应用进程间通信和交互的规则。这里的进程就是指主机中正在运行的程序。对于不同的网络应用需要有不同的应用层协议。在互联网中的应用层协议很多，如域名系统DNS，支持万维网应用的HTTP 协议，支持电子邮件的SMTP 协议，等等。我们把应用层交互的数据单元称为报文（message）。

#### （2）运输层（transport layer）

**运输层的任务就是负责向两台主机中进程之间的通信提供通用的数据传输服务。应用**进程利用该服务传送应用层报文。所谓“通用的”，是指并不针对某个特定网络应用，而是多种应用可以使用同一个运输层服务。由于一台主机可同时运行多个进程，因此运输层有复用和分用的功能。复用就是多个应用层进程可同时使用下面运输层的服务，分用和复用相反，是运输层把收到的信息分别交付上面应用层中的相应进程。

运输层主要使用以下两种协议：

·传输控制协议TCP(Transmission Control Protocol)-提供面向连接的、可靠的数据传输服务，其数据传输的单位是报文段（segment）。

**·用户数据报协议** UDP(User Datagram Protocol)-提供无连接的、尽最大努力（best-effort）的数据传输服务（不保证数据传输的可靠性），其数据传输的单位是用**户数据报。**

顺便指出，有人愿意把运输层称为传输层，理由是这一层使用的TCP协议就叫做传输控制协议。从意思上看，传输和运输差别也不大。但OSI定义的第4层使用的是Transport，而不是Transmission。这两个字的含义还是有些差别。因此，使用运输层这个译名较为准确。

#### （3）网络层（network layer）

网络层负责为分组交换网上的不同主机提供通信服务。在发送数据时，网络层把运输层产生的报文段或用户数据报封装成分组或包进行传送。在TCP/IP体系中，由于网络层使**用IP协议，因此分组也叫做IP数据报，或简称为数据报。本书把“分组”和“数据报”作为同义词使用。**

<!-- ·31· -->

请注意：不要将运输层的“用户数据报UDP”和网络层的“IP数据报”弄混。此外，**无论在哪一层传送的数据单元，都可笼统地用“分组”来表示。**

网络层的另一个任务就是要选择合适的路由，使源主机运输层所传下来的分组，能够通过网络中的路由器找到目的主机。

这里要强调指出，网络层中的“网络”二字，已不是我们通常谈到的具体网络，而是在计算机网络体系结构模型中的第3层的名称。

互联网是由大量的异构（heterogeneous）网络通过路由器（router）相互连接起来的。互联网使用的网络层协议是无连接的网际协议IP(Internet Protocol）和许多种路由选择协议，因此互联网的网络层也叫做网际层或IP层。在本书中，网络层、网际层和IP层都是同义语。

#### （4）数据链路层（data link layer）

数据链路层常简称为链路层。我们知道，两台主机之间的数据传输，总是在一段一段的链路上传送的，这就需要使用专门的链路层的协议。在两个相邻结点之间传送数据时，数据链路层将网络层交下来的IP数据报组装成帧（framing)，在两个相邻结点间的链路上传送帧（frame）。每一帧包括数据和必要的控制信息（如同步信息、地址信息、差错控制等）。

在接收数据时，控制信息使接收端能够知道一个帧从哪个比特开始和到哪个比特结束。这样，数据链路层在收到一个帧后，就可从中提取出数据部分，上交给网络层。

控制信息还使接收端能够检测到所收到的帧中有无差错。如发现有差错，数据链路层就简单地丢弃这个出了差错的帧，以免继续在网络中传送下去白白浪费网络资源。如果需要改正数据在数据链路层传输时出现的差错（这就是说，数据链路层不仅要检错，而且要纠错），那么就要采用可靠传输协议来纠正出现的差错。这种方法会使数据链路层的协议复杂些。

### （5）物理层（physical layer）

在物理层上所传数据的单位是比特。发送方发送1（或0）时，接收方应当收到1（或0）而不是0（或1）。因此物理层要考虑用多大的电压代表“1”或“0”，以及接收方如何识别出发送方所发送的比特。物理层还要确定连接电缆的插头应当有多少根引脚以及各引脚应如何连接。当然，解释比特代表的意思，就不是物理层的任务。请注意，传递信息所利用的一些物理媒体，如双绞线、同轴电缆、光缆、无线信道等，并不在物理层协议之内而是在物理层协议的下面。因此也有人把物理层下面的物理媒体当作第0层。

在互联网所使用的各种协议中，最重要的和最著名的就是TCP和IP两个协议。现在人们经常提到的TCP/IP 并不一定是单指TCP和IP这两个具体的协议，而往往是表示互联网所使用的整个TCP/IP协议族（protocol suite）①。

图1-19说明的是应用进程的数据在各层之间的传递过程中所经历的变化。这里为简单起见，假定两台主机通过一台路由器连接起来。

①注：请注意suite这个字的特殊读音／swi:t/，不要读错。

<!-- ·32· -->

<!-- 主机1 主机2 AP1 数据 数据 AP2 首部 5 Hs 数据 Hs 数据 5 4 H4 数据 路由器 H4 数据 4 3 H3 数据 3 尾部 H3 数据 3 2 H2 数据 T2 2 2 H2 数据 T2 2 1 10100···比特流···110100 1 1 10100···比特流···110100 1 电信号 电信号 物理传 或光信号 输媒体 或光信号 输媒体 -->
![](https://web-api.textin.com/ocr_image/external/53c42cdbcb7eb4b4.jpg)

图1-19 数据在各层之间的传递过程

假定主机1的应用进程AP1向主机2的应用进程AP2传送数据。AP1先将其数据交给本主机的第5层（应用层）。第5层加上必要的控制信息H5就变成了下一层的数据单元。第4层（运输层）收到这个数据单元后，加上本层的控制信息H4 ，再交给第3层（网络层），成为第3层的数据单元。依此类推。不过到了第2层（数据链路层）后，控制信息被分成两部分，分别加到本层数据单元的首部(H2)和尾部(T2)；而第1层（物理层）由于是比特流的传送，所以不再加上控制信息。请注意，传送比特流时应从首部开始传送。

OSI 参考模型把对等层次之间传送的数据单位称为该层的协议数据单元 PDU(Protocol Data Unit）。这个名词现已被许多非OSI标准采用。

当这一串的比特流离开主机1经网络的物理媒体传送到路由器时，就从路由器的第1层依次上升到第3层。每一层都根据控制信息进行必要的操作，然后将控制信息剥去，将该层剩下的数据单元上交给更高的一层。当分组上升到了第3层时，就根据首部中的目的地址查找路由器中的转发表，找出转发分组的接口，然后往下传送到第2层，加上新的首部和尾部后，再到最下面的第1层，然后在物理媒体上把每一个比特发送出去。

当这一串的比特流离开路由器到达目的站主机2时，就从主机2的第1层按照上面讲过的方式，依次上升到第5层。最后，把应用进程 AP1发送的数据交给目的站的应用进程AP2∘

可以用一个简单例子来比喻上述过程。有一封信从最高层向下传。每经过一层就包上一个新的信封，写上必要的地址信息。包有多个信封的信件传送到目的站后，从第1层起，每层拆开一个信封后就把信封中的信交给它的上一层。传到最高层后，取出发信人所发的信交给收信人。

虽然应用进程数据要经过如图1-19所示的复杂过程才能送到终点的应用进程，但这些复杂过程对用户来说，却都被屏蔽掉了，以致应用进程 AP1觉得好像是直接把数据交给了应用进程AP2。同理，任何两个同样的层次（例如在两个系统的第4层）之间，也好像如同图1-19中的水平虚线所示的那样，把数据（即数据单元加上控制信息）通过水平虚线直接传递给对方。这就是所谓的“对等层”（peer layers）之间的通信。我们以前经常提到的各层协议，实际上就是在各个对等层之间传递数据时的各项规定。

在文献中也还可以见到术语“协议栈”（protocol stack）。这是因为几个层次画在一起很像一个栈（stack）的结构。

<!-- ·33· -->

### 1.7.4 实体、协议、服务和服务访问点

当研究开放系统中的信息交换时，往往使用实体本（entity）这一较为抽象的名词表示任何可发送或接收信息的硬件或软件进程。在许多情况下，实体就是一个特定的软件模块。

**协议是控制两个对等实体（或多个实体）进行通信的规则的集合。协议的语法方面的**规则定义了所交换的信息的格式，而协议的语义方面的规则就定义了发送者或接收者所要完成的操作，例如，在何种条件下，数据必须重传或丢弃。

**在协议的控制下，两个对等实体间的通信使得本层能够向上一层提供服务。要实现本层协议，还需要使用下面一层所提供的服务。**

一定要弄清楚，协议和服务在概念上是很不一样的。

首先，协议的实现保证了能够向上一层提供服务。使用本层服务的实体只能看见服务而无法看见下面的协议。也就是说，下面的协议对上面的实体是透明的。

其次，协议是“水平的”，即协议是控制对等实体之间通信的规则。但服务是“垂直的”，即服务是由下层向上层通过层间接口提供的。另外，并非在一个层内完成的全部功能都称为服务。只有那些能够被高一层实体“看得见”的功能才能称之为“服务”。上层使用下层所提供的服务必须通过与下层交换一些命令，这些命令在OSI中称为服务原语。

在同一系统中相邻两层的实体进行交互（即交换信息）的地方，通常称为服务访问点SAP(Service Access Point）。服务访问点SAP是一个抽象的概念，它实际上就是一个逻辑接口，有点像邮政信箱（可以把邮件放入信箱和从信箱中取走邮件），但这种层间接口和两个设备之间的硬件接口（并行的或串行的）并不一样。OSI把层与层之间交换的数据的单位称为服务数据单元SDU(Service Data Unit)，它可以与PDU不一样。例如，可以是多个SDU 合成为一个PDU，也可以是一个SDU划分为几个PDU。

这样，在任何相邻两层之间的关系可概括为图1-20所示的那样。这里要注意的是，第n层的两个“实体(n)”之间通过“协议（n）”进行通信，而第n+1层的两个“实体（(n+1)"之间则通过另外的“协议(n+1)" 进行通信（每一层都使用不同的协议）。第n层向上面的第n+1层所提供的服务实际上已包括了在它以下各层所提供的服务。第n层的实体对第n+1层的实体就相当于一个服务提供者。在服务提供者的上一层的实体又称为“服务用户”，因为它使用下层服务提供者所提供的服务。

<!-- 服务用户 实体（ (n+1) 协 议(n+1) 实体 (n+1) 第 n+1 层 交换服务原语 交换服务原语 SAP SAP 第n层 服务提供者 实体（n） 协议（n） 实体（n） -->
![](https://web-api.textin.com/ocr_image/external/fad9cba27ea4b194.jpg)

图1-20 相邻两层之间的关系

计算机网络的协议还有一个很重要的特点，就是协议必须把所有不利的条件事先都估计到，而不能假定一切都是正常的和非常理想的。例如，两个朋友在电话中约好，下午3时在某公园门口碰头，并且约定“不见不散”。这就是一个很不科学的协议，因为任何一方临时有急事来不了而又无法通知对方时（如对方的电话或手机都无法接通），则另一方按照协议就必须永远等待下去。因此，看一台计算机网络协议是否正确，不能只看在正常情况下是**否正确，而且还必须非常仔细地检查这个协议能否应付各种异常情况。**

<!-- ·34· -->

下面是一个有关网络协议的非常著名的例子。

【例1-1】占据东、西两个山顶的蓝军1和蓝军2与驻扎在山谷的白军作战。其力量对比是：单独的蓝军1或蓝军2打不过白军，但蓝军1和蓝军2协同作战则可战胜白军。现蓝军1拟于次日正午向白军发起攻击。于是用计算机发送电文给蓝军2。但通信线路很不好，电文出错或丢失的可能性较大（没有电话可使用）。因此要求收到电文的友军必须送回一个确认电文。但此确认电文也可能出错或丢失。试问能否设计出一种协议使得蓝军1和蓝军2能够实现协同作战因而一定（即100％而不是99.999...%）取得胜利？

【解】蓝军1先发送：“拟于明日正午向白军发起攻击。请协同作战和确认。”

假定蓝军2收到电文后发回了确认。

然而现在蓝军1和蓝军2都不敢下决心进攻。因为，蓝军2不知道此确认电文对方是否正确地收到了。如未正确收到，则蓝军1必定不敢贸然进攻。在此情况下，自己单方面发起进攻就肯定要失败。因此，必须等待蓝军1发送“对<u>确认</u>的确认”。

假定蓝军2收到了蓝军1发来的确认。但蓝军1同样关心自己发出的确认是否已被对方正确地收到。因此还要等待蓝军2的“对<u>确认的确认</u>的确认”。

这样无限循环下去，蓝军1和蓝军2都始终无法确定自己最后发出的电文对方是否已经收到（图1-21）。因此，在本例题给出的条件下，没有一种协议可以使蓝军1和蓝军2能够100％地确保胜利。

<!-- 西边蓝军 东边蓝军 明日正午向白军发起攻击 确认 对“确认”的确认 对（“确认”的确认）的确认 ..· -->
![](https://web-api.textin.com/ocr_image/external/cf344be9f34bb7c2.jpg)

图1-21 无限循环的协议

这个例子告诉我们，看似非常简单的协议，设计起来要考虑的问题还是比较多的。

### 1.7.5 TCP/IP的体系结构

前面已经说过，TCP/IP的体系结构比较简单，它只有四层。图1-22给出了用这种四层协议表示方法的例子。请注意，图中的路由器在转发分组时最高只用到网络层而没有使用运输层和应用层。

<!-- ·35· -->

<!-- 主机A 主机B 应用层 路由器 应用层 运输层 运输层 网际层 网际层 网际层 网络 网络 网络 接口层 接口层 接口层 网络1 网络2 -->
![](https://web-api.textin.com/ocr_image/external/67f997a04d46b119.jpg)

图1-22 TCP/IP四层协议的表示方法举例

应当指出，技术的发展并不是遵循严格的OSI分层概念。实际上现在的互联网使用的TCP/IP 体系结构有时已经演变成为图1-23所示的那样，即某些应用程序可以直接使用IP 层，或甚至直接使用最下面的网络接口层［PETE11]，图1-23是这种表示方法。在图中，网络接口层有时也称为子网层。但本书不采用“子网层”这种容易弄混淆的表示方法，因为这里的“子网”是指一些局域网和某些广域网（如ATM网），但从IP层来看，这些网络属于数据链路层，也就是属于网络接口层。我们在第4章讲到IP地址时，将会讲到“子网划分”。但子网划分中的“子网”和图1-23中“子网层”中的“子网”是完全不同的概念。

<!-- 应用层 TCP UDP IP 网络接口层（子网层） -->
![](https://web-api.textin.com/ocr_image/external/a1406b232bd47d47.jpg)

图1-23 TCP/IP体系结构的另一种表示方法

还有一种方法，就是分层次画出具体的协议来表示TCP/IP 协议族（图1-24)，它的特点是上下两头大而中间小：应用层和网络接口层都有多种协议，而中间的IP层很小，上层的各种协议都向下汇聚到一个IP协议中。这种很像沙漏计时器形状的TCP/IP 协议族表明：**TCP/IP协议可以为各式各样的应用提供服务（所谓的everything** over IP)，同时TCP/IP协议也**允许IP协议在各式各样的网络构成的互联网上运行（所谓的IP** over everything）。正因为如此，互联网才会发展到今天的这种全球规模。从图1-24不难看出IP协议在互联网中的核心作用。

<!-- 应用层 HTTP SMTP DNS ... RTP 运输层 TCP UDP 网际层 IP 网络接口层 网络接口1 网络接口2 ··· 网络接口3 -->
![](https://web-api.textin.com/ocr_image/external/9e7d1f6240af5a39.jpg)

图1-24 沙漏计时器形状的TCP/IP协议族示意

<!-- ·36· -->

【例1-2】利用协议栈的概念，说明在互联网中常用的客户-服务器工作方式。

【解】图1-25中的主机A和主机B都各有自己的协议栈。主机A中的应用进程（即客户进程）的位置在最高的应用层。这个客户进程向主机B应用层的服务器进程发出请求，请求建立连接（图中的①）。然后，主机B中的服务器进程接受A的客户进程发来的请求（图中的②）。所有这些通信，实际上都需要使用下面各层所提供的服务。但若仅仅考虑客户进程和服务器进程的交互，则可把它们之间的交互看成是如图中的水平虚线所示的那样。

<!-- 主机A 主机B ①发起连接建立请求 应用层 服务器 ②接受连接建立请求 运输层 运输层 网络层 网络层 数据链路层 数据链路层 物理层 物理层 互联网 -->
![](https://web-api.textin.com/ocr_image/external/cadd3779112047e1.jpg)

图1-25 在应用层的客户进程和服务器进程的交互

图1-26画出了三台主机的协议栈。主机C的应用层中同时有两个服务器进程在通信。服务器1在和主机A中的客户1通信，而服务器2在和主机B中的客户2通信。有的服务器进程可以同时向几百个或更多的客户进程提供服务。

<!-- 主机A 主机C 主机B 应用层 应用层 客户2 运输层 运输层 运输层 网络层 网络层 网络层 数据链路层 数据链路层 数据链路层 物理层 物理层 物理层 互联网 -->
![](https://web-api.textin.com/ocr_image/external/28976a0dd4c8a9dd.jpg)

图1-26 主机C的两个服务器进程分别向A和B的客户进程提供服务

## 本章的重要概念

·计算机网络（可简称为网络）把许多计算机连接在一起，而互连网则把许多网络连接在一起，是网络的网络。

·以小写字母i开始的 internet（互连网）是通用名词，它泛指由多个计算机网络互连而成的网络。在这些网络之间的通信协议（即通信规则）可以是任意的。

·以大写字母I开始的 Internet（互联网）是专用名词，它指当前全球最大的、开放

<!-- ·37· -->

的、由众多网络相互连接而成的特定互连网，并采用TCP/IP 协议族作为通信规则，且其前身是美国的ARPANET。Internet的推荐译名是“因特网”，但很少被使用。

·互联网现在采用存储转发的分组交换技术，以及三层ISP结构。

·互联网按工作方式可划分为边缘部分与核心部分。主机在网络的边缘部分，其作用是进行信息处理。路由器在网络的核心部分，其作用是按存储转发方式进行分组交换。

·计算机通信是计算机中的进程（即运行着的程序）之间的通信。计算机网络采用的通信方式是客户-服务器方式和对等连接方式（P2P方式）。

·客户和服务器都是指通信中所涉及的应用进程。客户是服务请求方，服务器是服务提供方。

·按作用范围的不同，计算机网络分为广域网WAN、城域网MAN、局域网LAN和个人区域网PAN。

·计算机网络最常用的性能指标是：速率、带宽、吞吐量、时延（发送时延、传播时延、处理时延、排队时延）、时延带宽积、往返时间和信道（或网络）利用率。

·网络协议即协议，是为进行网络中的数据交换而建立的规则。计算机网络的各层及其协议的集合，称为网络的体系结构。

·五层协议的体系结构由应用层、运输层、网络层（或网际层）、数据链路层和物理层组成。运输层最重要的协议是TCP和UDP协议，而网络层最重要的协议是IP 协议。

## 习题

**1-01** 计算机网络可以向用户提供哪些服务？

**1-02** 试简述分组交换的要点。

**1-03** 试从多个方面比较电路交换、报文交换和分组交换的主要优缺点。

**1-04** 为什么说互联网是自印刷术以来人类在存储和交换信息领域中的最大变革？

**1-05** 互联网基础结构的发展大致分为哪几个阶段？请指出这几个阶段最主要的特点。

**1-06** 简述互联网标准制定的几个阶段。

**1-07** 小写和大写开头的英文名字internet和Internet在意思上有何重要区别？

**1-08** 计算机网络都有哪些类别？各种类别的网络都有哪些特点？

**1-09** 计算机网络中的主干网和本地接入网的主要区别是什么？

**1-10** 试在下列条件下比较电路交换和分组交换。要传送的报文共x (bit）。从源点到终点共经过k段链路，每段链路的传播时延为d(s)，数据率为b (bit/s）。在电路交换时电路的建立时间为s(s）。在分组交换时分组长度为d(bit)，且各结点的排队等待时间可忽略不计。问在怎样的条件下，分组交换的时延比电路交换的要小？（提示：画一下草图观察k段链路共有几个结点。）

**1-11** 在上题的分组交换网中，设报文长度和分组长度分别为x和(p+h)（bit)，其中d为分组的数据部分的长度，而h为每个分组所带的控制信息固定长度，与d的大小无关。通信的两端共经过k段链路。链路的数据率为b (bit/s)，但传播时延和结点的排队时间均可忽略不计。若打算使总的时延为最小，问分组的数据部分长度p应取为多大？

<!-- ·38· -->

（提示：参考图1-12的分组交换部分，观察总的时延由哪几部分组成。）

**1-12** 互联网的两大组成部分（边缘部分与核心部分）的特点是什么？它们的工作方式各有什么特点？

**1-13** 客户-服务器方式与P2P对等通信方式的主要区别是什么？有没有相同的地方？

**1-14** 计算机网络有哪些常用的性能指标？

**1-15** 假定网络的利用率达到了90%。试估算一下现在的网络时延是它的最小值的多少倍？

**1-16** 计算机通信网有哪些非性能特征？非性能特征与性能指标有什么区别？

**1-17** 收发两端之间的传输距离为1000km，信号在媒体上的传播速率为2x108m/s。试计算以下两种情况的发送时延和传播时延：

（1）数据长度为107bit，数据发送速率为 100kbit/s。

（2）数据长度为103bit，数据发送速率为1Gbit/s。

从以上计算结果可得出什么结论？

**1-18** 假设信号在媒体上的传播速率为2.3x10∼m/s。媒体长度l分别为：

（1)10cm（网络接口卡）

（2)100m （局域网）

（3)100km （城域网）

（4)5000km（广域网）

试计算当数据率为1Mbit/s和10 Gbit/s时在以上媒体中正在传播的比特数。

**1-19** 长度为100字节的应用层数据交给运输层传送，需加上20字节的TCP首部。再交给网络层传送，需加上20字节的IP首部。最后交给数据链路层的以太网传送，加上首部和尾部共18字节。试求数据的传输效率。数据的传输效率是指发送的应用层数据除以所发送的总数据（即应用数据加上各种首部和尾部的额外开销）。

若应用层数据长度为1000字节，数据的传输效率是多少？

**1-20** 网络体系结构为什么要采用分层次的结构？试举出一些与分层体系结构的思想相似的日常生活的例子。

**1-21** 协议与服务有何区别？有何关系？

**1-22** 网络协议的三个要素是什么？各有什么含义？

**1-23** 为什么一个网络协议必须把各种不利的情况都考虑到？

**1-24** 试述具有五层协议的网络体系结构的要点，包括各层的主要功能。

**1-25** 试举出日常生活中有关“透明”这种名词的例子。

**1-26** 试解释以下名词：协议栈、实体、对等层、协议数据单元、服务访问点、客户、服务器、客户-服务器方式。

**1-27** 试解释 everything over IP和IP over everything的含义。

**1-28** 假定要在网络上传送1.5MB的文件。设分组长度为1KB，往返时间RTT=80ms。传送数据之前还需要有建立TCP连接的时间，这时间是2×RTT=160ms。试计算在以下几种情况下接收方收完该文件的最后一个比特所需的时间。

（1）数据发送速率为10Mbit/s，数据分组可以连续发送。

（2）数据发送速率为10 Mbit/s，但每发送完一个分组后要等待一个RTT时间才能再发送下一个分组。

（3）数据发送速率极快，可以不考虑发送数据所需的时间。但规定在每一个RTT往返时间内只能发送20个分组。

<!-- ·39· -->

（4）数据发送速率极快，可以不考虑发送数据所需的时间。但在第一个RTT往返时间内只能发送一个分组，在第二个RTT内可发送两个分组，在第三个RTT内可发送四个分组（即23-1=22=4个分组）。（这种发送方式见教材第5章TCP的拥塞控制部分。）

**1-29** 有一个点对点链路，长度为50km。若数据在此链路上的传播速度为 2x108m/s,，试问链路的带宽应为多少才能使传播时延和发送100字节的分组的发送时延一样大？如果发送的是512字节长的分组，结果又应如何？

1-30 有一个点对点链路，长度为20000km。数据的发送速率是1kbit/s，要发送的数据有100 bit。数据在此链路上的传播速度为2×108m/s。假定我们可以看见在线路上传输的比特，试画出我们看到的线路上的比特（画两个图，一个在100 bit刚刚发送完时，另一个是再经过0.05s后）。

**1-31** 条件同上题。但数据的发送速率改为1 Mbit/s。和上题的结果相比较，你可以得出什么结论？

**1-32** 以1 Gbit/s的速率发送数据。试问在以距离或时间为横坐标时，一个比特的宽度分别是多少？

**1-33**我们在互联网上传送数据经常是从某个源点传送到某个终点，而并非传送过去又再传送回来。那么为什么往返时间RTT是个很重要的性能指标呢？

<!-- ·40· -->

**第2章 物理层**

本章首先讨论物理层的基本概念。然后介绍有关数据通信的重要概念，以及各种传输媒体的主要特点，但传输媒体本身并不属于物理层的范围。在讨论几种常用的信道复用技术后，对数字传输系统进行简单介绍。最后再讨论几种常用的宽带接入技术。

对于已具备一些必要的通信基础知识的读者，可以跳过本章的许多部分的内容。

本章最重要的内容是：

（1）物理层的任务。

（2）几种常用的信道复用技术。

（3）几种常用的宽带接入技术，主要是ADSL和FTTx。

**2.1 物理层的基本概念**

首先要强调指出，物理层考虑的是怎样才能在连接各种计算机的传输媒体上传输数据比特流，而不是指具体的传输媒体。大家知道，现有的计算机网络中的硬件设备和传输媒体的种类非常繁多，而通信手段也有许多不同方式。物理层的作用正是要尽可能地屏蔽掉这些传输媒体和通信手段的差异，使物理层上面的数据链路层感觉不到这些差异，这样就可使数据链路层只需要考虑如何完成本层的协议和服务，而不必考虑网络具体的传输媒体和通信手段是什么。用于物理层的协议也常称为物理层规程（procedure）。其实物理层规程就是物理层协议。只是在“协议”这个名词出现之前人们就先使用了“规程”这一名词。

可以将物理层的主要任务描述为确定与传输媒体的接口有关的一些特性，即：

**（1）机械特性** 指明接口所用接线器的形状和尺寸、引脚数目和排列、固定和锁定装置，等。平时常见的各种规格的接插件都有严格的标准化的规定。

**（2）电气特性** 指明在接口电缆的各条线上出现的电压的范围。

**（3）功能特性** 指明某条线上出现的某一电平的电压的意义。

**（4）过程特性** 指明对于不同功能的各种可能事件的出现顺序。

大家知道，数据在计算机内部多采用并行传输方式。但数据在通信线路（传输媒体）上的传输方式一般都是串行传输（这是出于经济上的考虑），即逐个比特按照时间顺序传输。因此物理层还要完成传输方式的转换。

具体的物理层协议种类较多。这是因为物理连接的方式很多（例如，可以是点对点的，也可以采用多点连接或广播连接），而传输媒体的种类也非常之多（如架空明线、双绞线、对称电缆、同轴电缆、光缆，以及各种波段的无线信道等）。因此在学习物理层时，应将重点放在掌握基本概念上。

考虑到使用本教材的一部分读者可能没有学过“接口与通信”或有关数据通信的课程，因此我们利用下面的2.2节简单地介绍一下有关现代通信的一些最基本的知识和最重要的结论（不给出证明）。已具有这部分知识的读者可略过这部分内容。

<!-- ·41· -->

### 2.2 数据通信的基础知识

#### 2.2.1 数据通信系统的模型

下面我们通过一个最简单的例子来说明数据通信系统的模型。这个例子就是两个计算机经过普通电话机的连线，再经过公用电话网进行通信。

如图2-1所示，一个数据通信系统可划分为三大部分，即源系统（或发送端、发送**方）、传输系统（或传输网络）和目的系统（或接收端、接收方）。**

<!-- 数据通信系统 输入汉字 数字比特流 模拟信号 模拟信号 数字比特流 显示汉字 mn 公用电话网 计算机 调制解调器 调制解调器 计算机 源系统 传输系统 目的系统 源点 发送器 传输系统 接收器 终点 输入 输入 发送的信号 接收的信号 输出 输出 信息 数据 数据 信息 -->
![](https://web-api.textin.com/ocr_image/external/51ae69fcac9e052e.jpg)

图2-1 数据通信系统的模型

源系统一般包括以下两个部分：

·源点（source） 源点设备产生要传输的数据，例如，从计算机的键盘输入汉字，计算机产生输出的数字比特流。源点又称为源站，或信源。

·**发送器** 通常源点生成的数字比特流要通过发送器编码后才能够在传输系统中进行传输。典型的发送器就是调制器。现在很多计算机使用内置的调制解调器（包含调制器和解调器），用户在计算机外面看不见调制解调器。

目的系统一般也包括以下两个部分：

**·接收器** 接收传输系统传送过来的信号，并把它转换为能够被目的设备处理的信息。典型的接收器就是解调器，它把来自传输线路上的模拟信号进行解调，提取出在发送端置入的消息，还原出发送端产生的数字比特流。

·终点（destination） 终点设备从接收器获取传送来的数字比特流，然后把信息输出（例如，把汉字在计算机屏幕上显示出来）。终点又称为目的站，或信宿。

在源系统和目的系统之间的传输系统可以是简单的传输线，也可以是连接在源系统和目的系统之间的复杂网络系统。

图2-1所示的数据通信系统，说它是计算机网络也可以。这里我们使用数据通信系统这个名词，主要是为了从通信的角度来介绍一个数据通信系统中的一些要素，而有些数据通信的要素在计算机网络中可能就不去讨论它们了。

下面我们先要介绍一些常用术语。

通信的目的是传送消息（message）。如话音、文字、图像、视频等都是消息。数据（data）是运送消息的实体。根据RFC 4949给出的定义，数据是使用特定方式表示的信息，通常是有意义的符号序列。这种信息的表示可用计算机或其他机器（或人）处理或产生。信号（signal）则是数据的电气或电磁的表现。

<!-- ·42· -->

根据信号中代表消息的参数的取值方式不同，信号可分为以下两大类：

（1）模拟信号，或连续信号-代表消息的参数的取值是连续的。例如在图2-1中，用户家中的调制解调器到电话端局之间的用户线上传送的就是模拟信号。

（2）数字信号，或离散信号-代表消息的参数的取值是离散的。例如在图2-1中，用户家中的计算机到调制解调器之间，或在电话网中继线上传送的就是数字信号。在使用时间域（或简称为时域）的波形表示数字信号时，代表不同离散数值的基本波形就称为码元①。在使用二进制编码时，只有两种不同的码元，一种代表0状态而另一种代表1状态。

下面我们介绍有关信道的几个基本概念。

#### 2.2.2 有关信道的几个基本概念

在许多情况下，我们要使用“信道（channel）”这一名词。信道和电路并不等同。信道一般都是用来表示向某一个方向传送信息的媒体。因此，一条通信电路往往包含一条发送信道和一条接收信道。

从通信的双方信息交互的方式来看，可以有以下三种基本方式：

**（1）单向通信** 又称为单工通信，即只能有一个方向的通信而没有反方向的交互。无线电广播或有线电广播以及电视广播就属于这种类型。

**（2）双向交替通信** 又称为半双工通信，即通信的双方都可以发送信息，但不能双方同时发送（当然也就不能同时接收）。这种通信方式是一方发送另一方接收，过一段时间后可以再反过来。

**（3）双向同时通信** 又称为全双工通信，即通信的双方可以同时发送和接收信息。

单向通信只需要一条信道，而双向交替通信或双向同时通信则都需要两条信道（每个方向各一条）。显然，双向同时通信的传输效率最高。

这里要提醒读者注意，有时人们也常用“单工”这个名词表示“双向交替通信”。如常说的“单工电台”并不是只能进行单向通信。正因为如此，ITU-T才不采用“单工”、“半双工”和“全双工”这些容易弄混的术语作为正式的名词。

来自信源的信号常称为基带信号（即基本频带信号）。像计算机输出的代表各种文字或图像文件的数据信号都属于基带信号。基带信号往往包含有较多的低频成分，甚至有直流成分，而许多信道并不能传输这种低频分量或直流分量。为了解决这一问题，就必须对基带信号进行调制（modulation）。

调制可分为两大类。一类是仅仅对基带信号的波形进行变换，使它能够与信道特性相适应。变换后的信号仍然是基带信号。这类调制称为基带调制。由于这种基带调制是把数字信号转换为另一种形式的数字信号，因此大家更愿意把这种过程称为编码（coding）。另一类调制则需要使用载波（carrier）进行调制，把基带信号的频率范围搬移到较高的频段，并转换为模拟信号，这样就能够更好地在模拟信道中传输。经过载波调制后的信号称为带通信号（即仅在一段频率范围内能够通过信道），而使用载波的调制称为带通调制。

①注：一个码元所携带的信息量是不固定的，而是由调制方式和编码方式决定的。

<!-- ·43· -->

##### （1）常用编码方式

常用编码方式如图2-2所示。

<!-- 比特流 1 0 0 0 1 0 0 1 1 1 不归零制 归零制 曼彻斯特 差分曼彻斯特 -->
![](https://web-api.textin.com/ocr_image/external/e7d84f2b88b0b3dd.jpg)

图2-2 数字信号常用的编码方式

**·不归零制** 正电平代表1，负电平代表0。

·归零制 正脉冲代表1，负脉冲代表0。

**·曼彻斯特编码** 位周期中心的向上跳变代表0，位周期中心的向下跳变代表1。但也可反过来定义。

**·差分曼彻斯特编码** 在每一位的中心处始终都有跳变。位开始边界有跳变代表0，而位开始边界没有跳变代表1。

从信号波形中可以看出，曼彻斯特（Manchester）编码产生的信号频率比不归零制高。从自同步能力来看，不归零制不能从信号波形本身中提取信号时钟频率（这叫做没有自同步能力），而曼彻斯特编码具有自同步能力。

##### （2）基本的带通调制方法

图2-3给出了最基本的调制方法。

<!-- 基带信号 0 1 0 0 1 1 1 0 0 调幅 调频 调相 -->
![](https://web-api.textin.com/ocr_image/external/beb16a15a24e4c1b.jpg)

图2-3 最基本的三种调制方法

**·调幅（AM）** 即载波的振幅随基带数字信号而变化。例如，0或1分别对应于无载波或有载波输出。

· 调频（FM） 即载波的频率随基带数字信号而变化。例如，0或1分别对应于频率fi或f2。

·调相（PM） 即载波的初始相位随基带数字信号而变化。例如，0或1分别对应于相位0度或180度。

为了达到更高的信息传输速率，必须采用技术上更为复杂的多元制的振幅相位混合调制方法。例如，正交振幅调制QAM(Quadrature Amplitude Modulation）。

有了上述的一些基本概念之后，我们再讨论信道的极限容量。

<!-- ·44· -->

#### 2.2.3 信道的极限容量

几十年来，通信领域的学者一直在努力寻找提高数据传输速率的途径。这个问题很复杂，因为任何实际的信道都不是理想的，都不可能以任意高的速率进行传送。我们知道，数字通信的优点就是：虽然信号在信道上传输时会不可避免地产生失真，但在接收端只要我们从失真的波形中能够识别出原来的信号，那么这种失真对通信质量就没有影响。例如，图2-4(a）表示信号通过实际的信道传输后虽然有失真，但在接收端还可识别并恢复出原来的码元。但图2-4(b）就不同了，这时信号的失真已很严重，在接收端无法识别码元是1还是0。码元传输的速率越高，或信号传输的距离越远，或噪声干扰越大，或传输媒体质量越差，在接收端的波形的失真就越严重。

<!-- 实际的信道 有失真 （带宽受限、有噪声、干扰和失真） 但可识别 发送信号波形 接收信号波形 -->
![](https://web-api.textin.com/ocr_image/external/704a3b2e78313167.jpg)

（a）有失真但可识别

<!-- 实际的信道 失真大 （带宽受限、有噪声、干扰和失真） 无法识别 发送信号波形 接收信号波形 -->
![](https://web-api.textin.com/ocr_image/external/ab5c203bca09e9f3.jpg)

（b）失真大，无法识别

图2-4 数字信号通过实际的信道

从概念上讲，限制码元在信道上的传输速率的因素有以下两个。

#### （1）信道能够通过的频率范围

具体的信道所能通过的频率范围总是有限的。信号中的许多高频分量往往不能通过信道。像图2-4所示的发送信号是一种典型的矩形脉冲信号，它包含很丰富的高频分量。如果信号中的高频分量在传输时受到衰减，那么在接收端收到的波形前沿和后沿就变得不那么陡峭了，每一个码元所占的时间界限也不再是很明确的，而是前后都拖了“尾巴”。这样，在接收端收到的信号波形就失去了码元之间的清晰界限。这种现象叫做码间串扰。严重的码间串扰使得本来分得很清楚的一串码元变得模糊而无法识别。早在1924年，奈奎斯特（Nyquist）就推导出了著名的奈氏准则。他给出了在假定的理想条件下，为了避免码间串扰，码元的传输速率的上限值。奈氏准则的推导已超出本书的范围，这可在通信原理教科书中查阅到。我们需要知道的就是：**在任何信道中，码元传输的速率是有上限的，传输速率超过此上限，就会出现严重的码间串扰的问题，使接收端对码元的判决（即识别）成为不可能。**

如果信道的频带越宽，也就是能够通过的信号高频分量越多，那么就可以用更高的速率传送码元而不出现码间串扰。

#### （2）信噪比

噪声存在于所有的电子设备和通信信道中。由于噪声是随机产生的，它的瞬时值有时会很大，因此噪声会使接收端对码元的判决产生错误（1误判为0或0误判为1）。但噪声的影响是相对的。如果信号相对较强，那么噪声的影响就相对较小。因此，信噪比就很重要。所谓信噪比就是信号的平均功率和噪声的平均功率之比，常记为S/N，并用分贝（dB）作为度量单位。即：

<!-- ·45· -->

信噪比(dB)=10log10(S/N) (dB) (2-1)

例如，当S/N=10时，信噪比为10dB，而当 S/N=1000时，信噪比为30dB。

在1948年，信息论的创始人香农（Shannon）推导出了著名的香农公式。香农公式指出：**信道的极限信息传输速率**C**是**

C=Wlog2(1+S/N) (bit/s) (2-2)

式中， M为信道的带宽（以 Hz为单位）; S为信道内所传信号的平均功率； N为信道内部的高斯噪声功率。香农公式的推导可在通信原理教科书中找到。这里只给出其结果。

**香农公式表明，信道的带宽或信道中的信噪比越大，信息的极限传输速率就越高。香**农公式指出了信息传输速率的上限。香农公式的意义在于：只要信息传输速率低于信道的极限信息传输速率，就一定存在某种办法来实现无差错的传输。不过，香农没有告诉我们具体的实现方法。这要由研究通信的专家去寻找。

从以上所讲的不难看出，对于频带宽度已确定的信道，如果信噪比也不能再提高了，并且码元传输速率也达到了上限值，那么还有什么办法提高信息的传输速率呢？这就是用编码的方法让每一个码元携带更多比特的信息量。我们可以用个简单的例子来说明这个问题。

假定我们的基带信号是：

101011000110111010...

如果直接传送，则每一个码元所携带的信息量是1bit。现将信号中的每3个比特编为一个组，即101,011,000,110,111,010,..．。3个比特共有8种不同的排列。我们可以用不同的调制方法来表示这样的信号。例如，用8种不同的振幅，或8种不同的频率，或8种不同的相位进行调制。假定我们采用相位调制，用相位φ0表示000， φ1表示001， φ2表示010,...，φ7表示111。这样，原来的18个码元的信号就转换为由6个新的码元（即由原来的每三个bit构成一个新的码元）组成的信号：

101011000110111010⋯=φ5φ3φ0φ6φ7φ2⋯

也就是说，若以同样的速率发送码元，则同样时间所传送的信息量就提高到了3倍。

自从香农公式发表后，各种新的信号处理和调制方法不断出现，其目的都是为了尽可能地接近香农公式给出的传输速率极限。在实际信道上能够达到的信息传输速率要比香农的极限传输速率低不少。这是因为在实际信道中，信号还要受到其他一些损伤，如各种脉冲干扰和在传输中产生的失真，等等。这些因素在香农公式的推导过程中并未考虑。

**2.3 物理层下面的传输媒体**

传输媒体也称为传输介质或传输媒介，它就是数据传输系统中在发送器和接收器之间的物理通路。传输媒体可分为两大类，即导引型传输媒体和非导引型传输媒体（这里的“导引型”的英文就是guided，也可译为“导向传输媒体”）。在导引型传输媒体中，电磁波被导引沿着固体媒体（铜线或光纤）传播，而非导引型传输媒体就是指自由空间，在非导引型传输媒体中电磁波的传输常称为无线传输。图2-5是电信领域使用的电磁波的频谱。

<!-- ·46· -->

<!-- f(Hz) 10° 102 104 106 108 1010 1012 1014 1016 1018 1020 1022 1024 低频 无线电 微波 红外线 X射线 γ射线 可见光 紫外线 f(Hz)104 105 106 107 108 109 1010 1011 1012 1013 1014 1015 1016 双绞线 卫星 光纤 同轴电缆 地面微波 海事 调幅 调频 移动 无线电 无线电 无线电 无线电 电视 波段 LF MF HF VHF UHF SHF EHF THF -->
![](https://web-api.textin.com/ocr_image/external/a37899095996072c.jpg)

图2-5 电信领域使用的电磁波的频谱

#### 2.3.1 导引型传输媒体

#### 1．双绞线

双绞线也称为双扭线，是最古老但又是最常用的传输媒体。把两根互相绝缘的铜导线并排放在一起，然后用规则的方法绞合（twist）起来就构成了双绞线。绞合可减少对相邻导线的电磁干扰。使用双绞线最多的地方就是到处都有的电话系统。几乎所有的电话都用双绞线连接到电话交换机。这段从用户电话机到交换机的双绞线称为用户线或用户环路（subscriber loop）。通常将一定数量的这种双绞线捆成电缆，在其外面包上护套。

模拟传输和数字传输都可以使用双绞线，其通信距离一般为几到十几公里。距离太长时就要加放大器以便将衰减了的信号放大到合适的数值（对于模拟传输），或者加上中继器以便对失真了的数字信号进行整形（对于数字传输）。导线越粗，其通信距离就越远，但导线的价格也越高。在数字传输时，若传输速率为每秒几个兆比特，则传输距离可达几公里。由于双绞线的价格便宜且性能也不错，因此使用十分广泛。

为了提高双绞线抗电磁干扰的能力，可以在双绞线的外面再加上一层用金属丝编织成的屏蔽层。这就是屏蔽双绞线，简称为STP(Shielded Twisted Pair）。它的价格当然比无屏蔽双绞线UTP(Unshielded Twisted Pair）要贵一些。图2-6是无屏蔽双绞线和屏蔽双绞线的示意图。

<!-- 聚氯乙 绝缘层 铜线 烯套层 -->
![](https://web-api.textin.com/ocr_image/external/c0db846d8abfa003.jpg)

（a）无屏蔽双绞线（b）屏蔽双绞线

<!-- 聚氯乙烯 屏蔽层绝缘层铜线 套层 -->
![](https://web-api.textin.com/ocr_image/external/c2bd749028ecc9a2.jpg)

<!-- 3类线 5类线 -->
![](https://web-api.textin.com/ocr_image/external/cdf302bd39df28f2.jpg)

（c）不同的绞合度的双绞线

图2-6 双绞线的示意图

1991年，美国电子工业协会EIA(Electronic Industries Association）和电信行业协会TIA （Telecommunications Industries Association）联合发布了标准EIA/TIA-568，它的名称是“商用建筑物电信布线标准”（Commercial Building Telecommunications Cabling Standard）。这个标准规定了用于室内传送数据的无屏蔽双绞线和屏蔽双绞线的标准。1995年将布线标准更新为EIA/TIA-568-A。此标准规定了5个种类的UTP标准（从1类线到5类线）。对传送数据来说，现在最常用的UTP是5类线（Category 5或CAT5）。5类线与3类线的最主要的区别就是大大增加了每单位长度的绞合次数。3类线的绞合长度是7.5至10cm，而5类线的绞合长度是0.6至0.85cm。图2-6(c）表示5类线具有比3类线更高的绞合度。此外，5类线在线对间的绞合度和线对内两根导线的绞合度都经过了更精心的设计，并在生产中加以严格的控制，使干扰在一定程度上得以抵消，从而提高了线路的传输速率。表2-1给出了常用的绞合线的类别、带宽和典型应用。

<!-- ·47· -->

**表2-1 常用的绞合线的类别、带宽和典型应用**

<table border="1" ><tr>
<td colspan="1" rowspan="1">绞合线类别</td>
<td colspan="1" rowspan="1">带宽</td>
<td colspan="1" rowspan="1">线缆特点</td>
<td colspan="1" rowspan="1">典型应用</td>
</tr><tr>
<td colspan="1" rowspan="1">3 </td>
<td colspan="1" rowspan="1">16 MHz </td>
<td colspan="1" rowspan="1">2 对4 芯双绞线</td>
<td colspan="1" rowspan="1">模拟电话：曾用于传统以太网（10  Mbit /s ）</td>
</tr><tr>
<td colspan="1" rowspan="1">4 </td>
<td colspan="1" rowspan="1">20MHz </td>
<td colspan="1" rowspan="1">4 对8 芯双绞线</td>
<td colspan="1" rowspan="1">曾用于令牌局域网</td>
</tr><tr>
<td colspan="1" rowspan="1">5 </td>
<td colspan="1" rowspan="1">100MHz </td>
<td colspan="1" rowspan="1">与4 类相比增加了绞合度</td>
<td colspan="1" rowspan="1">传输速率不超过100Mbit /s 的应用</td>
</tr><tr>
<td colspan="1" rowspan="1">5E（超5 类）</td>
<td colspan="1" rowspan="1">125MHz </td>
<td colspan="1" rowspan="1">与5 类相比衰减更小</td>
<td colspan="1" rowspan="1">传输速率不超过1Gbit /s 的应用</td>
</tr><tr>
<td colspan="1" rowspan="1">6 </td>
<td colspan="1" rowspan="1">250MHz </td>
<td colspan="1" rowspan="1">与5 类相比改善了串扰等性能</td>
<td colspan="1" rowspan="1">传输速率高于1Gbit /s 的应用</td>
</tr><tr>
<td colspan="1" rowspan="1">7 </td>
<td colspan="1" rowspan="1">600MHz </td>
<td colspan="1" rowspan="1">使用屏蔽双绞线</td>
<td colspan="1" rowspan="1">传输速率高于10Gbit /s 的应用</td>
</tr></table>

无论是哪种类别的双绞线，衰减都随频率的升高而增大。使用更粗的导线可以降低衰减，但却增加了导线的重量和价格。信号应当有足够大的振幅，以便在噪声干扰下能够在接收端正确地被检测出来。双绞线的最高速率还与数字信号的编码方法有很大的关系。

### 2．同轴电缆

同轴电缆由内导体铜质芯线（单股实心线或多股绞合线）、绝缘层、网状编织的外导体屏蔽层（也可以是单股的）以及保护塑料外层所组成（图2-7）。由于外导体屏蔽层的作用，同轴电缆具有很好的抗干扰特性，被广泛用于传输较高速率的数据。

<!-- 绝缘保护套层 外导体屏蔽层 绝缘层 内导体 -->
![](https://web-api.textin.com/ocr_image/external/b96a65559337c340.jpg)

图2-7 同轴电缆的结构

在局域网发展的初期曾广泛地使用同轴电缆作为传输媒体。但随着技术的进步，在局域网领域基本上都采用双绞线作为传输媒体。目前同轴电缆主要用在有线电视网的居民小区中。同轴电缆的带宽取决于电缆的质量。目前高质量的同轴电缆的带宽已接近1GHz。

### 3．光缆

从20世纪70年代到现在，通信和计算机都发展得非常快。据统计，计算机的运行速度大约每10年提高10倍。但在通信领域里，信息的传输速率则提高得更快，从20世纪70年代的56 kbit/s 提高到现在的100 Gbit/s（使用光纤通信技术），并且这个速率还在继续提高。因此光纤通信就成为现代通信技术中的一个十分重要的领域。

光纤通信就是利用光导纤维（以下简称为光纤）传递光脉冲来进行通信。有光脉冲相当于1，而没有光脉冲相当于0。由于可见光的频率非常高，约为108MHz的量级，因此一

<!-- ·48· -->

个光纤通信系统的传输带宽远远大于目前其他各种传输媒体的带宽。

光纤是光纤通信的传输媒体。在发送端有光源，可以采用发光二极管或半导体激光器，它们在电脉冲的作用下能产生出光脉冲。在接收端利用光电二极管做成光检测器，在检测到光脉冲时可还原出电脉冲。

光纤通常由非常透明的石英玻璃拉成细丝，主要由纤芯和包层构成双层通信圆柱体。纤芯很细，其直径只有8∼100μm(1μm=10-6m)。。光波正是通过纤芯进行传导的。包层较纤芯有较低的折射率。当光线从高折射率的媒体射向低折射率的媒体时，其折射角将大于入射角（图2-8）。因此，如果入射角足够大，就会出现全反射，即光线碰到包层时就会折射回纤芯。这个过程不断重复，光也就沿着光纤传输下去。

<!-- 包层 折射角 纤芯 包层（低折射率的媒体） 纤芯（高折射率的媒体） 入射角 包层（低折射率的媒体） -->
![](https://web-api.textin.com/ocr_image/external/294c646d286acaad.jpg)

图2-8 光线在光纤中的折射

图2-9画出了光波在纤芯中传播的示意图。现代的生产工艺可以制造出超低损耗的光纤，即做到光线在纤芯中传输数公里而基本上没有什么衰耗。这一点乃是光纤通信得到飞速发展的最关键因素。

<!-- 低折射率（包层） 高折射率（纤芯） 光线在纤芯中传输的方式是不断地全反射 -->
![](https://web-api.textin.com/ocr_image/external/894377fdf9743ffa.jpg)

图2-9 光波在纤芯中的传播

图2-9中只画了一条光线。实际上，只要从纤芯中射到纤芯表面的光线的入射角大于某个临界角度，就可产生全反射。因此，可以存在多条不同角度入射的光线在一条光纤中传输。这种光纤就称为多模光纤（图2-10(a)）。光脉冲在多模光纤中传输时会逐渐展宽，造成失真。因此多模光纤只适合于近距离传输。若光纤的直径减小到只有一个光的波长，则光纤就像一根波导那样，它可使光线一直向前传播，而不会产生多次反射。这样的光纤称为单模光纤（图2-10(b)）。单模光纤的纤芯很细，其直径只有几个微米，制造起来成本较高。同时单模光纤的光源要使用昂贵的半导体激光器，而不能使用较便宜的发光二极管。但单模光1的衰耗较小，在100Gbit/s的高速率下可传输100公里而不必采用中继器。

在光纤通信中常用的三个波段的中心分别位于850nm,1300nm和 1550∼nm(1)。后两种情况的衰减都较小。 850nm 波段的衰减较大，但在此波段的其他特性均较好。所有这三个波段都具有25000\~30000GHz的带宽，可见光纤的通信容量非常大。

$\textcircled {1}$  注：单位nm是“纳米”，即10-9米。 1310nm=1.31m。

<!-- ·49· -->

<!-- 输入脉冲 输出脉冲 A へ (a) 输入脉冲 输出脉冲 -->
![](https://web-api.textin.com/ocr_image/external/807932bb80c5f415.jpg)

(b)

图2-10 多模光纤（a）和单模光纤（b）的比较

由于光纤非常细，连包层一起的直径也不到0.2mm。因此必须将光纤做成很结实的光缆。一根光缆少则只有一根光纤，多则可包括数十至数百根光纤，再加上加强芯和填充物就可以大大提高其机械强度。必要时还可放入远供电源线。最后加上包带层和外护套，就可以使抗拉强度达到几公斤，完全可以满足工程施工的强度要求。图2-11为四芯光缆剖面的示意图。

<!-- 外护套 远供电源线 光纤及其包层 填充物 加强芯 包带层 -->
![](https://web-api.textin.com/ocr_image/external/e2b015b0036954fa.jpg)

图2-11 四芯光缆剖面的示意图

光纤不仅具有通信容量非常大的优点，而且还具有其他的一些特点：

（1）传输损耗小，中继距离长，对远距离传输特别经济。

（2）抗雷电和电磁干扰性能好。这在有大电流脉冲干扰的环境下尤为重要。

（3）无串音干扰，保密性好，也不易被窃听或截取数据。

（4）体积小，重量轻。这在现有电缆管道已拥塞不堪的情况下特别有利。例如，1km长的1000对双绞线电缆约重8000kg，而同样长度但容量大得多的一对两芯光缆仅重100kg。但要把两根光纤精确地连接起来，需要使用专用设备。

由于生产工艺的进步，光纤的价格不断降低，因此现在已经非常广泛地应用在计算机网络、电信网络和有线电视网络的主干网络中，因为它提供了很高的带宽，而且性价比很高。在高速局域网中也使用得很多。

最后要提一下，在导引型传输媒体中，还有一种是架空明线（铜线或铁线）。这是在20世纪初就已大量使用的方法-在电线杆上架设的互相绝缘的明线。架空明线安装简单，但通信质量差，受气候环境等影响较大。在许多国家现在都已停止了铺设架空明线。目前在我国的一些农村和边远地区的通信仍使用架空明线。

<!-- ·50· -->

#### 2.3.2 非导引型传输媒体

前面介绍了三种导引型传输媒体。但是，若通信线路要通过一些高山或岛屿，有时就很难施工。即使是在城市中，挖开马路敷设电缆也不是一件很容易的事。当通信距离很远时，敷设电缆既昂贵又费时。但利用无线电波在自由空间的传播就可较快地实现多种通信。由于这种通信方式不使用上一节所介绍的各种导引型传输媒体，因此就将自由空间称为“非导引型传输媒体”。

特别要指出的是，由于信息技术的发展，社会各方面的节奏变快了。人们不仅要求能够在运动中进行电话通信（即移动电话通信），而且还要求能够在运动中进行计算机数据通信（俗称上网）。因此在最近十几年无线电通信发展得特别快，因为利用无线信道进行信息的传输，是在运动中通信的唯一手段。

无线传输可使用的频段很广。从前面给出的图2-5可以看出，人们现在已经利用了好几个波段进行通信。紫外线和更高的波段目前还不能用于通信。图2-5的最下面一行还给出了ITU对波段取的正式名称。例如，LF波段的波长是从1km到10km（对应于30kHz\~300kHz）。LF,MF和HF的中文名字分别是低频、中频（300 kHz\~3 MHz）和高频（3 MHz\~30MHz）。更高的频段中的V,U,S和E分别对应于Very,Ultra,Super和Extremely，相应的频段的中文名字分别是甚高频（30 **MHz\~300 MHz）、特高频（300 MHz\~3 GHz）、超高频（3 GHz～30** **GHz）和极高频（30** GHz\~300 GHz)，最高的一个频段中的T是Tremendously，目前尚无标准译名。在低频LF的下面其实还有几个更低的频段，如甚低频VLF、特低频ULF、超低频SLF和极低频ELF等，因不用于一般的通信，故未画在图中。

短波通信（即高频通信）主要是靠电离层的反射。但电离层的不稳定所产生的衰落现象和电离层反射所产生的多径效应①，使得短波信道的通信质量较差。因此，当必须使用短波无线电台传送数据时，一般都是低速传输，即速率为一个标准模拟话路传几十至几百比特／秒。只有在采用复杂的调制解调技术后，才能使数据的传输速率达到几千比特／秒。

无线电微波通信在数据通信中占有重要地位。微波的频率范围为300 MHz\~300 GHz （波长1m\~1mm)，但主要使用2\~40GHz的频率范围。微波在空间主要是直线传播。由于微波会穿透电离层而进入宇宙空间，因此它不像短波那样可以经电离层反射传播到地面上很远的地方。传统的微波通信主要有两种方式，即地面微波接力通信和卫星通信。

由于微波在空间是直线传播的，而地球表面是个曲面，因此其传播距离受到限制，一般只有50km左右。但若采用100m高的天线塔，则传播距离可增大到100km。为实现远距离通信必须在一条微波通信信道的两个终端之间建立若干个中继站。中继站把前一站送来的信号经过放大后再发送到下一站，故称为“接力”。大多数长途电话业务使用4\~6 GHz的频率范围。

微波接力通信可传输电话、电报、图像、数据等信息。其主要特点是：

（1）微波波段频率很高，其频段范围也很宽，因此其通信信道的容量很大。

（2）因为工业干扰和天电干扰的主要频谱成分比微波频率低得多，对微波通信的危害比对短波和米波（即甚高频）通信小得多，因而微波传输质量较高。

①注：多径效应就是同一个信号经过不同的反射路径到达同一个接收点，但各反射路径的衰减和时延都不相同，使得最后得到的合成信号失真很大。

<!-- ·51· -->

（3）与相同容量和长度的电缆载波通信比较，微波接力通信建设投资少，见效快，易于跨越山区、江河。

当然，微波接力通信也存在如下的一些缺点：

（1）相邻站之间必须直视（常称为视距LOS(Line Of Sight))，不能有障碍物。有时一个天线发射出的信号也会分成几条略有差别的路径到达接收天线，因而造成失真。

（2）微波的传播有时也会受到恶劣气候的影响。

（3）与电缆通信系统比较，微波通信的隐蔽性和保密性较差。

（4）对大量中继站的使用和维护要耗费较多的人力和物力。

常用的卫星通信方法是在地球站之间利用位于约3万6千公里高空的人造同步地球卫星作为中继器的一种微波接力通信。对地静止通信卫星就是在太空的无人值守的微波通信的中继站。可见卫星通信的主要优缺点大体上应当和地面微波通信差不多。

卫星通信的最大特点是通信距离远，且通信费用与通信距离无关。同步地球卫星发射出的电磁波能辐射到地球上的通信覆盖区的跨度达1万8千多公里，面积约占全球的三分之一。只要在地球赤道上空的同步轨道上，等距离地放置3颗相隔120度的卫星，就能基本上实现全球的通信。

和微波接力通信相似，卫星通信的频带很宽，通信容量很大，信号所受到的干扰也较小，通信比较稳定。为了避免产生干扰，卫星之间相隔如果不小于2度，那么整个赤道上空只能放置180个同步卫星。好在人们想出来可以在卫星上使用不同的频段来进行通信。因此总的通信容量资源还是很大的。

卫星通信的另一特点就是具有较大的传播时延。由于各地球站的天线仰角并不相同，因此不管两个地球站之间的地面距离是多少（相隔一条街或相隔上万公里），从一个地球站经卫星到另一地球站的传播时延在250\~300ms之间。一般可取为270ms。这和其他的通信有较大差别（请注意：这和两个地球站之间的距离没有什么关系）。对比之下，地面微波接力通信链路的传播时延一般取为3.3μs/km。

请注意，“卫星信道的传播时延较大”并不等于“用卫星信道传送数据的时延较大”。这是因为传送数据的总时延除了传播时延外，还有发送时延、处理时延和排队时延等部分。传播时延在总时延中所占的比例有多大，取决于具体情况。但利用卫星信道进行交互式的网上游戏显然是不合适的。

在十分偏远的地方，或在离大陆很远的海洋中，要进行通信就几乎完全要依赖于卫星通信。卫星通信还非常适合于广播通信，因为它的覆盖面很广。但从安全方面考虑，卫星通信系统的保密性则相对较差。

通信卫星本身和发射卫星的火箭造价都较高。受电源和元器件寿命的限制，同步卫星的使用寿命一般为10\~15年。卫星地球站的技术较复杂，价格还比较贵。这就使得卫星通信的费用较高。

除上述的同步卫星外，低轨道卫星通信系统已开始使用。低轨道卫星相对于地球不是静止的，而是不停地围绕地球旋转。目前，大功率、大容量、低轨道宽带卫星已开始在空间部署，并构成了空间高速链路。由于低轨道卫星离地球很近，因此轻便的手持通信设备都能够利用卫星进行通信。

从20世纪90年代起，无线移动通信和互联网一样，得到了飞速的发展。与此同时，使用无线信道的计算机局域网也获得了越来越广泛的应用。我们知道，要使用某一段无线电频谱进行通信，通常必须得到本国政府有关无线电频谱管理机构的许可证。但是，也有一些无线电频段是可以自由使用的（只要不干扰他人在这个频段中的通信），这正好满足计算机无线局域网的需求。图2-12给出了美国的ISM频段，现在的无线局域网就使用其中的2.4GHz和5.8GHz频段。ISM是Industrial,Scientific,and Medical（工业、科学与医药）的缩写，即所谓的“工、科、医频段”。各国的ISM标准有可能略有差别。

<!-- ·52· -->

<!-- 26 83.5 125 频带 MHz MHz MHz 频率 902 928 2.4 2.4835 5.725 5.850 MHz MHz GHz GHz GHz GHz -->
![](https://web-api.textin.com/ocr_image/external/2936a7d5cb383800.jpg)

图2-12 无线局域网使用的ISM频段

红外通信、激光通信也使用非导引型媒体。可用于近距离的笔记本电脑相互传送数据。

#### 2.4 信道复用技术

##### 2.4.1 频分复用、时分复用和统计时分复用

复用（multiplexing）是通信技术中的基本概念。在计算机网络中的信道广泛地使用各种复用技术。下面对信道复用技术进行简单的介绍。

图2-13(a）表示A1, B2和C2进行通信，总共需B1和C1分别使用一个单独的信道和A2,要三个信道。但如果在发送端使用一个复用器，就可以让大家合起来使用一个共享信道进行通信。在接收端再使用分用器，把合起来传输的信息分别送到相应的终点。图2-13(b）是复用的示意图。当然复用要付出一定代价（共享信道由于带宽较大因而费用也较高，再加上复用器和分用器）。但如果复用的信道数量较大，那么在经济上还是合算的。

<!-- · A1 A2 - B1 B2 ★ -->
![](https://web-api.textin.com/ocr_image/external/6eac21cfc2f3549c.jpg)

（a）使用单独的信道

<!-- A1 (·++★) A3 B1 复用 分用 共享信道 B2 C1 -->
![](https://web-api.textin.com/ocr_image/external/a1ce7b8a0dc2989b.jpg)

（b）使用共享信道

图2-13 复用的示意图

最基本的复用就是频分复用 FDM (Frequency Division Multiplexing）和时分复用 TDM （Time Division Multiplexing）。频分复用最简单，其特点如图2-14(a）所示。用户在分配到一定的频带后，在通信过程中自始至终都占用这个频带。可见频分复用的所有用户在同样的时间占用不同的带宽资源（请注意，这里的“带宽”是频率带宽而不是数据的发送速率）。而时分复用则是将时间划分为一段段等长的时分复用帧（TDM帧）。每一个时分复用的用户在每一个TDM帧中占用固定序号的时隙。为简单起见，在图2-14(b）中只画出了4个用户A，B,C和D。每一个用户所占用的时隙周期性地出现（其周期就是TDM帧的长度）。因此TDM信号也称为等时（isochronous）信号。可以看出，时分复用的所有用户是在不同的时间占用同样的频带宽度。这两种复用方法的优点是技术比较成熟，但缺点是不够灵活。时分复用则更有利于数字信号的传输。

<!-- ·53· -->

<!-- 频率 频带n 频带3 频带2 频带1 (a) 时间 周期性出现 频率 A B C D A B C D A B C D A B ... -TDM帧 TDM帧 TDM帧 时间 (b) -->
![](https://web-api.textin.com/ocr_image/external/fdb27908d5d46fa8.jpg)

图2-14 频分复用（a）和时分复用（b）

在使用频分复用时，若每一个用户占用的带宽不变，则当复用的用户数增加时，复用后的信道的总带宽就跟着变宽。例如，传统的电话通信每一个标准话路的带宽是4kHz（即通信用的3.1 kHz加上两边的保护频带），那么若有1000个用户进行频分复用，则复用后的总带宽就是4MHz。但在使用时分复用时，每一个时分复用帧的长度是不变的，始终是125 μs。若有1000个用户进行时分复用，则每一个用户分配到的时隙宽度就是125μs的千分之一，即0.125 μs，时隙宽度变得非常窄。我们应注意到，时隙宽度非常窄的脉冲信号所占的频谱范围也是非常宽的。

在进行通信时，复用器（multiplexer）总是和分用器（demultiplexer）成对地使用。在复用器和分用器之间是用户共享的高速信道。分用器的作用正好和复用器相反，它把高速信道传送过来的数据进行分用，分别送交到相应的用户。

当使用时分复用系统传送计算机数据时，由于计算机数据的突发性质，一个用户对已经分配到的子信道的利用率一般是不高的。当用户在某一段时间暂时无数据传输时（例如用户正在键盘上输入数据或正在浏览屏幕上的信息），那就只能让已经分配到手的子信道空闲着，而其他用户也无法使用这个暂时空闲的线路资源。图2-15说明了这一概念。这里假定有4个用户A,B,C和D进行时分复用。复用器按A→B→C→D的顺序依次对用户的时隙进行扫描，然后构成一个个时分复用帧。图中共画出了4个时分复用帧，每个时分复用帧有4个时隙。请注意，在时分复用帧中，每一个用户所分配到的时隙长度缩短了，在本例中，只有原来的1/4。可以看出，当某用户暂时无数据发送时，在时分复用帧中分配给该用户的时隙只能处于空闲状态，其他用户即使一直有数据要发送，也不能使用这些空闲的时隙。这就导致复用后的信道利用率不高。

<!-- ·54· -->

<!-- A a a t B b b t C c c t D d t 时分复用 a b bc c a d t #1 #2 #3 #4 4个时分复用帧 -->
![](https://web-api.textin.com/ocr_image/external/7966628082ab6683.jpg)

图2-15 时分复用可能会造成线路资源的浪费

统计时分复用STDM(Statistic TDM）是一种改进的时分复用，它能明显地提高信道的利用率。集中器（concentrator）常使用这种统计时分复用。图2-16是统计时分复用的原理图。一个使用统计时分复用的集中器连接4个低速用户，然后将它们的数据集中起来通过高速线路发送到一个远地计算机。

<!-- 统计时分复用 A a a t B b b t a b b C d a t C 集中器 c c t #1 #2 #3 D d t 3个STDM帧 -->
![](https://web-api.textin.com/ocr_image/external/c453b11d49946bb9.jpg)

图2-16 统计时分复用的工作原理

统计时分复用使用STDM帧来传送复用的数据。但每一个STDM帧中的时隙数小于连接在集中器上的用户数。各用户有了数据就随时发往集中器的输入缓存，然后集中器按顺序依次扫描输入缓存，把缓存中的输入数据放入 STDM帧中。对没有数据的缓存就跳过去。当一个帧的数据放满了，就发送出去。因此，STDM帧不是固定分配时隙，而是按需动态地分配时隙。因此统计时分复用可以提高线路的利用率。我们还可看出，在输出线路上，某一个用户所占用的时隙并不是周期性地出现。因此统计复用又称为异步时分复用，而普通的时分复用称为同步时分复用。这里应注意的是，虽然统计时分复用的输出线路上的数据率小于各输入线路数据率的总和，但从平均的角度来看，这二者是平衡的。假定所有的用户都不间断地向集中器发送数据，那么集中器肯定无法应付，它内部设置的缓存都将溢出。所以集中器能够正常工作的前提是假定各用户都是间歇地工作。

由于STDM帧中的时隙并不是固定地分配给某个用户，因此在每个时隙中还必须有用户的地址信息，这是统计时分复用必须要有的和不可避免的一些开销。在图2-16输出线路上每个时隙之前的短时隙（白色）就是放入这样的地址信息。使用统计时分复用的集中器也叫做智能复用器，它能提供对整个报文的存储转发能力（但大多数复用器一次只能存储一个字符或一个比特），通过排队方式使各用户更合理地共享信道。此外，许多集中器还可能具有路由选择、数据压缩、前向纠错等功能。

<!-- ·55· -->

最后要强调一下，TDM帧和STDM帧都是在物理层传送的比特流中所划分的帧。这种“帧”和我们以后要讨论的数据链路层的“帧”是完全不同的概念，不可弄混。

##### 2.4.2 波分复用

波分复用WDM(Wavelength Division Multiplexing）就是光的频分复用。光纤技术的应用使得数据的传输速率空前提高。现在人们借用传统的载波电话的频分复用的概念，就能做到使用一根光纤来同时传输多个频率很接近的光载波信号。这样就使光纤的传输能力可成倍地提高。由于光载波的频率很高，因此习惯上用波长而不用频率来表示所使用的光载波。这样就得出了波分复用这一名词。最初，人们只能在一根光纤上复用两路光载波信号。这种复用方式称为波分复用WDM。随着技术的发展，在一根光纤上复用的光载波信号的路数越来越多。现在已能做到在一根光纤上复用几十路或更多路数的光载波信号。于是就使用了密集波分复用DWDM(Dense Wavelength Division Multiplexing）这一名词。例如，每一路的数据率是40 Gbit/s，使用DWDM后，如果在一根光纤上复用64路，就能够获得2.56 Tbit/s的数据率。图2-17给出了波分复用的概念。

<!-- 光调制器 光解调器 0 1550nm 1550nm 0 1 1551nm 1551nm 1 2 1552nm 20 Gbit/s EDFA 1552nm 2 8x2.5Gbit/s 3 1553nm 1310nm 4 1554nm 5 1555nm 复用器 分用器 1553nm 3 8x2.5 Gbit/s 1554nm 4 1310nm 1555nm 5 6 1556nm 120km 1556nm 6 7 1557nm 1557nm 7 -->
![](https://web-api.textin.com/ocr_image/external/612dd14b81b5e412.jpg)

图2-17 波分复用的概念

图2-17表示8路传输速率均为2.5 Gbit/s的光载波（其波长均为 1310nm)。经光的调制后，分别将波长变换到 1550∼1557nm，每个光载波相隔 1nm。（这里只是为了说明问题的方便。实际上，对于密集波分复用，光载波的间隔一般是0.8或 1.6nm。）这8个波长很接近的光载波经过光复用器（波分复用的复用器又称为合波器）后，就在一根光纤中传输。因此，在一根光纤上数据传输的总速率就达到了8x2.5 Gbit/s=20 Gbit/s。但光信号传输了一段距离后就会衰减，因此对衰减了的光信号必须进行放大才能继续传输。现在已经有了很好的掺铒光纤放大器EDFA(Erbium Doped Fiber Amplifier）。它是一种光放大器，不需要像以前那样复杂，先把光信号转换成电信号，经过电放大器放大后，再转换成为光信号。EDFA 不需要进行光电转换而直接对光信号进行放大，并且在 1550nm 波长附近有 35nm （即 4.2THz）频带范围提供较均匀的、最高可达40∼50dB的增益。两个光纤放大器之间的光缆线路长度可达 120km，而光复用器和光分用器（波分复用的分用器又称为分波器）之间的无光电转换的距离可达600km（只需放入4个EDFA光纤放大器）。

在地下铺设光缆是耗资很大的工程。因此人们总是在一根光缆中放入尽可能多的光纤（例如，放入100根以上的光纤），然后对每一根光纤使用密集波分复用技术。因此，对于具有100根速率为2.5Gbit/s光纤的光缆，采用16倍的密集波分复用，得到一根光缆的总数据率为100x40Gbit/s，或4Tbit/s。这里的T为1012，中文名词是“太”，即“兆兆”。

<!-- ·56· -->

现在光纤通信的容量和传输距离还在不断增长。据报道［W-NEWS14]，我国在2014年已在一根普通单模光纤在C+L波段以375路、每路267.27 Gbit/s的超大容量超密集波分复用传输80公里，传输总容量达到100.23 Tbit/s。当然，要达到普遍商用化的水平，可能还需要不少的时间。

##### 2.4.3 码分复用

**码分复用** CDM(Code Division Multiplexing）是另一种共享信道的方法。实际上，人们更常用的名词是码分多址CDMA(Code Division Multiple Access）。每一个用户可以在同样的**时间使用同样的频带进行通信。由于各用户使用经过特殊挑选的不同码型，因此各用户之间**不会造成干扰。码分复用最初用于军事通信，因为这种系统发送的信号有很强的抗干扰能力，其频谱类似于白噪声，不易被敌人发现。随着技术的进步，CDMA设备的价格和体积都大幅度下降，因而现在已广泛使用在民用的移动通信中，特别是在无线局域网中。采用CDMA 可提高通信的话音质量和数据传输的可靠性，减少干扰对通信的影响，增大通信系统的容量（是使用GSM的4\~5倍①），降低手机的平均发射功率，等等。下面简述其工作原理。

在CDMA中，每一个比特时间再划分为m个短的间隔，称为码片（chip）。通常m的值是64或128。在下面的原理性说明中，为了画图简单起见，我们设m为8。

使用CDMA的每一个站被指派一个唯一的m bit码片序列（chip sequence）。一个站如果要发送比特1，则发送它自己的 m bit码片序列。如果要发送比特0，则发送该码片序列的二进制反码。例如，指派给S站的8bit码片序列是00011011。当S发送比特1时，它就发送序列00011011，而当S发送比特0时，就发送11100100。为了方便，我们按惯例将码片中的0写为-1，将1写为+1。因此S站的码片序列是（(-1-1-1+1+1-1+1+1)

现假定S站要发送信息的数据率为 b bit/s。由于每一个比特要转换成 m 个比特的码片，因此S站实际上发送的数据率提高到mb bit/s，同时S站所占用的频带宽度也提高到原来数值的 m倍。这种通信方式是扩频（spread spectrum）通信中的一种。扩频通信通常有两大类。一种是直接序列扩频DSSS(Direct Sequence Spread Spectrum)，如上面讲的使用码片序列就是这一类。另一种是跳频扩频 FHSS(Frequency Hopping Spread Spectrum）。

**CDMA** 系统的一个重要特点就是这种体制给每一个站分配的码片序列不仅必须各不相同，并且还必须互相正交（orthogonal）。在实用的系统中是使用伪随机码序列。

用数学公式可以很清楚地表示码片序列的这种正交关系。令向量 S 表示站S的码片向量，再令 T表示其他任何站的码片向量。两个不同站的码片序列正交，就是向量S和 T的规格化内积（inner product）都是0：

$$S\bullet T=\frac {1}{m}\sum _{i=1}^{m}S_{i}T_{i}=0\tag{2-3}$$

$\textcircled {1}$ 注：GSM(Global System for Mobile）即全球移动通信系统，是欧洲和我国现在广泛使用的移动通信体制。

<!-- ·57· -->

例如，向量S为（(-1-1-1+1+1-1+1+1),同时设向量T为(-1-1+1-1+1+1-1)这相当于T站的码片序列为00101110。将向量S和 T的各分量值代入（2-3）式就可看出这两个码片序列是正交的。不仅如此，向量S和各站码片反码的向量的内积也是0。另外一点也很重要，即任何一个码片向量和该码片向量自己的规格化内积都是1：

$$S\bullet S=\frac {1}{m}\sum _{i=1}^{m}S_{i}S_{i}=\frac {1}{m}\sum _{i=1}^{m}S_{i}^{2}=\frac {1}{m}\sum _{i=1}^{m}(\pm 1)^{2}=1\tag{2-4}$$

而一个码片向量和该码片反码的向量的规格化内积值是-1。这从（2-4）式可以很清楚地看出，因为求和的各项都变成了-1。

现在假定在一个CDMA系统中有很多站都在相互通信，每一个站所发送的是数据比特和本站的码片序列的乘积，因而是本站的码片序列（相当于发送比特1）和该码片序列的二进制反码（相当于发送比特0）的组合序列，或什么也不发送（相当于没有数据发送）。我们还假定所有的站所发送的码片序列都是同步的，即所有的码片序列都在同一个时刻开始。利用全球定位系统GPS就不难做到这点。

现假定有一个X站要接收S站发送的数据。X站就必须知道S站所特有的码片序列。X站使用它得到的码片向量S与接收到的未知信号进行求内积的运算。X站接收到的信号是各个站发送的码片序列之和。根据上面的公式（2-3）和（2-4)，再根据叠加原理（假定各种信号经过信道到达接收端是叠加的关系），那么求内积得到的结果是：所有其他站的信号都被过滤掉（其内积的相关项都是0)，而只剩下S站发送的信号。当S站发送比特1时，在X站计算内积的结果是+1，当S站发送比特0时，内积的结果是-1。

图2-18是CDMA的工作原理。设S站要发送的数据是110三个码元。再设CDMA将每一个码元扩展为8个码片，而S站选择的码片序列为(-1-1-1+1+1-1+1+1)。S站发送的扩频信号为Sx∘我们应当注意到，S站发送的扩频信号Sx中，只包含互为反码的两种码片序列。T站选择的码片序列为(-1-1+1-1+1+1+1-1)，T站也发送110三个码元，而T 站的扩频信号为Tx∘因所有的站都使用相同的频率，因此每一个站都能够收到所有的站发送的扩频信号。对于我们的例子，所有的站收到的都是叠加的信号Sx+Tx∘

<!-- 1 1 0 待发送的数据码元. t 发送端 m 个码片→ S站发送的信号 t -1-1-1+1+1-1+1+1 -1-1-1 +1+1-1+1 +1+1+1 -1-1 接收端 经运算后X站 收到的码元 t -->
![](https://web-api.textin.com/ocr_image/external/4dd0ca5aa58eda00.jpg)

图2-18 CDMA的工作原理

当接收站打算收S站发送的信号时，就用S站的码片序列与收到的信号求规格化内积。这相当于分别计算S·Sx和S∘Tx∘ 显然，S∘Sx就是S站发送的数据比特，因为在计算规格化内积时，按（2-3）式相加的各项，或者都是+1，或者都是-1；而S\bulletTx一定是零，因为相加的8项中的+1和-1各占一半，因此总和一定是零。

<!-- ·58· -->

#### 2.5 数字传输系统

在早期电话网中，从市话局到用户电话机的用户线采用最廉价的双绞线电缆，而长途干线采用的是频分复用FDM的模拟传输方式。由于数字通信与模拟通信相比，无论是传输质量上还是从经济上都有明显的优势，目前，长途干线大都采用时分复用PCM的数字传输方式。因此，现在的模拟线路就基本上只剩下从用户电话机到市话交换机之间的这一段几公里长的用户线上。

现代电信网，早已不只是话音这一种业务，还包括视频、图像和各种数据业务。因此需要一种能承载来自其他各种业务网络数据的传输网络。在数字化的同时，光纤开始成为长途干线最主要的传输媒体。光纤的高带宽适用于承载今天的高速率数据业务（比如视频会议）和大量复用的低速率业务（比如话音）。基于这个原因，当前光纤和要求高带宽传输的技术还在共同发展。但早期的数字传输系统存在着许多缺点，其中最主要的是以下两个：

（1）速率标准不统一。由于历史的原因，多路复用的速率体系有两个互不兼容的国际标准，北美和日本的T1速率（1.544 Mbit/s）和欧洲的E1速率（2.048 Mbit/s）。但是再往上的复用，日本又使用了第三种不兼容的标准。这样，国际范围的基于光纤的高速数据传输就很难实现。

（2）不是同步传输。在过去相当长的时间，为了节约经费，各国的数字网主要采用准同步方式。在准同步系统中由于各支路信号的时钟频率有一定的偏差，给时分复用和分用带来许多麻烦。当数据传输的速率很高时，收发双方的时钟同步就成为很大的问题。

为了解决上述问题，美国在1988年首先推出了一个数字传输标准，叫做同步光纤网SONET(Synchronous Optical Network）。整个的同步网络的各级时钟都来自一个非常精确的主时钟（通常采用昂贵的铯原子钟，其精度优于±1x10-11）。SONET 为光纤传输系统定义了同步传输的线路速率等级结构，其传输速率以51.84 Mbit/s为基础①，大约对应于T3/E3的传输速率，此速率对电信号称为第1级同步传送信号（Synchronous Transport Signal)，即STS-1；对光信号则称为第1级光载波（Optical Carrier)，即OC-1。现已定义了从51.84Mbit/s（即OC-1）一直到9953.280 Mbit/s（即OC-192/STS-192）的标准。

ITU-T 以美国标准 SONET 为基础，制定出国际标准同步数字系列 SDH(Synchronous Digital Hierarchy)，即1988年通过的G707\~G.709等三个建议书。到1992年又增加了十几个建议书。一般可认为SDH与SONET是同义词，但其主要不同点是：SDH的基本速率为155.52 Mbit/s，称为第1级同步传递模块（Synchronous Transfer Module)，即STM-1，相当于SONET 体系中的OC-3速率。表2-2为SONET和SDH的比较。为方便起见，在谈到SONET/SDH的常用速率时，往往不使用速率的精确数值而是使用表中第二列给出的近似值作为简称。

①注：SONET规定，SONET 每秒传送8000帧（和PCM的采样速率一样）。每个STS-1帧长为810字节，因此STS-1的数据率为8000x810x8=51840000 bit/s。为了便于表示，通常将一个STS-1帧画成9行90列的字节排列。在这种排列中的每一个字节对应的数据率是64kbit/s。一个STS-n的帧长就是STS-1的帧长的n倍，也同样是每秒传送8000帧，因此STS-n的数据率就是STS-1的数据率的n倍。

<!-- ·59· -->

**表2-2SONET的OC级／STS级与SDH的STM级的对应关系**

<table border="1" ><tr>
<td colspan="1" rowspan="1">线路速率（Mbit/s）</td>
<td colspan="1" rowspan="1">线路速率的近似值</td>
<td colspan="1" rowspan="1">SONET 符号</td>
<td colspan="1" rowspan="1">ITU-T 符号</td>
<td colspan="1" rowspan="1">相当的话路数（每个话路64  kbit /s ）</td>
</tr><tr>
<td colspan="1" rowspan="1">51.840 </td>
<td colspan="1" rowspan="1">-</td>
<td colspan="1" rowspan="1">OC-1/STS-1</td>
<td colspan="1" rowspan="1">-</td>
<td colspan="1" rowspan="1">810 </td>
</tr><tr>
<td colspan="1" rowspan="1">155.520 </td>
<td colspan="1" rowspan="1">155 Mbit/s</td>
<td colspan="1" rowspan="1">OC-3/STS-3</td>
<td colspan="1" rowspan="1">STM-1 </td>
<td colspan="1" rowspan="1">2430 </td>
</tr><tr>
<td colspan="1" rowspan="1">622.080 </td>
<td colspan="1" rowspan="1">622 Mbit/s</td>
<td colspan="1" rowspan="1">OC-12/STS-12</td>
<td colspan="1" rowspan="1">STM-4 </td>
<td colspan="1" rowspan="1">9720 </td>
</tr><tr>
<td colspan="1" rowspan="1">1244.160 </td>
<td colspan="1" rowspan="1">-</td>
<td colspan="1" rowspan="1">OC-24/STS-24</td>
<td colspan="1" rowspan="1">STM-8 </td>
<td colspan="1" rowspan="1">19440 </td>
</tr><tr>
<td colspan="1" rowspan="1">2488.320 </td>
<td colspan="1" rowspan="1">2.5 Gbit/s</td>
<td colspan="1" rowspan="1">OC-48/STS-48</td>
<td colspan="1" rowspan="1">STM-16 </td>
<td colspan="1" rowspan="1">38880 </td>
</tr><tr>
<td colspan="1" rowspan="1">4976.640 </td>
<td colspan="1" rowspan="1">-</td>
<td colspan="1" rowspan="1">OC-96/STS-96</td>
<td colspan="1" rowspan="1">STM-32 </td>
<td colspan="1" rowspan="1">77760 </td>
</tr><tr>
<td colspan="1" rowspan="1">9953.280 </td>
<td colspan="1" rowspan="1">10 Gbit/s</td>
<td colspan="1" rowspan="1">OC-192/STS-192</td>
<td colspan="1" rowspan="1">STM-64 </td>
<td colspan="1" rowspan="1">155 520 </td>
</tr><tr>
<td colspan="1" rowspan="1">39813.120 </td>
<td colspan="1" rowspan="1">40 Gbit/s</td>
<td colspan="1" rowspan="1">OC-768/STS-768</td>
<td colspan="1" rowspan="1">STM-256 </td>
<td colspan="1" rowspan="1">622 080 </td>
</tr></table>

SDH/SONET定义了标准光信号，规定了波长为1310nm和1550nm的激光源。在物理层定义了帧结构。SDH的帧结构是以STM-1为基础的，更高的等级是用N个STM-1复用组成STM-N，如4个STM-1构成STM-4,16个STM-1构成STM-16。

SDH/SONET 标准的制定，使北美、日本和欧洲这三个地区三种不同的数字传输体制在STM-1 等级上获得了统一。各国都同意将这一速率以及在此基础上的更高的数字传输速率作为国际标准。这是第一次真正实现了数字传输体制上的世界性标准。现在SDH/SONET标准已成为公认的新一代理想的传输网体制，因而对世界电信网络的发展具有重大的意义。SDH标准也适合于微波和卫星传输的技术体制。

#### 2.6 宽带接入技术

在第1章中已讲过，用户要连接到互联网，必须先连接到某个ISP，以便获得上网所需的IP地址。在互联网的发展初期，用户都是利用电话的用户线通过调制解调器连接到ISP 的，经过多年的努力，从电话的用户线接入到互联网的速率最高只能达到56kbit/s。为了提高用户的上网速率，近年来已经有多种宽带技术进入用户的家庭。然而目前“宽带”尚无统一的定义。很早以前，有人认为只要接入到互联网的速率远大于56kbit/s就是宽带。后来美国联邦通信委员会FCC认为只要双向速率之和超过200 kbit/s就是宽带。以后，宽带的标准也不断提高。2015年1月，美国联邦通信委员会FCC又对接入网的“宽带”进行了重新定义，将原定的宽带下行速率调整至25Mbit/s，原定的宽带上行速率调整至3Mbit/s。

从宽带接入的媒体来看，可以划分为两大类。一类是有线宽带接入，而另一类是无线宽带接入。由于无线宽带接入比较复杂，我们将在第9章中讨论这个问题。下面我们只限于讨论有线宽带接入。

##### 2.6.1 ADSL技术

非对称数字用户线ADSL(Asymmetric Digital Subscriber Line）技术是用数字技术对现有的模拟电话用户线进行改造，使它能够承载宽带数字业务。虽然标准模拟电话信号的频带被限制在300\~3400 Hz的范围内（这是电话局的交换机设置的标准话路频带），但用户线本身实际可通过的信号频率却超过1MHz。ADSL 技术把0\~4 kHz 低端频谱留给传统电话使用，而把原来没有被利用的高端频谱留给用户上网使用。ADSL的ITU的标准是G.992.1（或称G.dmt，表示它使用DMT技术，见后面的介绍）。由于用户在上网时主要是从互联网下载各种文档，而向互联网发送的信息量一般都不太大，因此ADSL的下行（从ISP到用户）带宽都远远大于上行（从用户到ISP）带宽。“非对称”这个名词就是这样得出的。

<!-- ·60· -->

ADSL的传输距离取决于数据率和用户线的线径（用户线越细，信号传输时的衰减就越大）。例如，0.5mm线径的用户线，传输速率为1.5\~2.0 Mbit/s时可传送5.5km；但当传输速率提高到6.1 Mbit/s时，传输距离就缩短为3.7km。如果把用户线的线径减小到0.4mm，那么在6.1 Mbit/s的传输速率下就只能传送2.7km。此外，ADSL所能得到的最高数据传输速率还与实际的用户线上的信噪比密切相关。

ADSL在用户线（铜线）的两端各安装一个ADSL调制解调器。这种调制解调器的实现方案有许多种。我国目前采用的方案是离散多音调DMT(Discrete Multi-Tone）调制技术。这里的“多音调”就是“多载波”或“多子信道”的意思。DMT 调制技术采用频分复用的方法，把40kHz以上一直到1.1MHz的高端频谱划分为许多子信道，其中25个子信道用于上行信道，而249个子信道用于下行信道，并使用不同的载波（即不同的音调）进行数字调制。这种做法相当于在一对用户线上使用许多小的调制解调器并行地传送数据。由于用户线的具体条件往往相差很大（距离、线径、受到相邻用户线的干扰程度等都不同），因此ADSL采用自适应调制技术使用户线能够传送尽可能高的数据率。当ADSL启动时，用户线两端的ADSL 调制解调器就测试可用的频率、各子信道受到的干扰情况，以及在每一个频率上测试信号的传输质量。这样就使ADSL 能够选择合适的调制方案以获得尽可能高的数据率。可见ADSL不能保证固定的数据率。对于质量很差的用户线甚至无法开通ADSL。因此电信局需要定期检查用户线的质量，以保证能够提供向用户承诺的最高的ADSL数据率。图2-19所示为这种DMT技术的频谱分布。

<!-- ADSL的数字业务 频谱 传统电话 上行信道 下行信道 ·.. ··· 频率（kHz） 0 4 \~40 \~138 \~1100 -->
![](https://web-api.textin.com/ocr_image/external/d502afaf211feb7a.jpg)

图2-19 DMT技术的频谱分布

基于ADSL的接入网由以下三大部分组成：**数字用户线接入复用器** DSLAM(DSL Access Multiplexer)，用户线和用户家中的一些设施（见图2-20）。数字用户线接入复用器包括许多ADSL调制解调器。ADSL调制解调器又称为接入端接单元ATU(Access Termination Unit）。由于ADSL 调制解调器必须成对使用，因此把在电话端局（或远端站）和用户家中所用的ADSL调制解调器分别记为ATU-C(C代表端局（Central Office)）和ATU-R(R代表远端（Remote)）。用户电话通过电话分离器（Splitter）和 ATU-R 连在一起，经用户线到端局，并再次经过一个电话分离器把电话连到本地电话交换机。电话分离器是无源的，它利用低通滤波器将电话信号与数字信号分开。将电话分离器做成无源的是为了在停电时不影响传统电话的使用。一个DSLAM可支持多达500\~1000个用户。若按每户6 Mbit/s计算，则具有1000个端口的DSLAM（这就需要用1000个ATU-C）应有高达6 Gbit/s的转发能力。因ATU-C要使用数字信号处理技术，因此DSLAM的价格较高。

<!-- ·61· -->

<!-- 至ISP 基于ADSL的接入网 端局或远端站 电话 分离器 ATU-C 用户线 区域宽带网 ATU-C ATU-R ATU-C DSLAM 至本地电话局 居民家庭 -->
![](https://web-api.textin.com/ocr_image/external/9673f25891b959f9.jpg)

图2-20 基于ADSL的接入网的组成

ADSL 最大的好处就是可以利用现有电话网中的用户线（铜线），而不需要重新布线。有许多老的建筑，电话线都早已存在。但若重新铺设光纤，往往会对原有建筑产生一些损伤。从尽量少损坏原有建筑考虑，使用ADSL进行宽带接入就非常合适了。到2006年3月为止，全世界的ADSL用户已超过1.5亿户。现在ADSL 调制解调器已经可以做得很轻巧（见图2-21）。需要注意的是，ADSL调制解调器有两个插口。较大的一个是RJ-45插口，用来和计算机相连（见图中的至PC）。较小的是RJ-11插口，用来和电话分离器相连。电话分离器则更小巧（见图2-22)，用户只需要用三个带有RJ-11插头的连线就可以连接好，使用起来非常方便。

<!-- --- Φ312 电源 RJ-45 RJ-11 至PC 至分离器 -->
![](https://web-api.textin.com/ocr_image/external/5af566cb8895e33e.jpg)

图2-21 ADSL调制解调器（ADSL ATU-R）

<!-- 至电话线 至电话机 至ATU-R -->
![](https://web-api.textin.com/ocr_image/external/12cc763bed688ae3.jpg)

图2-22 电话分离器（有三个RJ-11插口）

最后我们要指出，ADSL借助于在用户线两端安装的ADSL调制解调器（即ATU-R和ATU-C）对数字信号进行了调制，使得调制后的数字信号的频谱适合在原来的用户线上传输。用户线本身并没有发生变化。但给用户的感觉是：加上ADSL 调制解调器的用户线好像能够直接把用户计算机产生的数字信号传送到远方的ISP。正因为这样，原来的用户线加上两端的调制解调器就变成了可以传送数字信号的数字用户线DSL。

ADSL技术也在发展。现在ITU-T已颁布了更高速率的ADSL标准，即G系列标准。例如，ADSL2(G.992.3和G.992.4）和ADSL2+(G.992.5)，它们都称为第二代ADSL，目前已开始被许多ISP采用和投入运营。第二代ADSL改进的地方主要是：

（1）通过提高调制效率得到了更高的数据率。例如，ADSL2 要求至少应支持下行8Mbit/s、上行800kbit/s的速率。而ADSL2＋则将频谱范围从1.1MHz扩展至2.2MHz（相应的子信道数目也增多了），下行速率可达16 Mbit/s（最大传输速率可达25 Mbit/s)，而上行速率可达800kbit/s。

（2）采用了无缝速率自适应技术SRA(Seamless Rate Adaptation)，可在运营中不中断通信和不产生误码的情况下，根据线路的实时状况，自适应地调整数据率。

<!-- ·62· -->

（3）改善了线路质量评测和故障定位功能，这对提高网络的运行维护水平具有非常重要的意义。

这里我们要强调一下，虽然ADSL很受居民用户欢迎，但ADSL并不适合于企业。这是因为企业往往需要使用上行信道发送大量数据给许多用户。为了满足企业的需要，ADSL 技术有几种变型。例如，对称DSL，即SDSL(Symmetric DSL)，它把带宽平均分配到下行和上行两个方向，很适合于企业使用，每个方向的速度分别为384kbit/s或1.5 Mbit/s，距离分别为5.5km或3km。还有一种使用一对线或两对线的对称DSL叫做HDSL(High speed DSL)，是用来取代T1线路的高速数字用户线，数据速率可达768 kbit/s或1.5 Mbit/s，距离为2.7\~3.6km。

还有一种比ADSL 更快的、用于短距离传送（300\~1800 m）的 VDSL (Very high speed DSL)，即甚高速数字用户线，也很值得注意。这也就是ADSL的快速版本。VDSL的下行速率达50\~55 Mbit/s，上行速率是1.5\~2.5 Mbit/s。2011年ITU-T颁布了更高速率的VDSL2（即第二代的VDSL）的标准 G.993.2。VDSL2 能够提供的上行和下行的速率都能够达到100 Mbit/s。用这样的速率能够观看非常流畅的视频节目。

以上这些不同的高速DSL都可记为xDSL。

近年来，高速DSL技术的发展又有了新的突破。2011年ITU-T成立了G.fast项目组。这个项目组致力于短距离超高速接入新标准的制定，目标是使用单对铜线在100m距离内能够提供超过500 Mbit/s的接入速率。我国的华为公司积极参加了此标准的制定工作，是该标准的主要技术贡献者之一。在龙国柱博士的领导下，华为公司于2012年首先研制成功Giga DSL样机，实现了超高速的DSL接入。华为的Giga DSL使用时分双工TDD(Time Division Duplex）和OFDM技术，有效地降低了辐射干扰和设备功耗，在100m内上下行总速率可达1 Gbit/s，而在200m内，接入速率可超过500Mbit/s。

目前在欧洲，这种超高速DSL的接入方式很受欢迎。这是因为在欧洲，具有历史意义的古老建筑非常之多，而各国政府都已制定了很严格的保护文物的法律。如果为了实现高速上网就在这些古老建筑的墙上钻洞铺设光缆，那么就破坏了文物，因而被法律禁止。值得注意的是，这些国家的电话普及率很高，进入这些建筑的电话线都早已铺设好了。因此，利用现有电话线来实现高速接入，在欧洲就特别受到欢迎。

在我国，情况有些不同。在建设新的高楼时，就已经把各种电缆的管线位置预留好了。因此，高楼中的用户可以根据自己的需要选择合适的接入方式（不一定非要采用 xDSL 技术）。因此上述这种超高速的DSL接入方式在国内使用得尚不普遍。

##### 2.6.2 光纤同轴混合网（HFC网）

光纤同轴混合网（HFC网，HFC是Hybrid Fiber Coax的缩写）是在目前覆盖面很广的有线电视网的基础上开发的一种居民宽带接入网，除可传送电视节目外，还能提供电话、数据和其他宽带交互型业务。最早的有线电视网是树形拓扑结构的同轴电缆网络，它采用模拟技术的频分复用对电视节目进行单向广播传输。但以后有线电视网进行了改造，变成了现在的光纤同轴混合网（HFC网）。这种光纤同轴混合网HFC的主要特点如下。

为了提高传输的可靠性和电视信号的质量，HFC 网把原有线电视网中的同轴电缆主干部分改换为光纤（图2-23）。光纤从头端连接到光纤结点（fiber node）。在光纤结点光信号被转换为电信号，然后通过同轴电缆传送到每个用户家庭。从头端到用户家庭所需的放大器数目也就减少到仅4\~5个。连接到一个光纤结点的典型用户数是500左右，但不超过2000。

<!-- ·63· -->

<!-- 高带宽光纤 光纤结点 同轴电缆 光纤 头端 光纤 同轴电缆 -->
![](https://web-api.textin.com/ocr_image/external/891036dad1f09607.jpg)

图2-23 HFC网的结构图

光纤结点与头端的典型距离为25km，而从光纤结点到其用户的距离则不超过2\~3km。

原来的有线电视网的最高传输频率是450 MHz，并且仅用于电视信号的下行传输。但现在的HFC网具有双向传输功能，而且扩展了传输频带。根据有线电视频率配置标准GB/T 17786-1999，目前我国的HFC网的频带划分如图2-24所示。

<!-- -下行信道 上行 信道 调频广播、模拟和数字电视、数据业务 频率（MHz） 5 65 87 1000 -->
![](https://web-api.textin.com/ocr_image/external/1f0e662014d1b881.jpg)

图2-24 我国的HFC网的频带划分

要使现有的模拟电视机能够接收数字电视信号，需要把一个叫做机顶盒（set-top box）的设备连接在同轴电缆和用户的电视机之间。但为了使用户能够利用HFC 网接入到互联网，以及在上行信道中传送交互数字电视所需的一些信息，我们还需要增加一个为HFC网使用的调制解调器，它又称为电缆调制解调器（cable modem）。电缆调制解调器可以做成一个单独的设备（类似于ADSL的调制解调器），也可以做成内置式的，安装在电视机的机顶盒里面。用户只要把自己的计算机连接到电缆调制解调器，就可方便地上网了。

美国的有线电视实验室CableLabs制定的电缆调制解调器规约 DOCSIS(Data Over Cable Service Interface Specifications）的第一个版本DOCSIS 1.0，已在1998年3月被ITU-T批准为国际标准。后来又有了2001年的DOCSIS 2.0和2006年的DOCSIS 3.0等新的标准。

电缆调制解调器不需要成对使用，而只需安装在用户端。电缆调制解调器比 ADSL 使用的调制解调器复杂得多，因为它必须解决共享信道中可能出现的冲突问题。在使用ADSL 调制解调器时，用户计算机所连接的电话用户线是该用户专用的，因此在用户线上所能达到的最高数据率是确定的，与其他ADSL用户是否在上网无关。但在使用HFC的电缆调制解调器时，在同轴电缆这一段用户所享用的最高数据率是不确定的，因为某个用户所能享用的数据率大小取决于这段电缆上现在有多少个用户正在传送数据。有线电视运营商往往宣传通过电缆调制解调器上网可以达到比ADSL 更高的数据率（例如达到10 Mbit/s 甚至30Mbit/s)，但只有在很少几个用户上网时才可能会是这样的。然而若出现大量用户（例如几百个）同时上网，那么每个用户实际的上网速率可能会低到难以忍受的程度。

<!-- ·64· -->

##### 2.6.3 FTTx技术

由于互联网上已经有了大量的视频信息资源，因此近年来宽带上网的普及率增长得很快。但是为了更快地下载视频文件，以及更加流畅地欣赏网上的各种高清视频节目，尽快地把用户的上网速率进行升级就成为ISP的重要任务。从技术上讲，光纤到户FTTH(Fiber To The Home）应当是最好的选择，这也是广大网民最终所向往的。所谓光纤到户，就是把光纤一直铺设到用户家庭。只有在光纤进入用户的家门后，才把光信号转换为电信号。这样做就可以使用户获得最高的上网速率。

但光纤到户 FTTH 有两个问题：首先是目前的价格还不够便宜；其次是一般的家庭用户也并没有这样高的数据率的需求。要在网上流畅地观看视频节目，有数兆比特每秒的数据率就可以了，不一定非要使用100 Mbit/s或更高的数据率。

在这种情况下，就出现了多种宽带光纤接入方式，称为FTTx，表示Fiber To The...。这里字母x可代表不同的光纤接入地点。实际上，FTTx就是把光电转换的地方，从用户家中（这时x就是H）向外延伸到离用户家门口有一定距离的地方。

其实，现在信号在陆地上长距离的传输，基本上都已经实现了光纤化。在前面所介绍的ADSL和HFC宽带接入方式中，用于远距离的传输媒体也早都使用了光缆。只是到了临近用户家庭的地方，才转为铜缆（电话的用户线和同轴电缆）。我们知道，一个家庭用户远远用不了一根光纤的通信容量。为了有效地利用光纤资源，在光纤干线和广大用户之间，还需要铺设一段中间的转换装置即光配线网ODN(Optical Distribution Network)，使得数十个家庭用户能够共享一根光纤干线。图2-25 是现在广泛使用的无源光配线网的示意图。“无源”表明在光配线网中无须配备电源，因此基本上不用维护，其长期运营成本和管理成本都很低。无源的光配线网常称为无源光网络PON(Passive Optical Network）。

<!-- 光网络单元 发往特定ONU的数据 下行 ONU 头端 光分路器 光纤干线 OLT 1:N ONU ·.. ONU 特定ONU发来的数据 ONU 上行 光纤干线 头端 OLT 1:N ONU ·.. ONU 局端 光配线网（ODN） 用户端 -->
![](https://web-api.textin.com/ocr_image/external/e4034b733b1ea4b7.jpg)

图2-25 无源光配线网的组成

在图2-25中，光线路终端OLT(Optical Line Terminal）是连接到光纤干线的终端设备。OLT把收到的下行数据发往无源的1:N光分路器（splitter)，然后用广播方式向所有用户端的光网络单元ONU(Optical Network Unit）发送。典型的光分路器使用分路比是1:32，有时也可以使用多级的光分路器。每个ONU 根据特有的标识只接收发送给自己的数据，然后转换为电信号发往用户家中。每一个ONU到用户家中的距离可根据具体情况来设置，OLT则给各ONU分配适当的光功率。如果ONU在用户家中，那就是光纤到户FTTH了。

<!-- ·65· -->

当ONU发送上行数据时，先把电信号转换为光信号，光分路器把各 ONU发来的上行数据汇总后，以TDMA方式发往OLT，而发送时间和长度都由OLT集中控制，以便有序地共享光纤主干。

光配线网采用波分复用，上行和下行分别使用不同的波长。

无源光网络PON的种类很多，但最流行的有以下两种。

一种是以太网无源光网络EPON(Ethernet PON)，已在2004年6月形成了IEEE的标准802.3ah。在链路层使用以太网协议，利用PON的拓扑结构实现了以太网的接入。EPON的优点是：与现有以太网的兼容性好，并且成本低，扩展性强，管理方便。

另一种是吉比特无源光网络GPON(Gigabit PON)，其标准是ITU在2003年1月批准的ITU-T G.984。GPON采用通用封装方法GEM(Generic Encapsulation Method)，可承载多业务，对各种业务类型都能够提供服务质量保证，是很有潜力的宽带光纤接入技术。

现在已有很多种不同的FTTx。除了光纤到户FTTH外，还有光纤到路边FTTC(C表示Curb）、光纤到小区FTTZ(Z表示Zone）、光纤到大楼FTTB(B表示Building）、光纤到楼层FTTF(F表示Floor）、光纤到办公室FTTO(O表示Office）、光纤到桌面 FTTD(D 表示Desk)，等等。从ONU到用户的个人电脑一般使用以太网连接，使用5类线作为传输媒体。究竟选择何种接入方式最为合适，也就是说，究竟把光网络单元ONU 放在什么地方，则应当通过详细的预算对比才能确定。从总的趋势来看，光网络单元ONU越来越靠近用户的家庭，因此就有了“光进铜退”的说法。

需要注意的是，目前有些网络运营商宣传所推出的“光纤到户”，往往并非真正的FTTH，而是FTTx，对居民来说就是FTTB或FTTF。有的运营商把这种接入方式叫做“光纤宽带”或“光纤加局域网”，这样可能较为准确。

## 本章的重要概念

·物理层的主要任务就是确定与传输媒体的接口有关的一些特性，如机械特性、电气特性、功能特性和过程特性。

·一个数据通信系统可划分为三大部分，即源系统、传输系统和目的系统。源系统包括源点（或源站、信源）和发送器，目的系统包括接收器和终点（或目的站，或信宿）。

·通信的目的是传送消息。如话音、文字、图像、视频等都是消息。数据是运送消息的实体。信号则是数据的电气或电磁的表现。

·根据信号中代表消息的参数的取值方式不同，信号可分为模拟信号（或连续信号）和数字信号（或离散信号）。代表数字信号不同离散数值的基本波形称为码元。

·根据双方信息交互的方式，通信可以划分为单向通信（或单工通信）、双向交替通信（或半双工通信）和双向同时通信（或全双工通信）。

·来自信源的信号叫做基带信号。信号要在信道上传输就要经过调制。调制有基带调制和带通调制之分。最基本的带通调制方法有调幅、调频和调相。还有更复杂的调

<!-- ·66· -->

制方法，如正交振幅调制。

·要提高数据在信道上的传输速率，可以使用更好的传输媒体，或使用先进的调制技术。但数据传输速率不可能被任意地提高。

·传输媒体可分为两大类，即导引型传输媒体（双绞线、同轴电缆或光纤）和非导引型传输媒体（无线或红外或大气激光）。

·常用的信道复用技术有频分复用、时分复用、统计时分复用、码分复用和波分复用（光的频分复用）。

·最初在数字传输系统中使用的传输标准是脉冲编码调制PCM。现在高速的数字传输系统使用同步光纤网SONET（美国标准）或同步数字系列SDH（国际标准）。

·用户到互联网的宽带接入方法有非对称数字用户线ADSL（用数字技术对现有的模拟电话用户线进行改造）、光纤同轴混合网HFC（在有线电视网的基础上开发的）和FTTx（即光纤到······）。

·为了有效地利用光纤资源，在光纤干线和用户之间广泛使用无源光网络PON。无源光网络无须配备电源，其长期运营成本和管理成本都很低。最流行的无源光网络是以太网无源光网络EPON和吉比特无源光网络GPON。

## 习题

**2-01** 物理层要解决哪些问题？物理层的主要特点是什么？

**2-02** 规程与协议有什么区别？

**2-03** 试给出数据通信系统的模型并说明其主要组成构件的作用。

**2-04** 试解释以下名词：数据，信号，模拟数据，模拟信号，基带信号，带通信号，数字数据，数字信号，码元，单工通信，半双工通信，全双工通信，串行传输，并行传输。

**2-05** 物理层的接口有哪几个方面的特性？各包含些什么内容？

**2-06** 数据在信道中的传输速率受哪些因素的限制？信噪比能否任意提高？香农公式在数据通信中的意义是什么？“比特／秒”和“码元／秒”有何区别？

**2-07** 假定某信道受奈氏准则限制的最高码元速率为20000码元／秒。如果采用振幅调制，把码元的振幅划分为16个不同等级来传送，那么可以获得多高的数据率（bit/s)？

**2-08** 假定要用3kHz带宽的电话信道传送64 kbit/s的数据（无差错传输），试问这个信道应具有多高的信噪比（分别用比值和分贝来表示）？这个结果说明什么问题？

**2-09** 用香农公式计算一下，假定信道带宽为3100Hz，最大信息传输速率为35 kbit/s，那么若想使最大信息传输速率增加 60%，问信噪比S/N应增大到多少倍？如果在刚才计算出的基础上将信噪比S/N再增大到10倍，问最大信息速率能否再增加20%？

**2-10**常用的传输媒体有哪几种？各有何特点？

**2-11** 假定有一种双绞线的衰减是0.7dB/km（在1kHz时），若容许有20dB的衰减，试问使用这种双绞线的链路的工作距离有多长？如果要使这种双绞线的工作距离增大到100公里，问应当使衰减降低到多少？

**2-12** 试计算工作在 1200nm到 1400nm之间以及工作在 1400nm到 1600nm之间的光波的频带宽度。假定光在光纤中的传播速率为2×108m/s

**2-13** 为什么要使用信道复用技术？常用的信道复用技术有哪些？

**2-14** 试写出下列英文缩写的全文，并进行简单的解释。

<!-- ·67· -->

**FDM,TDM,** STDM,WDM, DWDM, CDMA, SONET, SDH, STM-1,OC-48。

**2-15** 码分多址 CDMA为什么可以使所有用户在同样的时间使用同样的频带进行通信而不会互相干扰？这种复用方法有何优缺点？

**2-16** 共有四个站进行码分多址CDMA通信。四个站的码片序列为：

A:(-1-1-1+1+1-1+1+1) B:(-1-1+1-1+1+1+1-1)

C:(-1+1-1+1+1-1-1) D:(-1+1-1-1-1+1-1)

现收到这样的码片序列： (-1+1-3+1-1-3+1+1)。问哪个站发送数据了？发送数据的站发送的是1还是0？

**2-17** 试比较ADSL、HFC以及FTTx接入技术的优缺点。

**2-18** 为什么在ADSL技术中，在不到1MHz的带宽中却可以使传送速率高达每秒几个兆比特？

**2-19** 什么是EPON和GPON？

<!-- ·68· -->

# 第3章 数据链路层

数据链路层属于计算机网络的低层。数据链路层使用的信道主要有以下两种类型：

（1）点对点信道。这种信道使用一对一的点对点通信方式。

（2）广播信道。这种信道使用一对多的广播通信方式，因此过程比较复杂。广播信道上连接的主机很多，因此必须使用专用的共享信道协议来协调这些主机的数据发送。

局域网虽然是个网络，但我们并不把局域网放在网络层中讨论。这是因为在网络层要讨论的问题是多个网络互连的问题，是讨论分组怎样从一个网络，通过路由器，转发到另一个网络。在本章中我们研究的是在同一个局域网中，分组怎样从一台主机传送到另一台主机，但并不经过路由器转发。从整个互联网来看，局域网仍属于数据链路层的范围。

本章首先介绍点对点信道和在这种信道上最常用的点对点协议PPP。然后再用较大的篇幅讨论共享信道的局域网和有关的协议。关于无线局域网的讨论将在第9章中进行。

本章最重要的内容是：

（1）数据链路层的点对点信道和广播信道的特点，以及这两种信道所使用的协议（PPP 协议以及CSMA/CD协议）的特点。

（2）数据链路层的三个基本问题：封装成帧、透明传输和差错检测。

（3）以太网MAC层的硬件地址。

（4）适配器、转发器、集线器、网桥、以太网交换机的作用以及使用场合。

下面看一下两台主机通过互联网进行通信时数据链路层所处的地位（图3-1）。

图3-1(a）表示用户主机H1通过电话线上网，中间经过三个路由器（(R1,. R2和.R3)连接到远程主机H2。所经过的网络可以是多种的，如电话网、局域网和广域网。当主机 H1向H2发送数据时，从协议的层次上看，数据的流动如图3-1(b）所示。主机H1和H2都有完整的五层协议栈，但路由器在转发分组时使用的协议栈只有下面的三层①。数据进入路由器后要先从物理层上到网络层，在转发表中找到下一跳的地址后，再下到物理层转发出去。因此，数据从主机H1传送到主机H2需要在路径中的各结点的协议栈向上和向下流动多次，如图中的浅灰色箭头所示。

然而当我们专门研究数据链路层的问题时，在许多情况下我们可以只关心在协议栈中水平方向的各数据链路层。于是，当主机H1向主机H2发送数据时，我们可以想象数据就是在数据链路层从左向右沿水平方向传送的，如图3-2中从左到右的粗箭头所示，即通过以下这样的链路：

H1的链路层→R1的链路层→R2的链路层→R3的链路层→H2的链路层

$\textcircled {1}$  注：当路由器之间在交换路由信息时，则根据所使用的路由选择协议的不同，也有可能需要使用运输层协议。见下一章的4.5节。

<!-- ·69· -->

<!-- 主机H1 路由器 R1 路由器 R2 路由器 R3 主机 H2 电话网 局域网 广域网 局域网 -->
![](https://web-api.textin.com/ocr_image/external/894a2d00f3d3117c.jpg)

（a）主机H，向H2发送数据

<!-- H1 H2 应用层 应用层 运输层 R1 R2 R3 运输层 网络层 网络 网 网络层 链路层 链路层 链路层 链路层 连路层 物理层 物理层 物理层 物理层 物理层 -->
![](https://web-api.textin.com/ocr_image/external/f4833c522999d833.jpg)

（b）从层次上看数据的流动

图3-1 数据链路层的地位

<!-- H1 H2 应用层 应用层 运输层 R1 R2 R3 运输层 网络层 网络层 网络层 网络层 网络层 链路层 链路层 链路层 链路层 链路层 物理层 物理层 物理层 物理层 物理层 -->
![](https://web-api.textin.com/ocr_image/external/45b1f6189475c67d.jpg)

图3-2 只考虑数据在数据链路层的流动

图3-2指出，从数据链路层来看，H1到H2的通信可以看成由四段不同的链路层通信组成，即： H1→R1 R1→R2 R2→R3和 R3→H2 这四段不同的链路层可能采用不同的数据链路层协议。

## 3.1 使用点对点信道的数据链路层

本节讨论使用点对点信道的数据链路层的一些基本问题。其中的某些概念对广播信道也是适用的。

### 3.1.1 数据链路和帧

我们在这里要明确一下，“链路”和“数据链路”并不是一回事。

所谓链路（link）就是从一个结点到相邻结点的一段物理线路（有线或无线），而中间没有任何其他的交换结点。在进行数据通信时，两台计算机之间的通信路径往往要经过许多段这样的链路。可见链路只是一条路径的组成部分。

**数据链路（data** link）则是另一个概念。这是因为当需要在一条线路上传送数据时，除了必须有一条物理线路外，还必须有一些必要的通信协议来控制这些数据的传输（这将在后面几节讨论）。若把实现这些协议的硬件和软件加到链路上，就构成了数据链路。现在最常用的方法是使用网络适配器（既有硬件，也包括软件）来实现这些协议。一般的适配器都包括

<!-- ·70· -->

